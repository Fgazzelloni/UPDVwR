{
  "hash": "78aada489a60e37cc00f1e7ea344593e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Challenge 01 - Plate 06'\nsubtitle: 'Welcome to the #DuboisChallenge2024 week 1'\ndate: '2024-02-05'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/DuboisChallenge2024_FG/main/2024/challenge01/challenge01.png'\nimage-alt: ''\ndescription: ''\noutput: html_document\nexecute: \n   eval: false\n   message: false\n   warning: false\n---\n\n\n\n## Overview\n\nNegro Population of Georgia by Counties, 1870, 1880 (plate 06), February 5\n\n\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n![](https://raw.githubusercontent.com/Fgazzelloni/DuboisChallenge2024_FG/main/2024/challenge01/challenge01.png)\n:::\n\n::: {.column width=\"50%\"}\n![](https://raw.githubusercontent.com/ajstarks/dubois-data-portraits/master/challenge/2024/challenge01/original-plate-06.jpg)\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(patchwork)\n```\n:::\n\n\n\n\n## Data ready from the GitHub Repo\n\nDownload the `georgia-1880-county-shapefile.zip` file from: [https://github.com/ajstarks/dubois-data-portraits/tree/master/challenge/2024/challenge01](https://github.com/ajstarks/dubois-data-portraits/tree/master/challenge/2024/challenge01)\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngeorgia_shp <- sf::read_sf(\"data/georgia-1880-county-shapefile\")\n\n# georgia_shp%>%head\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ngeorgia_shp%>%\n  ggplot()+\n  geom_sf()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndat_sf <- georgia_shp%>%\n  janitor::clean_names()%>%\n  separate(data1870,into=c(\"up70\",\"down70\"))%>%\n  separate(data1880_p,into=c(\"up80\",\"down80\"))%>%\n  mutate(# pop 1870\n         up70=ifelse(up70==\"\",0,up70),\n         down70=ifelse(is.na(down70),0,down70),\n         up70=as.numeric(up70),\n         down70=as.numeric(down70),\n         # pop 1880\n         up80=ifelse(up80==\"\",0,up80),\n         down80=ifelse(is.na(down80),0,down80),\n         up80=as.numeric(up80),\n         down80=as.numeric(down80))%>%\n  rowwise()%>%\n  mutate(pop70=mean(up70,down70),\n         pop80=mean(up80,down80))%>%\n  arrange(pop70,pop80)\n\n\ndata <- dat_sf%>%select(county=icpsrnam,\n                pop70,pop80)%>%\n  mutate(id=case_when(pop70 == 0 ~ 7,\n                      pop70 == 1000 ~ 6,\n                      pop70 == 2500 ~ 5,\n                      pop70 == 5000 ~ 4,\n                      pop70 == 10000 ~ 3,\n                      pop70 == 15000 ~ 2,\n                      pop70 == 20000 ~ 1),\n         pop70=case_when(pop70 == 0 ~ \"UNDER 1,000\",\n                         pop70 == 1000 ~ \"1000 TO 2,500\",\n                         pop70 == 2500 ~ \"2,500 TO 5,000\",\n                         pop70 == 5000 ~ \"5,000 TO 10,000\",\n                         pop70 == 10000 ~ \"10,000 TO 15,000\",\n                         pop70 == 15000 ~ \"15,000 TO 20,000\",\n                         pop70 == 20000 ~ \"20,000 TO 30,000\"))%>%\n  # pop80\n    mutate(id=case_when(pop80 == 0 ~ 7,\n                      pop80 == 1000 ~ 6,\n                      pop80 == 2500 ~ 5,\n                      pop80 == 5000 ~ 4,\n                      pop80 == 10000 ~ 3,\n                      pop80 == 15000 ~ 2,\n                      pop80 == 20000 ~ 1),\n         pop80=case_when(pop80 == 0 ~ \"UNDER 1,000\",\n                         pop80 == 1000 ~ \"1000 TO 2,500\",\n                         pop80 == 2500 ~ \"2,500 TO 5,000\",\n                         pop80 == 5000 ~ \"5,000 TO 10,000\",\n                         pop80 == 10000 ~ \"10,000 TO 15,000\",\n                         pop80 == 15000 ~ \"15,000 TO 20,000\",\n                         pop80 == 20000 ~ \"20,000 TO 30,000\"))\ndata%>%count(id,pop80)\n```\n:::\n\n\n\n### Dybois Style\n\nFonts:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sysfonts)\nlibrary(showtext)\nsysfonts::font_add_google(\"Public Sans\",\"Public Sans\")\n# font_add_google(\"Carter One\", \"Carter One\")\nshowtext::showtext_auto()\nshowtext::showtext_opts(dpi=320)\n```\n:::\n\n\n\nColors:\n\nBackground:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n\"#e7d6c5\"\n```\n:::\n\n\n\nText:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nc(\"#483c32\",\"#bbaa98\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlegend_colors <- c(\"#372c59\",\"#7a5039\",\"#c29e84\",\"#d63352\",\n  \"#e79d96\",\"#edb456\",\"#4b5c4f\")\n```\n:::\n\n\n\nBounding box: xmin: 939223.1 ymin: -701249.8 xmax: 1425004 ymax: -200888.5\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npop70_map <- data%>%\n  ggplot()+\n  geom_sf(aes(fill=pop70),\n          show.legend = F,\n          color=\"#483c32\",alpha=0.9,\n          linewidth=0.1)+\n  scale_fill_manual(values=c(\"UNDER 1,000\"=\"#4b5c4f\",\n                             \"1000 TO 2,500\"=\"#edb456\",\n                             \"2,500 TO 5,000\"=\"#e79d96\",\n                             \"5,000 TO 10,000\"=\"#d63352\",\n                             \"10,000 TO 15,000\"=\"#c29e84\",\n                             \"15,000 TO 20,000\"=\"#7a5039\",\n                             \"20,000 TO 30,000\"=\"#372c59\"),na.value = \"#e0cebb\")+\n    annotate(\"text\", x = -84.45, y = 35.1,\n           label = \"1870\",\n           size = 3.5,color=\"#483c32\",\n           fontface = \"bold\",\n           family =  \"Public Sans\" ) +\n   coord_sf(crs=4326,clip = \"off\")+\n  ggthemes::theme_map()+\n  theme(plot.background = element_rect(color=\"#e7d6c5\",fill=\"#e7d6c5\"),\n        panel.background = element_rect(color=\"#e7d6c5\",fill=\"#e7d6c5\"))\n  \npop70_map\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npop80_map <- data%>%\n  ggplot()+\n  geom_sf(aes(fill=pop80),\n          show.legend = F,\n          color=\"#483c32\",alpha=0.9,\n          linewidth=0.1)+\n  scale_fill_manual(values=c(\"UNDER 1,000\"=\"#4b5c4f\",\n                             \"1000 TO 2,500\"=\"#edb456\",\n                             \"2,500 TO 5,000\"=\"#e79d96\",\n                             \"5,000 TO 10,000\"=\"#d63352\",\n                             \"10,000 TO 15,000\"=\"#c29e84\",\n                             \"15,000 TO 20,000\"=\"#7a5039\",\n                             \"20,000 TO 30,000\"=\"#372c59\"),na.value = \"#e0cebb\")+\n      annotate(\"text\", x = -84.45, y = 35.1,\n           label = \"1880\",\n           size = 3.5,color=\"#483c32\",\n           fontface = \"bold\",\n           family =  \"Public Sans\" ) +\n  coord_sf(crs=4326,clip = \"off\")+\n  ggthemes::theme_map()+\n  theme(plot.background = element_rect(color=\"#e7d6c5\",fill=\"#e7d6c5\"),\n        panel.background = element_rect(color=\"#e7d6c5\",fill=\"#e7d6c5\"))\n  \npop80_map\n```\n:::\n\n\n\n### Plot layout\n\nsource: [https://ggplot2-book.org/arranging-plots](https://ggplot2-book.org/arranging-plots)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npop70_map+ ggplot() + ggplot()+ pop80_map + plot_layout(ncol = 2,nrow = 2)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlegend1 <- tibble(x=0,y=c(4,3,2,1),\n       label=c(\"5,000 TO 10,000\",\n                   \"2,500 TO 5,000\",\n                    \"1000 TO 2,500\",\n                   \"UNDER 1,000\"),\n       pal=c(\"#d63352\",\"#e79d96\",\"#edb456\",\"#4b5c4f\"))%>%\n  mutate(pal=as.factor(pal))\nlegend1\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlegend1_plot <- legend1%>%\n  ggplot(aes(x,y))+\n  geom_point(aes(fill=label),\n             shape=21,stroke=0.1,\n             size=8.5,\n             show.legend = F)+\n  scale_fill_manual(values=c(\"5,000 TO 10,000\"=\"#d63352\",\n                                \"2,500 TO 5,000\"=\"#e79d96\",\n                                \"1000 TO 2,500\"=\"#edb456\",\n                                \"UNDER 1,000\"=\"#4b5c4f\"))+\n  geom_text(aes(label=label),\n            family=\"Public Sans\",\n            size=3.5,color=\"#7a5039\",\n            nudge_x = 0,hjust=-0.2)+\n  coord_cartesian(xlim=c(-0.2,1),ylim =c(-0,5) )+\n  ggthemes::theme_map()+\n  theme(plot.background = element_rect(color=\"#e7d6c5\",fill=\"#e7d6c5\"),\n        panel.background = element_rect(color=\"#e7d6c5\",fill=\"#e7d6c5\"))\nlegend1_plot\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlegend2 <- tibble(x=0,y=c(1,2,3),\n       label=c(\"10,000 TO 15,000\",\n               \"15,000 TO 20,000\",\n               \"BETWEEN 20,000 AND 30,000\"),\n       color=c(\"#c29e84\",\"#7a5039\",\"#372c59\"))                             \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlegend2_plot <- legend2%>%\n  ggplot(aes(x,y))+\n  geom_point(aes(fill=label),\n             shape=21,stroke=0.1,\n             size=8.5,\n             show.legend = F)+\n  scale_fill_manual(values=c(\"10,000 TO 15,000\"=\"#c29e84\",\n                             \"15,000 TO 20,000\"=\"#7a5039\",\n                             \"BETWEEN 20,000 AND 30,000\"=\"#372c59\"))+\n  geom_text(aes(label=label),\n            size=3.5,color=\"#7a5039\",\n            family=\"Public Sans\",\n            nudge_x = 0.5,hjust=0)+\n  coord_cartesian(xlim=c(-0.2,7),ylim =c(-1,4) )+\n  ggthemes::theme_map()+\n  theme(plot.background = element_rect(color=\"#e7d6c5\",fill=\"#e7d6c5\"),\n        panel.background = element_rect(color=\"#e7d6c5\",fill=\"#e7d6c5\"))\n\n\nlegend2_plot\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npop70_map+ legend2_plot + legend1_plot+ pop80_map + plot_layout(ncol = 2,nrow = 2)+plot_annotation(\n  title = \"NEGRO POPULATION OF GEORGIA BY COUNTIES.\",\n  caption=\"#DuboisChallenge24| Week1 | by Federica Gazzelloni\",\n  theme = theme_void(base_family = \"Public Sans\"))&\n  theme(text=element_text(color=\"#483c32\",face=\"bold\"),\n        plot.title = element_text(hjust=0.5),\n        plot.caption = element_text(size=9),\n        plot.background = element_rect(color=\"#e7d6c5\",fill=\"#e7d6c5\"),\n        panel.background = element_rect(color=\"#e7d6c5\",fill=\"#e7d6c5\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"challenge01.png\",bg=\"#e7d6c5\",height = 8.8)\n```\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}