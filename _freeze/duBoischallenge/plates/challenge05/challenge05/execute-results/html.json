{
  "hash": "03a6e7224797b866040148d121373aca",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Challenge 05 - Plate 13'\nsubtitle: 'Welcome to the #DuboisChallenge2024 week 5'\ndate: '2024-03-04'\nimage: \"https://raw.githubusercontent.com/Fgazzelloni/DuboisChallenge2024_FG/main/2024/challenge05/challenge05.png\"\nimage-alt: ''\ndescription: ''\noutput: html_document\nexecute: \n   eval: false\n   message: false\n   warning: false\n   cache: true\n---\n\n\n\n## Overview\n\nRace Amalgamation in Georgia (plate 13), March 4\n\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n![](https://raw.githubusercontent.com/Fgazzelloni/DuboisChallenge2024_FG/main/2024/challenge05/challenge05.png)\n\n:::\n\n::: {.column width=\"50%\"}\n\n![](https://raw.githubusercontent.com/ajstarks/dubois-data-portraits/master/challenge/2024/challenge05/original-plate-13.jpg)\n\n:::\n\n::::\n\n## Install Libraries\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"tidyverse\")\n# remotes::install_github(\"coolbutuseless/ggpattern\")\n```\n:::\n\n\n## Load Libraries\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsuppressPackageStartupMessages({\n  library(tidyverse)\n  library(patchwork)\n  library(sysfonts)\n  library(showtext)\n})\n```\n:::\n\n\n## Load Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <- \"https://raw.githubusercontent.com/ajstarks/dubois-data-portraits/master/challenge/2024/challenge05/data.csv\"\n\ndat <- read_csv(\"https://raw.githubusercontent.com/ajstarks/dubois-data-portraits/master/challenge/2024/challenge05/data.csv\")\ndat\n```\n:::\n\n\n## Bar Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat %>%\n  ggplot(aes(x=Category,y=Percentage))+\n  geom_col()\n```\n:::\n\n\n## Staked Bar Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat %>%\n  ggplot(aes(x=1,y=Percentage,fill=Category))+\n  geom_col(show.legend = F)\n```\n:::\n\n\n## Dubois Style\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolors_bar <- c(\"#1C1C1Bff\",\"#2A1A12ff\",\"#FDBA00ff\")\ncolors_text <- c(\"#E6D7C6ff\",\"#dc143c\",\"#1C1C1Bff\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsysfonts::font_add_google(name=\"Public Sans\",\n                          family = \"Public Sans\",\n                          regular.wt = 100)\n\nsysfonts::font_add_google(name=\"Public Sans\",\n                          family = \"Public Sans-med\",\n                          regular.wt = 600)\nsysfonts::font_add_google(name=\"Freehand\",\n                          family=\"Freehand\")\nshowtext::showtext_auto()\nshowtext::showtext_opts(dpi=320)\n```\n:::\n\n\n## Stacked Bar Plot with Dubois' style\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat %>%\n  ggplot(aes(x=1,y=Percentage,fill=Category))+\n  geom_col(show.legend = F)+\n  scale_fill_manual(values = colors_bar)+\n  geom_text(aes(label=Percentage))\n```\n:::\n\n\n## Plot 1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot1 <- dat %>%\n  mutate(yy=c(Percentage[3]+Percentage[2]+Percentage[1]/2,\n              Percentage[3]+Percentage[2]/2,\n              Percentage[3]/2)) %>%\n  ggplot(aes(x=1,y=Percentage,fill=Category))+\n  geom_col(show.legend = F)+\n  scale_fill_manual(values = colors_bar)+\n  geom_text(aes(y=yy,label=paste0(Percentage,\"%\")),\n            color=colors_text,\n            family=\"Freehand\")+\n  xlim(0.5,1.5)\n```\n:::\n\n\n## Text\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntext <- c(\"I.E. FULL-BLOODED\\nNEGROES.\",\n          \"I.E. PERSONS WITH\\nSOME WHITE BLOOD\\nOR DESCENDANTS\\nOF LIGHT COLORED\\nAFRICANS.\",\n          \"I.E. PERSONS WITH\\nMORE WHITE THAN\\nNEGRO BLOOD.\")\n```\n:::\n\n\n## Text Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat %>%\n  mutate(text1=rev(cumsum(rev(Percentage))))%>%\n  ggplot(aes(x=1,y=text1))+\n  geom_text(aes(label=text))\n```\n:::\n\n\n## Plot 2\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot2 <- dat %>%\n  mutate(text1=rev(cumsum(rev(Percentage))))%>%\n  ggplot(aes(x=1,y=text1))+\n  geom_text(aes(label=c(\"BLACK.\",\"BROWN.\",\"YELLOW.\")),\n            family=\"Public Sans-med\",\n            size=3)+\n  geom_text(aes(label=text),\n          size=1.7,\n          hjust=0,\n          vjust=2*c(1,0.6,0.7),\n          family=\"Public Sans\")+\n  ylim(0,110)+\n  xlim(0.5,1.7)\n```\n:::\n\n\n## Plot Layout\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(plot2 + plot1) + \n  patchwork::plot_layout(ncol = 2)\n```\n:::\n\n\n## Full Visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(plot2 + plot1) + \n  patchwork::plot_layout(ncol = 2) & \n  plot_annotation(\n    title=\"RACE AMALGAMATION IN GEORGIA .\",\n    subtitle = \"BASED  ON  A  STUDY  OF  40,000  INDIVIDUALS  OF  NEGRO  DESCENT.\\n\",\n    caption = \"#DuboisChallenge2024 - Challenge05 | Federica Gazzelloni\\n\") &\n  theme_void() &\n  theme(plot.title = element_text(hjust=0.5,\n                                  family=\"Public Sans-med\",\n                                  size=10),\n        plot.subtitle = element_text(hjust=0.5,\n                                     family=\"Public Sans\",\n                                     size=6.5),\n        plot.caption = element_text(hjust=0.5,\n                                    family=\"Public Sans\",\n                                    size=6.5))\n```\n:::\n\n\n### Add a place holder\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(plot2 + plot_spacer() + plot1) + \n  patchwork::plot_layout(ncol = 3, widths = c(1,0,1)) & \n  plot_annotation(\n    title=\"RACE AMALGAMATION IN GEORGIA .\",\n    subtitle = \"BASED  ON  A  STUDY  OF  40,000  INDIVIDUALS  OF  NEGRO  DESCENT.\\n\",\n    caption = \"#DuboisChallenge2024 - Challenge05 | Federica Gazzelloni\\n\") &\n  theme_void() &\n  theme(plot.title = element_text(hjust=0.5,\n                                  family=\"Public Sans-med\",\n                                  size=10),\n        plot.subtitle = element_text(hjust=0.5,\n                                     family=\"Public Sans\",\n                                     size=6.5),\n        plot.caption = element_text(hjust=0.5,\n                                    family=\"Public Sans\",\n                                    size=6.5))\n```\n:::\n\n\n## Save it!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(filename = \"your_challenge05.png\", \n       bg=\"#E6D7C6ff\",\n       height=5.5, width=4.5, unit=\"in\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}