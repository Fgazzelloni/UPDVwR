{
  "hash": "fdfe1fc36bcca6ef555e507c993f0dfb",
  "result": {
    "markdown": "---\ntitle: 'Antarctica'\nsubtitle: 'Welcome to #30DayMapChallenge 2023 day 25'\ndate: '2023-11-25'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2023/day25_antarctica/day25_antarctica.png'\nimage-alt: ''\ndescription: ''\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n# Overview\n\nThis is a Map of Antarctica made with the `rOpenSci {antanym}` package provided by \n\n>Composite Gazetteer of Antarctica, Scientific Committee on Antarctic Research. GCMD Metadata (http://gcmd.nasa.gov/records/SCAR_Gazetteer.html)\n\n\n\nLoad libraries\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(elevatr)\nlibrary(showtext)\nlibrary(sysfonts)\n```\n:::\n\n\nInstall and load the package also have a look at the documentation here: <https://docs.ropensci.org/antanym/>\n\n::: {.cell}\n\n```{.r .cell-code}\n# remotes::install_github(\"ropensci/antanym\")\nlibrary(antanym)\n```\n:::\n\n\n## Antarctic geographic place name information\n\nThe documentation recommend to use the cache and to select the names made available in \"Poland\" or \"Germany\" country languages.\n\n::: {.cell}\n\n```{.r .cell-code}\ng <- an_read(cache = \"session\")\n# saveRDS(g,\"data/g.rds\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ng <- an_preferred(g, origin = c(\"Poland\", \"Germany\"))\ng%>%head\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ng%>%str\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ng%>%pull(altitude)%>%summary()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ng%>%DataExplorer::profile_missing()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ng_sf<- g%>%\n  st_as_sf(coords=c(\"longitude\",\"latitude\"),crs=3031)\n\nggplot()+\n  geom_sf(data=g_sf,aes(fill=altitude),\n          shape=21,stroke=0.2,\n          alpha=0.5,color=\"white\")+\n  scale_fill_viridis_c(direction = -1,begin = 0,end = 0.5)\n```\n:::\n\n\nTransform the projection following the example in the `antanym-demo`: \n- <https://github.com/AustralianAntarcticDataCentre/antanym-demo>\n\n\n::: {.cell}\n\n```{.r .cell-code}\northo<- \"+proj=ortho +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs\"\n```\n:::\n\n\n## Ocean\n\nSet the buffer for drawing the ocean.\n\n::: {.cell}\n\n```{.r .cell-code}\nocean <- st_point(x = c(0,0)) %>%\n  st_buffer(dist = 6371000) %>% #6,371km ratios of the earth\n  st_sfc(crs = ortho)\n```\n:::\n\n\nLoad the World polygons with `{tmap}`:\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tmap)\ndata(\"World\")\n# World\n```\n:::\n\n\nTransform the Antarctica locations points into a simple feature object, set the coordinate reference system (crs) to `4326` which is the standard point of view found in the world polygons.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ng_sf<- g%>%\n  st_as_sf(coords=c(\"longitude\",\"latitude\"),\n           crs=4326)\n\ng_text_sf <- g%>%\n  group_by(feature_type_name)%>%\n  reframe(longitude=mean(range(longitude)),\n          latitude=mean(range(latitude)))%>%\n  st_as_sf(coords=c(\"longitude\",\"latitude\"),\n           crs=4326)\n```\n:::\n\n\n## Make the Map\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfont_add_google(name = \"Kalam\", family = \"Kalam\")\nshowtext_auto()\nshowtext_opts(dpi = 320)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nocean\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() + \n  geom_sf(data = ocean,\n          linewidth=1,\n          fill = \"#92c0e2\", \n          color = \"#263c52\")+\n  geom_sf(data=World,fill=\"#2c3035\",color=\"#92c0e2\")+\n  geom_sf(data=World%>%filter(name==\"Antarctica\"),fill=\"#f6f7f9\")+\n  geom_sf(data=g_sf,aes(fill=altitude),\n          shape=21,stroke=0.2,\n          size=0.5,\n          alpha=0.5,color=\"white\")+\n  scale_fill_viridis_c(direction = -1,\n                       begin = 0,end = 0.5,\n                       na.value = \"#bfc0ca\")+\n  geom_sf_text(data=g_text_sf,\n               mapping=aes(label=feature_type_name),\n               size=2,family=\"Kalam\",\n               check_overlap = T)+\n  labs(title=\"Antarctica\",\n       subtitle=\"Highlighting Features Based on Mean Coordinate Ranges\",\n       caption=\"#30DayMapChallenge 2023 Day 25 Antarctica\\nIn greenish are the areas with the lowest altitude\\nDataSource: Gazetteer of Antarctica via {antanym} | Map: @fgazzelloni\")+\n  guides(fill=\"none\")+\n  coord_sf(crs=ortho)+\n theme_void(base_family = \"Kalam\")+\n  theme(text=element_text(color=\"#92c0e2\"),\n        plot.title = element_text(size=50),\n        plot.caption = element_text(hjust = 0))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"day25_antarctica.png\",bg=\"#263c52\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}