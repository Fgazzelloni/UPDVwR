{
  "hash": "5fe39653c8fcb7f5c9e7d887cc512009",
  "result": {
    "markdown": "---\ntitle: 'Green'\nsubtitle: 'Welcome to #30DayMapChallenge 2021 day 7'\ndate: '2021-11-7'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2021/day7_green/green.png'\nimage-alt: ''\ndescription: ''\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n# Overview\n\n\nThis map of `Greater London` with cycle hire and borough boundaries is created using data from `TidyTuesday` 2021 week 45 - `{spData}`.\n\nResources:\n\n- <https://osdatahub.os.uk/downloads/open#CODEPO>\n- <https://datatricks.co.uk/london-map-in-3-easy-steps>\n- <https://data.police.uk/data/statistical-data/>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(spData)\nlibrary(sf)\nlibrary(rgeos)\nlibrary(sp)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nspData::cycle_hire_osm\nspData::lnd\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncoord_lnd_cycl <- data.frame(st_coordinates(cycle_hire_osm$geometry))\n\ncycle_hire_osm <- as.data.frame(cycle_hire_osm)\n\n\ncycle_hire_osm$X <- coord_lnd_cycl$X\ncycle_hire_osm$Y <- coord_lnd_cycl$Y\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncycle_hire_osm\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nspData::lnd\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(lnd)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlondon_data <- lnd\n\nlnd_geo <- data.frame(london_data$GSS_CODE,london_data$HECTARES,london_data$geometry)\n\nnames(lnd_geo)[1]<- \"GSS_CODE\"\n\ncoord_london <- data.frame(st_coordinates(lnd_geo$geometry))\n\nlnd_geo_coord<- merge.data.frame(lnd_geo,coord_london)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlnd_geo_coord%>%count(L3)\n```\n:::\n\n\n\n\n\n\nLONDON MAP!!!!!!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_polygon(data=lnd_geo_coord,\n               aes(x = X, y = Y,group=L3, fill = L3), \n               colour = \"black\")+\n  labs(x = \"Longitude\", y = \"Latitude\", \n       title = \"Map of Greater London with the borough boundaries\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncycle_hire_osm\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(extrafont)\nlibrary(showtext)\nfonts()\nloadfonts()\nfont.families.google()\nfont_add_google(\"Mr Dafoe\", \"MrDafoe\")\nshowtext_opts(dpi = 320)\nshowtext_auto(enable = T)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlnd_center<- lnd_geo_coord%>%filter(X>c(-0.3) & X<0.0,\n                                    Y>51.4 & Y<51.6)\n\ncycle_hire_osm%>%count(name)\n\nfinal <-ggplot()+\n     geom_polygon(data=lnd_geo_coord,\n               aes(x = X, y = Y,group=L3, fill = L3), \n               colour = \"black\")+\n     geom_point(data=cycle_hire_osm, mapping=aes(x=X,y=Y),\n                color = 'gold', size=0.2, alpha=0.5)+ \n  coord_map()+\n  scale_fill_gradient(low = \"honeydew2\",high = \"darkgreen\")+\n  labs(x = \"Longitude\", y = \"Latitude\", \n       title = \"Map of Greater London with cycle hire\",\n       subtitle = \"with the borough boundaries\",\n       caption = \"Datasource: #TidyTuesday week45 - {spData} package \\n Infographics: Federica Gazzelloni\")+\n  cowplot::theme_map()+\n  theme(panel.grid.major = element_blank(),\n        axis.title.x=element_blank(), \n        axis.text.y=element_blank(), \n        plot.background = element_rect(color=\"midnightblue\",fill=\"midnightblue\"),\n        panel.background=element_rect(color=\"midnightblue\",fill=\"midnightblue\"),\n        plot.title=element_text(color=\"honeydew2\",size=33,family=\"Arial\"),\n        plot.subtitle=element_text(color=\"honeydew2\",size=24,family=\"Arial\"),\n        plot.caption = element_text(family=\"Arial\",color=\"honeydew2\"),\n        legend.position = \"none\")\n```\n:::\n\n\nSave final plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nragg::agg_png(\"~/Documents/R/R_general_resources/30DayMapChallenge/day7_green/green.png\",\n              res = 320, width = 11, height = 8, units = \"in\")\nfinal\ndev.off()\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}