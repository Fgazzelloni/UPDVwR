{
  "hash": "24a68623993a36a349eeff9cb8dde69b",
  "result": {
    "markdown": "---\ntitle: 'Movement'\nsubtitle: 'Welcome to #30DayMapChallenge 2021 day 20'\ndate: '2021-11-20'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2021/day20_movement/movement.png'\nimage-alt: ''\ndescription: ''\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n# Overview\n\nThis map of `Italy` shows the `Alitalia Flights`, data is from `openflights`.\n\n\n## Datasource:\n\n1. https://datacatalog.worldbank.org/search?fq=(geographical_extent%2Fcoverage%2Fany(geo:geo%2Fname%20eq%20%27Italy%27))%20and%20(Resources%2Fany(res:res%2Fformat%20eq%20%27TIFF%27))&q=\n2. https://datacatalog.worldbank.org/search/dataset/0038055/Derived-map-of-global-electricity-transmission-and-distribution-lines\n3. https://zenodo.org/record/3538890#.YZulSEbMJo4\n4. https://github.com/carderne/gridfinder\n5. https://rspatial.org/raster/spatial/8-rastermanip.html\n6. https://ec.europa.eu/eurostat/web/gisco/geodata/reference-data/transport-networks\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(raster)\nlibrary(tidyverse)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nit <- rgeoboundaries::gb_adm0(\"italy\")\n```\n:::\n\n\nItaly Boundary Box:\n\nIT: xmin: 6.626621 ymin: 35.49285 xmax: 18.52038 ymax: 47.09178\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflights_fortified <- readRDS(\"~/Documents/R/R_general_resources/30DayMapChallenge/day20_movement/data/flights_fortified.rds\")\n\nmy_df <-flights_fortified %>%\n   filter(long>=6.626621 & long<=18.52038)%>%\n  filter(lat>=35.49285 & lat<=47.09178) \n\nmy_df%>%count(name)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nflights_points <- my_df %>%\n  group_by(group) %>%\n  filter(row_number() == 1 | row_number() == n())\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nragg::agg_png(here::here(\"R_general_resources/30DayMapChallenge/day20_movement/movement_alitalia.png\"),\n              res = 320, width = 12, height = 8, units = \"in\")\nggplot()+\n  geom_sf(data = it, fill = NA, color = \"#295C9C\", size = 0.4) + \n  geom_path(aes(long, lat, group = id, color = name), \n            alpha = 0.0, size = 0.0, \n            data = my_df) +\n  geom_path(aes(long, lat, group = id, color = name), \n            alpha = 0.2, size = 0.3, color = \"#f9ba00\", \n            data = my_df[my_df$name == \"Alitalia\", ]) +\n  \n  geom_point(data = flights_points[flights_points$name == \"Alitalia\", ], \n             aes(long, lat), alpha = 0.8, size = 0.1, colour = \"white\") +\n  theme(panel.background = element_rect(fill = \"#05050f\", colour = \"#05050f\"),\n        panel.grid.major = element_blank(),\n        panel.grid.minor = element_blank(),\n        axis.title = element_blank(),\n        axis.text = element_blank(),\n        axis.ticks.length = unit(0, \"cm\"),\n        legend.position = \"none\") +\n  coord_sf()\ndev.off()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(cowplot)\n\nfinal <- ggdraw()+\n  draw_image(here::here(\"day20_movement/movement_alitalia.png\"),\n             x = 0.01, y = 0,width = 0.98) +\n  draw_label(label=\"Alitalia flights \",\n             x=0.5,y=0.12,size=25,color=\"white\",fontface = \"bold\",\n             angle = 0) +\n  draw_text(\"Data: openflights - #30DayMapChallenge Day20 Movement\\nInfographics: Federica Gazzelloni\",\n            x=0.5,y=0.05,size=11,color=\"white\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# save final plot\nragg::agg_png(here::here(\"day20_movement/movement2.png\"),\n              res = 320, width = 12, height = 8, units = \"in\")\nfinal\ndev.off()\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}