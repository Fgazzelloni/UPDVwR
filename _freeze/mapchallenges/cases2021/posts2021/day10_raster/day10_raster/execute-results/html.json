{
  "hash": "68cdbfab7844fd52ba557d0bcdf984a7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Raster'\nsubtitle: 'Welcome to #30DayMapChallenge 2021 day 10'\ndate: '2021-11-10'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2021/day10_raster/raster2.png'\nimage-alt: ''\ndescription: ''\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n# Overview\n\nThis is a map of `Africa Population transition 2000-2020`, data is from `TidyTuesday` 2021 week 46 `afrilearndata`.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(afriadmin)\nlibrary(afrihealthsites)\nlibrary(afrilearndata)\nlibrary(tmap)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nafriadmin::afcountries\n#afriadmin::afcountrynames(afcountries$name)\n\ncountries<- afriadmin::afcountries$name\n\nafrilearndata::africapitals\nafrilearndata::afrihighway\nafrilearndata::afripop2000\nafrilearndata::afripop2020  \nafrilearndata::africountries\nafriadmin::sf_af_gadm0\nafrihealthsites::sf_healthsites_af\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsf::st_crs(africountries)=st_crs(4326)\nsf::st_crs(afrihighway)=st_crs(4326)\nsf::st_crs(africapitals)=st_crs(4326)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntmap_mode(\"plot\")\n\npop_00 <- tmap::tm_shape(africountries) +\n  tm_polygons(col = \"#42ecf5\") +\n  \n  tm_shape(afripop2000)+\n  tm_raster(title=\"Population density\",\n            palette = rev(viridisLite::inferno(5)),\n            breaks = c(0,2,20,200,2000,25000)) +\n  \n  tm_shape(afrihighway) +\n  tm_lines(col=\"#f5b342\") +\n  \n  tm_shape(africountries)+\n  tm_borders() +\n  tm_text(text =\"iso_a3\", \n          fontface = \"bold\",\n          col=\"midnightblue\",\n          size = \"pop_est\",\n          title.size = \"\",\n          legend.size.show = TRUE,\n          sizes.legend.text = \"Pop\"\n          ) +\n  \n  tm_shape(africapitals) +\n  tm_symbols(col=\"midnightblue\",scale = 0.2) +\n  \n  tm_layout(title=\"2000\",\n            title.position = c(0.8,0.9),\n            legend.title.size = 1,\n            legend.text.size = 0.5,\n            legend.position = c(\"left\",\"bottom\"),\n            legend.bg.color = NA\n            )\n  \n    \npop_20 <- tmap::tm_shape(africountries) +\n  tm_polygons(col = \"#42ecf5\") +\n  \n  tm_shape(afripop2020)+\n  tm_raster(title=\"Population density\",\n            palette = rev(viridisLite::inferno(5)),\n            breaks = c(0,2,20,200,2000,25000)) +\n  \n  tm_shape(afrihighway) +\n  tm_lines(col=\"#f5b342\") +\n  \n  tm_shape(africountries)+\n  tm_borders() +\n   tm_text(text =\"iso_a3\", \n          fontface = \"bold\",\n          col=\"midnightblue\",\n          size = \"pop_est\",\n          title.size = \"\",\n          legend.size.show = TRUE,\n          sizes.legend.text = \"Pop\"\n          ) +\n  \n  tm_shape(africapitals) +\n  tm_symbols(col=\"midnightblue\",scale = 0.2) +\n  \n  tm_layout(title=\"2020\",\n            title.position = c(0.8,0.9),\n            legend.title.size = 1,\n            legend.text.size = 0.5,\n            legend.position = c(\"left\",\"bottom\"),\n            legend.bg.color = NA\n            )  \n  \nmy_raster<-tmap_arrange(pop_00,pop_20,ncol = 2)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# save final plot\nragg::agg_png(here::here(\"day10_raster/raster.png\"),\n              res = 320, width = 8, height = 6, units = \"in\")\nmy_raster\ndev.off()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(showtext)\nlibrary(extrafont)\nsysfonts::font_info_google(\"Josefin Sans\")\n#fonts()\n#loadfonts()\nfont_add_google(\"Josefin Sans\",\"josefin\")\nshowtext_opts(dpi = 320)\nshowtext_auto(enable = T)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# final touches\nlibrary(cowplot)\nlibrary(magick)\n\nraster_image<- magick::image_read(here::here(\"day10_raster/raster.png\"))\n\ng <- grid::circleGrob(gp = grid::gpar(fill = NA,color=\"black\"))\n\n\nfinal <- cowplot::ggdraw()+\n  draw_image(raster_image,x = 0.1, y = 0,width = 0.7)+\n  draw_label(label=\"Africa\",x=0.3,y=0.2,fontfamily=\"josefin\",size=40) +\n  draw_label(label=\"density increased\\nin some areas\\nmore than others\",x=0.52,y=0.35,fontfamily=\"josefin\",size=8) +\n  draw_label(label=\"Population density transition 2000-2020\", x=0.45, y=0.95, size=30, fontfamily=\"josefin\") +\n  \n  draw_line(x = c(0.52, 0.5),y = c(0.38, 0.48),color = \"black\", size = 0.2)+\n  \n  draw_line(x = c(0.52, 0.6),y = c(0.38, 0.5),color = \"black\", size = 0.2)+\n  \n  draw_text(\"Datasource: afrilearndata\\n#TidyTuesdat week46 and #30DayMapChallenge day10 Raster\\nInfographics: Federica Gazzelloni\",x=0.5,y=0.05,family=\"josefin\",size=11)+\n  draw_grob(g, scale = 0.2,x = 0,y = 0.03)\n\n# save final plot\nragg::agg_png(here::here(\"day10_raster/raster2.png\"),\n              res = 320, width = 12, height = 8, units = \"in\")\nfinal\ndev.off()\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}