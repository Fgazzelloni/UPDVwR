{
  "hash": "e9aea088c60292ccfefbd0eb546a00ed",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Collaborative Map'\nsubtitle: 'Welcome to #30DayMapChallenge 2024 Day 17'\ndate: '2024-11-17'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day17_collaborative_map/day17_collaborative_map.png'\nimage-alt: 'day17_collaborative_map'\ndescription: 'Collaborative Map'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\n![Collaborative Map](https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day17_collaborative_map/day17_collaborative_map.png)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(leaflet)\n\n# Create a simple leaflet map\ncollaborative_map <- leaflet() %>%\n  addTiles() %>%\n  addMarkers(lng = -0.1278, lat = 51.5074, popup = \"London\") %>%\n  addMarkers(lng = 2.3522, lat = 48.8566, popup = \"Paris\")\n\n# Save or share this map\ncollaborative_map\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(leaflet)\nlibrary(osmdata)\nlibrary(sf)\n\n# Query OSM data for pharmacies in London and Paris\nlondon_bbox <- c(-0.2, 51.4, -0.1, 51.6) # Approx bounding box for London\nparis_bbox <- c(2.2, 48.8, 2.4, 48.9)   # Approx bounding box for Paris\n\n# Get pharmacy data from OSM\nlondon_pharmacies <- opq(bbox = london_bbox) %>%\n  add_osm_feature(key = \"amenity\", value = \"pharmacy\") %>%\n  osmdata_sf()\n\n# Extract coordinates for pharmacies\nlondon_coords <- st_coordinates(london_pharmacies$osm_points)\n\n# Create a leaflet map with markers for pharmacies\ncollaborative_map <- leaflet() %>%\n  addTiles() %>%\n    # Set view to London city center with appropriate zoom level\n  setView(lng = -0.1278, lat = 51.5074, zoom = 13) %>%\n  # Add markers for London\n  addMarkers(lng = -0.1278, lat = 51.5074, \n             popup = \"London\") %>%\n  # Add pharmacies in London\n  addCircleMarkers(\n    lng = london_coords[, \"X\"], lat = london_coords[, \"Y\"],\n    radius = 3, \n    color = \"blue\", \n    popup = \"Pharmacy (London)\"\n  ) %>%\n    # Add a title as a top control\n  addControl(\n    html = \"<h3>Interactive Map of Pharmacies in London</h3>\",\n    position = \"topright\"\n  ) %>%\n  # Add a caption as a bottom control\n  addControl(\n    html = \"<p>Data: OpenStreetMap | #30DayMapChallenge Day17 | @fgazzelloni.</p>\",\n    position = \"bottomleft\"\n  )\n\n# Display the map\ncollaborative_map\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(htmlwidgets)\n\n# Save the map as an HTML file\nsaveWidget(collaborative_map, \"day17_collaborative_map.html\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(webshot2)\n\nwebshot(\"day17_collaborative_map.html\", \n        file = \"day17_collaborative_map.png\", \n        cliprect = \"viewport\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}