{
  "hash": "2c94a4fa7799d19c08ad574c6657a864",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'The Final Map'\nsubtitle: 'Welcome to #30DayMapChallenge 2024 Day 30'\ndate: '2024-11-30'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day30_the_final_map/day30_the_final_map.png'\nimage-alt: 'day30_the_final_map'\ndescription: 'The Final Map'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n![The Final Map](https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day30_the_final_map/day30_the_final_map.png)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(showtext)\nfont_add_google(name = 'Recursive', \n                family = 'Recursive')\nshowtext_auto()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbathy <- marmap::getNOAA.bathy(lon1 = -180, lon2 = 180,\n                               lat1 = -90, lat2 = 90,\n                               res = 15, keep = TRUE,\n                               antimeridian=TRUE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsp_grid <- marmap::as.SpatialGridDataFrame(bathy)\nsp_grid\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- as.data.frame(sp_grid) %>%\n  rename(lon=s1, lat=s2) \n\ndf_sf <- df %>%\n  sf::st_as_sf(coords = c(\"lon\", \"lat\"), \n               crs = 4326) %>%\n  sf::st_transform(crs = \"+proj=rpoly\") \ndf_sf\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load world data\nworld <- ne_countries(scale = \"medium\", \n                      returnclass = \"sf\") %>%\n  sf::st_transform(crs = \"+proj=rpoly\")  %>%\n  sf::st_make_valid()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = df_sf, \n          aes(color = layer),\n          show.legend = F)+\n  geom_sf(data = world,\n          fill = \"#d1cdb5\", \n          color = NA, alpha = 0.7) +  # Land\n  coord_sf()+\n  labs(title = \"The Earth Without Borders\",\n       subtitle = \"A water-centric view in Rectangular Polyconic projection\",\n       caption = \"Source: Natural Earth | #30DayMapChallenge Day30 | @fgazzelloni\") +\n  theme(text = element_text(family = \"Recursive\"),\n        plot.title = element_text(size = 44, \n                                  face = \"bold\", \n                                  hjust = 0.5),\n        plot.subtitle = element_text(size = 20, \n                                     hjust = 0.5, \n                                     color = \"gray50\"),\n        plot.caption = element_text(size = 20, \n                                    hjust = 0.5, \n                                    color = \"gray70\"),\n        plot.background = element_rect(fill = \"#f7f7f5\", \n                                       color = NA))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"day30_the_final_map.png\", \n       bg = \"white\",\n       width = 8, height = 8, \n       units = \"cm\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}