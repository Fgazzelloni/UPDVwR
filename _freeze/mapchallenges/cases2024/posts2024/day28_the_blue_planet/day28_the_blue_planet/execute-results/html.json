{
  "hash": "29ea48a8d6bf8de873409e6d0993d689",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Blue Planet'\nsubtitle: 'Welcome to #30DayMapChallenge 2024 Day 28'\ndate: '2024-11-28'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day28_the_blue_planet/day28_the_blue_planet.png'\nimage-alt: 'day28_the_blue_planet'\ndescription: 'Blue Planet'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\n![Blue Planet](https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day28_the_blue_planet/day28_the_blue_planet.png)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(showtext)\nfont_add_google(name = 'Georama', \n                family = 'Georama')\nshowtext_auto()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbathy <- marmap::getNOAA.bathy(lon1 = -180, lon2 = 180,\n                               lat1 = -90, lat2 = 90,\n                               res = 15, keep = TRUE,\n                               antimeridian=TRUE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsp_grid <- marmap::as.SpatialGridDataFrame(bathy)\nsp_grid\n```\n:::\n\n\n\n\nPlot it with ggplot2 with an ortho projection\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- as.data.frame(sp_grid) %>%\n  rename(lon=s1, lat=s2) \n\ndf_sf <- df %>%\n  sf::st_as_sf(coords = c(\"lon\", \"lat\"), \n               crs = 4326) %>%\n  sf::st_transform(crs = \"+proj=ortho\") \ndf_sf\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nworld <- rnaturalearth::ne_countries(scale = \"medium\", \n                            returnclass = \"sf\") %>%\n  sf::st_transform(crs = \"+proj=ortho\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = df_sf, \n          aes(color = layer),\n          show.legend = F)+\n  geom_sf(data = world ,\n          fill = \"red\", \n          color = NA) +\n  coord_sf() +\n  labs(title = \"The Blue Planet\",\n       subtitle = \"Bathymetry\",\n       caption = \"Data: marmap::getNOAA.bathy\\n#30DayMapChallenge Day28 | @fgazzelloni\") +\n  theme_void() +\n  theme(text = element_text(family = \"Georama\", size =40),\n        plot.title = element_text(hjust = 0.5, size = 60),\n        plot.subtitle = element_text(hjust = 0.5, size = 40),\n        plot.caption = element_text(hjust = 0.5, size=20,\n                                    lineheight=0.8))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"day28_the_blue_planet.png\", \n       bg = \"white\",\n       width = 8, height = 8, \n       units = \"cm\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}