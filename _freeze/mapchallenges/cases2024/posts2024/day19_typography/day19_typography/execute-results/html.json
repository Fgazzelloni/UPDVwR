{
  "hash": "9e847dd2bd7a62e2890636b641453d7e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Typography Map'\nsubtitle: 'Welcome to #30DayMapChallenge 2024 Day 19'\ndate: '2024-11-19'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day19_typography/day19_typography.png'\nimage-alt: 'day19_typography'\ndescription: 'Typography Map'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\n![Typography Map](https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day19_typography/day19_typography.png)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install and load necessary packages\n# install.packages(c(\"ggplot2\", \"sf\", \"dplyr\", \"rnaturalearth\", \"rnaturalearthdata\", \"ggrepel\"))\nlibrary(ggplot2)\nlibrary(sf)\nlibrary(dplyr)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(ggrepel)  # For better text placement\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load Spain boundaries\nspain <- ne_countries(scale = \"medium\", \n                      country = \"Spain\", \n                      returnclass = \"sf\")\n\n# Load major cities\ncities <- ne_download(scale = \"medium\", \n                      type = \"populated_places\", \n                      category = \"cultural\", \n                      returnclass = \"sf\")\n\n# Filter for cities in Spain\nspain_cities <- cities %>%\n  filter(ADM0NAME == \"Spain\") %>%\n  select(NAME, LONGITUDE, LATITUDE, POP_MAX) %>%  # Keep relevant columns\n  janitor::clean_names()\n# Check the data\nhead(spain_cities)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot the typography map\nggplot(data = spain) +\n  geom_sf(fill = \"gray90\", color = \"white\") +  # Spain boundary\n  geom_text_repel(data = spain_cities,\n                  aes(x = longitude, y = latitude, label = name, size = pop_max),\n                  family = \"serif\", fontface = \"bold\", color = \"darkblue\", max.overlaps = 50) +\n  scale_size_continuous(range = c(3, 10), name = \"Population\") +  # Scale font size by population\n  labs(\n    title = \"Typography Map of Spain\",\n    subtitle = \"City names sized by population\",\n    caption = \"Source: Natural Earth | Visualization by R\"\n  ) +\n  coord_sf() +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 20, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 14, hjust = 0.5),\n    plot.caption = element_text(size = 10, hjust = 0.5),\n    legend.position = \"bottom\"\n  )\n```\n:::\n\n\n\n\nSave the plot as png:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"day19_typography.png\", \n       bg = \"white\",\n       width = 8, height = 6, dpi = 300)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Improved Typography Map\nggplot(data = spain) +\n  geom_sf(fill = \"gray90\", color = \"white\") +  # Spain boundary\n  geom_text_repel(\n    data = spain_cities,\n    aes(x = longitude, y = latitude, label = name, size = pop_max),\n    family = \"serif\", fontface = \"bold\", color = \"#2E86C1\",\n    max.overlaps = 50, seed = 42\n  ) +\n  scale_size_continuous(\n    range = c(3, 10),\n    breaks = c(1e6, 2e6, 3e6, 4e6, 5e6),  # Add meaningful breaks\n    labels = scales::comma,  # Human-readable labels\n    name = \"Population (max)\"\n  ) +\n  labs(\n    title = \"Typography Map of Spain\",\n    subtitle = \"City names sized by population\",\n    caption = \"Source: Natural Earth | Visualization by R\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 22, face = \"bold\", hjust = 0.5, color = \"darkblue\"),\n    plot.subtitle = element_text(size = 16, hjust = 0.5, color = \"gray40\"),\n    plot.caption = element_text(size = 10, hjust = 0.5, color = \"gray\"),\n    legend.position = \"bottom\",\n    legend.title = element_text(size = 12, face = \"bold\"),\n    legend.text = element_text(size = 10),\n    panel.grid = element_blank()  # Remove gridlines for a cleaner look\n  ) +\n  coord_sf()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = spain) +\n  geom_sf(fill = \"gray90\", \n          color = \"white\") +  # Spain boundary\n  geom_text_repel(data = spain_cities,\n                  aes(x = longitude, y = latitude, \n                      label = name, \n                      size = pop_max),\n                  max.overlaps = Inf,\n                  key_glyph = \"point\",\n                  family = \"serif\", \n                  fontface = \"bold\", \n                  color = \"#2E86C1\",\n                  seed = 42) +\n  scale_size_continuous(range = c(3, 10),\n                        breaks = c(1e6, 2e6, 3e6, 4e6, 5e6),  # Add meaningful breaks\n                        labels = scales::label_number(scale = 1/1e6, \n                                                      suffix = \"\"), \n                        name = \"Max Population\\n(in Millions)\") +\n  labs(title = \"\\nTypography Map of Spain\\n\",\n       subtitle = \"City names sized by population\",\n       caption = \"Source: Natural Earth | #30DayMapChallenge Day19 | @fgazzelloni\") +\n  coord_sf(clip = \"off\") +\n  ggthemes::theme_map() +\n  theme(text = element_text(color = \"#2E86C1\"),\n        plot.title = element_text(size = 42, \n                              face = \"bold\", hjust = 0.5, \n                              color = alpha(\"#2E86C1\", 0.99)),\n    plot.subtitle = element_text(size = 16, hjust = 0.5, \n                                 color = alpha(\"#2E86C1\", 0.8)),\n    plot.caption = element_text(size = 14, hjust = 0.5, \n                                color = alpha(\"#2E86C1\", 0.6)),\n    legend.position = c(0.3,0),\n    legend.direction = \"horizontal\",\n    legend.title = element_text(size = 12, face = \"bold\"),\n    legend.text = element_text(size = 10),\n    panel.grid = element_blank()  # Remove gridlines for a cleaner look\n  ) \n```\n:::\n\n\n\nSave it as png:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"day19_typography.png\", \n       bg = \"#2c3035\",scale = 1.2,\n       width = 8, height = 8, \n       dpi = 600)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}