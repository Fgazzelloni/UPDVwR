{
  "hash": "f0ba4f4d76bd9ecad300dbb3bc1b958e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Artic Map'\nsubtitle: 'Welcome to #30DayMapChallenge 2024 Day 11'\ndate: '2024-11-11'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day11_artic/day11_artic.png'\nimage-alt: 'day11_artic'\ndescription: 'Artic Map'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\n![Artic Map](https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day11_artic/day11_artic.png)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install and load required packages\nif (!requireNamespace(\"sdmpredictors\", quietly = TRUE)) install.packages(\"sdmpredictors\")\n```\n:::\n\n\n\n\nLoad the required libraries and data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sdmpredictors)\nlibrary(ggplot2)\nlibrary(rnaturalearth)\nlibrary(raster)\nlibrary(sf)\nlibrary(stars)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## Load sea ice thickness raster data\niceMapMin <- load_layers(\"BO21_icethickltmin_ss\")\niceMapMax <- load_layers(\"BO21_icethickltmax_ss\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convert RasterBrick to data frame\nraster_iceMapMin <- as.data.frame(rasterToPoints(iceMapMin), \n                                  xy = TRUE)\nraster_iceMapMax <- as.data.frame(rasterToPoints(iceMapMax), \n                                  xy = TRUE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_raster(data = raster_iceMapMin, \n              aes(x = x, y = y, fill = BO21_icethickltmin_ss))+\n  geom_raster(data = raster_iceMapMax, \n              aes(x = x, y = y, fill = BO21_icethickltmax_ss))+\n  scale_fill_viridis_c(option = \"D\", direction = -1)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## Load a polygon defining landmasses\nworldMap <- ne_countries(scale = 10, returnclass = \"sf\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = worldMap)+\n  geom_raster(data = raster_iceMapMin, \n              aes(x = x, y = y, fill = BO21_icethickltmin_ss))+\n  geom_raster(data = raster_iceMapMax, \n              aes(x = x, y = y, fill = BO21_icethickltmax_ss))+\n  scale_fill_viridis_c(option = \"D\", direction = -1) +\n  coord_sf()\n```\n:::\n\n\n\n\n\n## Use other data \n\nSource: <https://www.cpom.ucl.ac.uk/csopr/seaice.php?show_thk_map_download_pane=1&show_basin_thickness=0&basin_selected=0&big_thickness_image=0&thk_period=28&year=2011&imonth=12&season=Autumn&ts_area_or_point=all> accessed Noember 11, 2024\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(R.utils)\nlibrary(data.table)\n```\n:::\n\n\n\n\n\n# Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read this file\nurl <- \"https://www.cpom.ucl.ac.uk/csopr/sidata/thk_28.map.07012024_03022024.txt.gz\"\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndownloaded_file <- \"thk_28.map.07012024_03022024.txt.gz\"\ndecompressed_file <- \"thk_28.map.07012024_03022024.txt\"\n\n# Step 1: Download the compressed file\ndownload.file(url, downloaded_file, mode = \"wb\")\n\n# Step 2: Decompress the file\ngunzip(downloaded_file, \n       destname = decompressed_file, \n       overwrite = TRUE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data.table::fread(decompressed_file, \n                          sep = \" \", \n                          header = TRUE)  \nhead(data)\nstr(data)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(data) <- c(\"lat\", \"lon\", \"thickness\", \"uncertainty\", \"quality\", \"distance\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(data)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nartic_sf <- data %>%\n  st_as_sf(coords = c(\"lon\", \"lat\"), crs = 4326) \n\nartic_sf\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = artic_sf, shape=\".\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = worldMap) +\n  geom_sf(data = artic_sf, shape=\".\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = worldMap) +\n  geom_sf(data = artic_sf, shape=\".\") + \n  coord_sf(crs = \"+proj=ortho +lat_0=90 +lon_0=0\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = worldMap) +\n  geom_sf(data = artic_sf, \n          aes(color = thickness),\n          shape=\".\") + \n  coord_sf(crs = \"+proj=ortho +lat_0=90 +lon_0=0\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = worldMap) +\n  geom_sf(data = artic_sf, \n          aes(color = thickness),\n          shape=\".\") + \n    geom_sf(data = artic_sf, \n          aes(color = uncertainty),\n          shape=\".\") + \n  coord_sf(crs = \"+proj=ortho +lat_0=90 +lon_0=0\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = worldMap) +\n  geom_sf(data = artic_sf, \n          aes(color = thickness),\n          shape=\".\") + \n  coord_sf(crs = \"+proj=ortho +lat_0=90 +lon_0=0\") +\n  labs(title = \"Artic Sea Ice Thickness\",\n       subtitle = \"Orthographic Projection Centered on the North Pole -January 2024\",\n       caption = \"Source: CPOM | #30DayMapChallenge Day11 | @fgazzelloni\",\n       color = \"Thickness\") +\n  theme_minimal() +\n  theme(\n    plot.background = element_rect(fill = \"aliceblue\", color = NA),\n    plot.title = element_text(size = 20, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 10, hjust = 0.5),\n    plot.caption = element_text(size = 10, hjust = 0.5)\n  )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = artic_sf, \n          aes(color = thickness), fill = NA) +\n  geom_sf(data = worldMap, \n          fill = NA, color = \"grey20\", size = 0.2) + \n  coord_sf(crs = \"+proj=ortho +lat_0=90 +lon_0=0\", clip = \"off\") +\n  scale_fill_gradientn(colors = c(\"#d9f0ff\", \"#76a9f7\", \"#1f78b4\", \"#08306b\"),\n                       limits = c(0, 5),\n                       guide = guide_colorbar(barwidth = 10, \n                                              barheight = 0.5, \n                                              title.position = \"top\", \n                                              title.hjust = 0.5) )+\n  labs(title = \"Arctic Sea Ice Thickness\",\n       subtitle = \"Orthographic Projection Centered on the North Pole - January 2024\",\n       caption = \"Source: CPOM | #30DayMapChallenge Day11 | @fgazzelloni\",\n       color = \"Thickness (m)\") +\n  theme_minimal() +\n  theme(plot.background = element_rect(fill = \"#f0f5f9\", color = NA),\n        text = element_text(family = \"Helvetica\"),\n        plot.title = element_text(size = 24, \n                                  face = \"bold\", \n                                  color = \"#08306b\", \n                                  hjust = 0.5),\n        plot.subtitle = element_text(size = 14, \n                                     color = \"gray40\", \n                                     hjust = 0.5),\n        plot.caption = element_text(size = 10, \n                                    color = \"gray40\", \n                                    hjust = 0.5),\n        legend.position = \"bottom\",\n        legend.title = element_text(size = 12, face = \"bold\"),\n        legend.text = element_text(size = 10),\n        panel.grid.major = element_line(color = \"gray90\", size = 0.1),  \n        panel.grid.minor = element_line(color = \"gray90\", size = 0.1))\n```\n:::\n\n\n\n\nSave the map as png\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"day11_artic.png\", \n       bg = \"white\",\n       width = 10, height = 10, \n       units = \"in\", \n       dpi = 300)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}