{
  "hash": "07ac1fe9a248beb3471cf4f2b9006346",
  "result": {
    "markdown": "---\ntitle: 'Polygons'\nsubtitle: 'Welcome to #30DayMapChallenge 2022 day 3'\ndate: '2022-11-3'\nimage: 'day3_polygons.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n## Census tracts\n\nsource: https://walker-data.com/census-r/mapping-census-data-with-r.html\n\nLoad libraries\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n#library(kableExtra)\nlibrary(tidycensus)\noptions(tigris_use_cache = TRUE)\n\n# set the fonts\nlibrary(showtext)\nlibrary(sysfonts)\nlibrary(extrafont)\nshowtext::showtext_auto()\nshowtext::showtext_opts(dpi=320)\nfont_add_google(name=\"Poor Story\",family=\"Poor Story\")\n\n# Census API key\n# census_key <- \"bd6ed5f4a30d3672816bb179889338b50ca87a3f\"\n# census_api_key(census_key, install = TRUE)\n\n# Find census data\n# https://api.census.gov/data.html\n\n# Dataset used to identify geography availability in the 5-year ACS Detailed Tables\nacs5_vars <- load_variables(2020, \"acs5\")\n# save(acs5_vars,file=\"data/acs5_vars.RData\")\n############## PRIVATE HEALTH INSURANCE ############## \n# female\n# select the variable of interest: B27002_030\nacs5_vars%>%\n  filter(geography==\"tract\",\n         concept==\"PRIVATE HEALTH INSURANCE STATUS BY SEX BY AGE\",\n         label==\"Estimate!!Total:!!Female:\") \n\n\nprivate_h_insurance_f <- get_acs(\n  geography = \"tract\", \n  variables = \"B27002_030\",\n  state = \"NY\", # fips 41\n  year = 2020,\n  geometry = TRUE\n)\n# save(private_h_insurance_f,file=\"data/private_h_insurance_f.RData\")\n\n# male\n# select the variable of interest: B27002_002\nacs5_vars%>%\n  filter(geography==\"tract\",\n         concept==\"PRIVATE HEALTH INSURANCE STATUS BY SEX BY AGE\",\n         label==\"Estimate!!Total:!!Male:\") \n\n\nprivate_h_insurance_m <- get_acs(\n  geography = \"tract\", \n  variables = \"B27002_002\",\n  state = \"NY\", # fips 41\n  year = 2020,\n  geometry = TRUE\n)\n# save(private_h_insurance_m,file=\"data/private_h_insurance_m.RData\")\n\n# Map\nggplot(private_h_insurance_f) +\n  geom_sf(aes(fill=estimate),\n          size=0.2,\n          show.legend = T) +\n  scale_fill_gradient2(name=\"Female\",\n                       low=\"white\",mid=\"grey80\",high=\"navy\")+\n  geom_sf(data = private_h_insurance_m, \n          aes(color=estimate),\n          size=0.2,\n          fill=NA)+\n  scale_color_gradient2(name=\"Male\",\n                        low=\"white\",mid=\"grey40\",high=\"gold\")+\n  labs(title=\"Private health insurance status in New York\",\n       subtitle=\"Female and Male all ages\",\n       caption=\"5-year ACS Detailed Tables - Year 2020\\n#30DayMapChallenge 2022 Day 3: Polygons\\nDataSource: census.gov | Map: Federica Gazzelloni (@fgazzelloni)\") +\n  ggthemes::theme_map() +\n  theme(text = element_text(family=\"Poor Story\"),\n        plot.caption = element_text(lineheight = 1.5),\n        legend.position = c(0.85,0.3),\n        #legend.direction = \"horizontal\",\n        legend.background = element_blank(),\n        legend.text = element_text(size=6),\n        legend.key.size = unit(8,units = \"pt\"))\n\n\n# ggsave(\"day3_polygons.png\",\n#        bg=\"white\",\n#        dpi=200)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}