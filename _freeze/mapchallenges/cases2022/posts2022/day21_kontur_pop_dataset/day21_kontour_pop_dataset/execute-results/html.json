{
  "hash": "27ced124038595f2fe970eae1ffe2ef4",
  "result": {
    "markdown": "---\ntitle: 'Data: Kontur Population Dataset'\nsubtitle: 'Welcome to #30DayMapChallenge 2022 day 21'\ndate: '2022-11-21'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2022/day21_kontur_pop_dataset/day21_kontour_pop_dataset.png'\nimage-alt: ''\ndescription: ''\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n# Overview\n\nThis is a map of Costa Rica Population density, data is from `Kontur Population dataset - @KonturInc`.\n\nLoad libraries\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\n```\n:::\n\n\nSet the fonts\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(showtext)\nlibrary(sysfonts)\nlibrary(extrafont)\nshowtext::showtext_auto()\nshowtext::showtext_opts(dpi=320)\nfont_add_google(name=\"Noto Serif\",\n                family=\"Noto Serif\")\n```\n:::\n\n\n\nKONTOUR DATASETS:\n\n- https://data.humdata.org/dataset/kontur-population-dataset\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <- \"https://geodata-eu-central-1-kontur-public.s3.amazonaws.com/kontur_datasets/kontur_population_CR_20220630.gpkg.gz\"\ndownloader::download(url, dest=\"data/kontour_pop_cr.zip\", mode=\"wb\") \n\nkontur <- sf::st_read(\"data/kontour_pop_cr\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nna <- rnaturalearth::ne_countries(continent = \"North America\",\n                                  country = c(\"Costa Rica\",\"Nicaragua\",\"Panama\"))\n\nna_sf <- na %>% st_as_sf()\n```\n:::\n\n\nMake the map\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = na_sf,\n          mapping=aes(geometry=geometry),\n          fill=\"#6b493e\",color=\"#6b493e\",\n          alpha=0.3,\n          linewidth=0.02)+\n  geom_sf(data = kontur,\n          fill=\"#6b493e\",color=\"#6b493e\",\n          linewidth=0.01) +\n  geom_sf(data = kontur, \n          aes(fill = population,\n              colour = population),\n          linewidth=0.02,\n          show.legend = F) +\n  scale_fill_gradient(low=\"white\",high = \"red\")+\n  scale_color_gradient(low=\"#006241\",high = \"white\")+\n  coord_sf(xlim = c(-87,-82), ylim = c(8,12), expand = 0) +\n  theme_void() +\n  theme(legend.position = \"none\",\n        plot.margin = margin(10, 10, 10, 10),\n        plot.background = element_rect(fill = \"#6a7a74\", \n                                       colour = \"#6a7a74\"),\n        panel.background = element_rect(fill = \"#6a7a74\", \n                                        colour = \"#6a7a74\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"sj_cr_base_map.png\",\n       width=6.17,\n       height=4.86,\n       dpi=320)\n```\n:::\n\n\nDraw the map\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(cowplot)\nggdraw()+\n  draw_image(\"sj_cr_base_map.png\")+\n  draw_label(\"Costa Rica:\\nPopulation Density\",\n             x=0.03,y=0.3,\n             size=24,\n             hjust=0,\n             fontfamily = \"Noto Serif\")+\n  draw_label(\"#30DayMapchallenge 2022 Day 21: Kontur Population dataset\\nDataSource: @KonturInc | Map: Federica Gazzelloni (@fgazzelloni)\",\n             x=0.03,y=0.06,\n             size=9,\n             hjust=0, \n             fontfamily = \"Noto Serif\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# save final output\nggsave(\"day21_kontur_pop_dataset.png\",\n       width=6.17,\n       height=4.86,\n       dpi=320)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}