{
  "hash": "1c5d9705510dbea459d9608c21a1c600",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Time and Space Map'\nsubtitle: 'Welcome to #30DayMapChallenge 2024 Day 12'\ndate: '2024-11-12'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day12_time&space/day12_time&space.gif'\nimage-alt: 'day12_time&space'\ndescription: 'Time and Space Map'\noutput: html_document\nexecute: \n   eval: false\n---\n\n![Time and Space Map](https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day12_time&space/day12_time&space.gif)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(rnaturalearth)\nlibrary(gganimate)  # For animation\n```\n:::\n\n\n?datasets::WorldPhones\n\n\n::: {.cell}\n\n```{.r .cell-code}\nWorldPhones\n```\n:::\n\n\nLoad spatial information for these areas: N.Amer, Europe, Asia, S.Amer, Oceania, Africa, Mid.Amer:\n\n::: {.cell}\n\n```{.r .cell-code}\nN.Amer <- ne_countries(continent = \"North America\", \n                       returnclass = \"sf\")%>%\n  select(geometry)%>%\n  mutate(continent=\"N.Amer\")\nEurope <- ne_countries(continent = \"Europe\", \n                       returnclass = \"sf\") %>%\n  select(geometry)%>%\n  mutate(continent=\"Europe\")\nAsia <- ne_countries(continent = \"Asia\", \n                     returnclass = \"sf\") %>%\n  select(geometry)%>%\n  mutate(continent=\"Asia\")\nS.Amer <- ne_countries(continent = \"South America\", \n                       returnclass = \"sf\") %>%\n  select(geometry)%>%\n  mutate(continent=\"S.Amer\")\nOceania <- ne_countries(continent = \"Oceania\", \n                        returnclass = \"sf\") %>%\n  select(geometry)%>%\n  mutate(continent=\"Oceania\")\nAfrica <- ne_countries(continent = \"Africa\", \n                       returnclass = \"sf\") %>%\n  select(geometry)%>%\n  mutate(continent=\"Africa\")\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = Africa, fill = \"lightblue\") +\n  geom_sf(data = europe, fill = \"lightgreen\") +\n  geom_sf(data = Asia, fill = \"lightyellow\") +\n  geom_sf(data = N.Amer, fill = \"lightpink\") +\n  geom_sf(data = S.Amer, fill = \"lightcoral\") +\n  geom_sf(data = Oceania, fill = \"lightgrey\") +\n  theme_void()\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- as.data.frame(WorldPhones) %>%\n  rownames_to_column(var = \"year\")\ndata\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata %>% \n  pivot_longer(-year, \n               names_to = \"region\", \n               values_to = \"phones\") %>%\n  ggplot(aes(fill = region, y = phones, x = year)) +\n  geom_bar(stat = \"identity\") +\n  theme_minimal() +\n  theme(legend.position = \"bottom\") +\n  labs(title = \"World Phones by Region\",\n       x = \"Year\",\n       y = \"Phones\",\n       fill = \"Region\") +\n  transition_states(states = year, \n                    transition_length = 2, \n                    state_length = 1) +\n  enter_fade() +\n  exit_fade()\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(viridis)  # For distinct color scales\n\n# Ensure your year column is a factor\ndata_coords %>%\n  mutate(year = as.factor(year)) %>%\n  ggplot() +\n  geom_sf(aes(fill = phones)) +\n  scale_fill_viridis_c(name = \"Phones\", \n                       option = \"magma\") + \n  labs(title = \"The World's Telephones\\nNumber of telephones (in thousands)\\nYear: {closest_state}\",\n       caption = \"Data: WorldPhones {datasets} & RNaturalHearth\\n#30DayMapChallenge Day12 | @fgazzelloni\") +\n ggthemes::theme_map() +\n  theme(plot.title = element_text(size = 20, \n                                  face = \"bold\", \n                                  hjust = 0.5),\n       plot.subtitle = element_text(size = 14, \n                                    hjust = 0.5),\n       plot.caption = element_text(size = 10, \n                                    hjust = 0.5),\n       legend.position = \"right\",\n       legend.title = element_text(size = 12),\n       legend.text = element_text(size = 10)\n  ) +\n  transition_states(year, \n                    transition_length = 1, \n                    state_length = 1) +  \n  ease_aes('linear')\n```\n:::\n\n\nSave the Gif\n\n::: {.cell}\n\n```{.r .cell-code}\nanim_save(\"day12_space&time.gif\", \n          title = \"The World's Telephones\", \n          description = \"The number of telephones in various regions of the world (in thousands)\", \n          tags = \"#30DayMapChallenge\", \n          category = \"Space and Time\", \n          gif = animate_options(renderer = gifski_renderer()))\n```\n:::\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}