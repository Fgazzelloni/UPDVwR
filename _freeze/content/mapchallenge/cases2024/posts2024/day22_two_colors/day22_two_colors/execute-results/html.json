{
  "hash": "8ad89fb7f9fd2039dd8686559bbd8335",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Two Colors Map'\nsubtitle: 'Welcome to #30DayMapChallenge 2024 Day 22'\ndate: '2024-11-22'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day22_two_colors/day22_two_colors.png'\nimage-alt: 'day22_two_colors'\ndescription: 'Two Colors Map'\noutput: html_document\nexecute: \n   eval: false\n---\n\n![Two Colors Map](https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day22_two_colors/day22_two_colors.png)\n\nLoad Libraries\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(osmdata)\nlibrary(showtext)\n```\n:::\n\n\nSet the View Point: Rome - City Centre\n\n41.9027°N/12.4964\n\n::: {.cell}\n\n```{.r .cell-code}\nlong = 12.4964\nlat = 41.9027\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwindow <- st_point(c(long, lat)) %>%\n  st_sfc(crs = 4326) %>%\n  st_sf() %>%\n  st_buffer(dist = 5000) %>%\n  st_bbox()\n\nwindow\n```\n:::\n\n\nDownload the Buildings / Features Data for the Area of Interest:\n\n::: {.cell}\n\n```{.r .cell-code}\nfeatures <- opq(window) %>%\n  add_osm_feature(key = \"building\") %>%\n  osmdata_sf()\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npolygons <- features$osm_polygons\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npolygons%>%\n  count(building, sort = TRUE)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npolygons_mod <- polygons %>%\n  mutate(building = ifelse(!is.na(building), 'Buildings', \"Other\")) \n```\n:::\n\n\n\nSet the fonts:\n\n::: {.cell}\n\n```{.r .cell-code}\nfont_add_google(name = 'Caveat', family = 'Caveat')\nshowtext_auto()\n```\n:::\n\n\nMake the map:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = polygons_mod,\n          aes(fill = building), \n          color = NA) +\nscale_fill_manual(values = c('darkred','gold')) +\n  labs(title = 'Rome, Italy',\n       subtitle = '41.9027°N/12.4964',\n       caption = 'Data: OpenStreetMap - 5km Radius\\n#30DayMapChallenge Day22 | @fgazzelloni',\n       fill = '') +\n  theme_void() +\n  theme(text = element_text(family = 'Caveat'),\n        legend.position = 'top',\n        legend.key.width = unit(0.2, \"cm\"),\n        legend.text = element_text(color = 'white', \n                                   size = 40),\n        plot.title = element_text(color = 'darkred', \n                                  size = 160,\n                                  hjust = 0.5),\n        plot.subtitle = element_text(color = 'gold', \n                                     size = 60,\n                                     hjust = 0.5),\n        plot.caption = element_text(color = 'white', \n                                    size = 40,\n                                    hjust = 0.5,\n                                    lineheight = 0.4),\n        plot.background = element_rect(fill = 'black', \n                                       color = NA)) \n```\n:::\n\n\n\nSave the map as png:\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave('day22_two_colors.png', \n       height = 10, width = 8, \n       dpi = 300)\n```\n:::\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}