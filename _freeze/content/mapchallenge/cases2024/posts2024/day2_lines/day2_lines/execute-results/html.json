{
  "hash": "955ce652275734dc7e6d9b00ca935a3d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Rivers Lines on World Map'\nsubtitle: 'Welcome to #30DayMapChallenge 2024 Day 2'\ndate: '2024-11-02'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day2_lines/day2_lines.png'\nimage-alt: 'day2_lines'\ndescription: 'Rivers Lines on World Map'\noutput: html_document\nexecute: \n   eval: false\n---\n\n![Rivers Lines on World Map](https://raw.githubusercontent.com/Fgazzelloni/30DayMapChallenge/master/2024/day2_lines/day2_lines.png)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)\nmultilines_sf <- st_read(\"data/ne_10m_rivers_lake_centerlines\")\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n# Cast MULTILINESTRING to LINESTRING\nlinestrings_sf <- multilines_sf %>%\n  st_cast(\"LINESTRING\", \n          do_split = TRUE) %>%  \n  # Ensure splitting into LINESTRINGs, not POINTs\n  filter(st_geometry_type(geometry) == \"LINESTRING\")\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sfnetworks)\n# Convert to sfnetwork\nnetwork <- sfnetworks::as_sfnetwork(linestrings_sf, directed = FALSE)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Extract edges as an sf object\nedges_sf <- network %>%\n  activate(\"edges\") %>%\n  st_as_sf()\nedges_sf %>% names\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nedges_sf%>%count(featurecla)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Extract nodes as an sf object\nnodes_sf <- network %>%\n  activate(\"nodes\") %>%\n  st_as_sf()\n\nnodes_sf %>%names\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngr <- sfnetworks::as_sfnetwork(network)\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggraph)\nggraph(gr, 'sf') + \n  geom_edge_sf(aes(color = name_en),\n               show.legend = F) + \n  geom_node_sf(size = 0.3)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggraph(gr, 'sf') + \n  geom_edge_sf(aes(color = scalerank),\n               show.legend = T) + \n  geom_node_sf(size = 0.3)\n```\n:::\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggraph(gr, 'sf') + \n  geom_edge_sf(aes(color = dissolve),\n               show.legend = F) + \n  geom_node_sf(size = 0.1)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmap <- ggraph(gr, 'sf') + \n  geom_edge_sf(aes(color = featurecla),\n               show.legend = T) +\n  scale_edge_color_manual(values = c(\"red\",\"navy\",\"#50c8c6\",\"brown\")) + \n  ggthemes::theme_map() \n  \nmap  \n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmap + \n  # add a north arrow\n  ggspatial::annotation_north_arrow(location = \"br\") +\n  # add a title and a caption\n  labs(title = \"Rivers Lines on World Map\",\n       caption = \"Source: Natural Earth | #30DayMapChallenge 2024 Day2 | @fgazzelloni\") +\n  # adjust the appearance of the plot\n  theme(text = element_text(family = \"Courier\"),\n        plot.title = element_text(size = 16, \n                                  color = \"grey20\", face = \"bold\"),\n        plot.caption = element_text(size = 8, \n                                    color = \"grey20\", face = \"bold\"),\n        plot.background = element_rect(fill = NA, color = NA),\n        panel.background = element_rect(fill = NA, color = NA))\n```\n:::\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}