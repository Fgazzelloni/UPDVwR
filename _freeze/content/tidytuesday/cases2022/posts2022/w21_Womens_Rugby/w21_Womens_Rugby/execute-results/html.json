{
  "hash": "9a516aa05b53fd0be1034c3ccc126ff8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Womens Rugby'\nsubtitle: 'Welcome to #TidyTuesday 2022 day 21'\ndate: '2022-05-24'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/TidyTuesday/main/data/2022/w21_rugby/w21_women_rugby.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsevens <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-24/sevens.csv')\nfifteens <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-24/fifteens.csv')\n```\n:::\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_df <- sevens%>%\n  mutate(year_month=zoo::as.yearmon(date),.after=date) %>%\n  filter(score_1==\"L\" | score_1==\"W\") %>%\n  #select(-winner,-loser) %>%\n  pivot_longer(cols = c(\"team_1\",\"team_2\"),names_to=\"teams\",values_to=\"t_country\")%>%\n  relocate(teams,t_country,winner,loser) %>%\n  distinct()%>%\n  mutate(final=ifelse(t_country==winner,\"Winner\",\"Loser\"))%>%\n  relocate(final) \n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_df%>% # count(t_country)\n  count(t_country,teams,final)%>%\n  group_by(t_country)%>%\n  summarize(final,teams,pct=round(n/sum(n)*100))%>%\n  filter(!pct==100)\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_df%>% # count(t_country)\n  count(t_country,teams,final)%>%\n  group_by(t_country)%>%\n  summarize(final,teams,pct=round(n/sum(n)*100))%>%\n  filter(!pct==100)%>%\n  ungroup()%>%\npivot_wider(names_from=teams,values_from=pct)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(extrafont)\nloadfonts()\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggbump)\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_df %>%\n  select(row_id,date,year_month,teams,t_country,final) %>%\n  mutate(t_country=case_when(t_country==\"Arabian Gulf\"~\"* Arabian Gulf\",\n                             t_country==\"Burkina Faso\"~\"* Burkina Faso\",\n                             t_country==\"Cote d'Ivorie\"~\"* Cote d'Ivorie\",\n                             t_country==\"Ghana\"~\"* Ghana\",\n                             t_country==\"Hong Kong\"~\"* Hong Kong\",\n                             t_country==\"Kazakhstan\"~\"* Kazakhstan\",\n                             TRUE~t_country))%>%\n  ggplot(aes(x=1,y=t_country,color=teams)) +\n  ggbump::geom_sigmoid(aes(x=1,y=t_country,\n                           xend=year_month+1, yend=final),\n                       key_glyph = draw_key_rect)+\n  geom_text(aes(label=t_country,x=0),\n            hjust=1,family=\"Comic Sans MS\")+\n  geom_text(aes(label=final,x=2000,y=final),family=\"Comic Sans MS\",\n            size=6,hjust=0) +#c(\"Winner\",\"Loser\")\n  xlim(-300,2200)+\n  labs(title=\"Women's Rugby - Countries without scores\",\n       subtitle = \"from December 2000 to May 2010\",\n       caption=\"\\n* 6 countries out of 21 shared a winner/loser position while being either in team 1 or team 2\\nBurkina Faso is the only one who won being in Team 2 with 67% pct, most wins are from Team 1\\nCote d'Ivorie won and lost 50%/50% pct in both teams\\n\\nDataSource: #TidyTuesday 2022 week21 - Women's Rugby - ScrumQueens\\nDataViz: Federica Gazzelloni (@fgazzelloni)\",\n       color=\"\")+\n  viridis::scale_color_viridis(discrete=T,option=\"inferno\",\n                                alpha = 1,begin = 0.5,end = 0.8,\n                               labels = c(\"Team 1\", \"Team 2\"), breaks = c(\"team_1\", \"team_2\"))+\n  theme_void()+\n  theme(text = element_text(family=\"Comic Sans MS\",size=23,color=\"darkorange\"),\n    legend.position = c(0.8,0.2),\n    plot.title = element_text(hjust = 0.1),\n    plot.subtitle = element_text(hjust = 0.1,size=20),\n    plot.caption = element_text(size=10,hjust=0,color=\"darkorange\"),\n    plot.background = element_rect(fill=\"beige\",color=\"beige\"),\n    panel.background = element_rect(fill=\"beige\",color=\"beige\"),\n    plot.margin = margin(5,5,5,5,unit = \"pt\"))\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"w21_women_rugby.png\",\n       width = 8.5,\n       height = 7,\n       dpi=320)\n```\n:::\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfifteens%>%head\n```\n:::\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}