{
  "hash": "1fbf8051a3fb2ef0e8662edaf5f314f4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"StarTrek\"\nsubtitle: \"Welcome to TidyTuesday 2021 week 34\"\ndate: \"2021-08-17\"\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/TidyTuesday/ab924a20bbe270bab306f4b13df0daaa6e53ffeb/data/2021/w34_star_trek/w34_star_trek.png'\ndescription: \"Networks\"\noutput: html_document\nexecute: \n  eval: false\n---\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\ntuesdata <- tidytuesdayR::tt_load(2021, week = 34)\ntidytuesdayR::readme(tuesdata)\n```\n:::\n\n\n## Designing Speech Interactions from the Imagined Ideal of Star Trek\nvoice user interfaces (VUIs) like Alexa reveals mismatches between current designs and user expectations\nThe analysis study voice interactions with the Enterprise’s computer and compare them to current interactions\n\n::: {.cell}\n\n```{.r .cell-code}\ncomputer <- tuesdata$computer\nhead(computer,3)\nDataExplorer::profile_missing(computer)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- computer %>%\n  select(char,line,type,pri_type,nv_resp:error) %>% #count(char)\n  mutate(char=if_else(str_detect(char,\"Computer\"),\"Computer\",char),\n         type=if_else(str_detect(type,\"command\"),\"Command\",type),\n         type=if_else(str_detect(type,\"question\"),\"Question\",type))\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n  group_by(char) %>%\n  summarize(type,nv_resp) %>%\n  ungroup() %>%\n  ggplot(aes(y=char,x=type,z=nv_resp)) +\n  stat_summary_hex(alpha=0.8,bins=50)+\n  scale_fill_viridis_c()+\n  labs(fill = \"char\",title = \"type\")+\n  theme(axis.text.x = element_text(angle=90,size=6))\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(extrafont)\nloadfonts()\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfinal <- df %>% #count(type,nv_resp,sort=TRUE)%>%\n  ggplot(aes(x=fct_reorder(sort(type,decreasing = TRUE),nv_resp),group=nv_resp)) +\n  geom_histogram(aes(fill=nv_resp),stat=\"count\",position =\"stack\")+ #position_dodge(width=0))+\n  coord_flip()+\n  scale_fill_viridis_d()+\n  labs(title=\"Type of words when the computer completes the query but without speaking a response\", \n       subtitle=\"False or True?\",\n       caption=\"Infographic: @fgazzelloni\\n DataSource: TidyTuesday Week34:Star Trek Voice Commands,SpeechInteraction.org\",\n       fill=\"Response\",\n       y=\"N°\",x=\"Word type\") +\n  ggthemes::theme_solarized()+\n  theme(text = element_text(family=\"Impact\"),\n        axis.text.x = element_text(angle=0,size=10),\n        axis.text.y = element_text(angle=0,size=10),\n        axis.title.x = element_text(size=14),\n        axis.title.y = element_text(size=14),\n        plot.title.position = \"plot\",\n        plot.title = element_text(face=\"bold\",size=20),\n        plot.subtitle = element_text(face=\"bold\",size=14),\n        plot.caption = element_text(size=10),\n        plot.caption.position = \"plot\")\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nragg::agg_png(\"w34_star_trek.png\",\n              res = 320, width = 14, height = 8, units = \"in\")\nfinal\n\ndev.off()\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(scales)\nlibrary(ggbump)\nlibrary(extrafont)\nlibrary(showtext)\nlibrary(cowplot)\nlibrary(ggstream)\nlibrary(colorspace) \nlibrary(ggpubr)\nlibrary(ggbump)\nlibrary(ggimage)\nlibrary(magick)\n```\n:::\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read the image, attach the Tidytuesday logo and save it --------------------------\nlibrary(ggimage)\nlibrary(magick)\n\n\ntidy_logo<-image_read(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/static/plot_logo.png\") %>%\n  image_resize(\"300x300\")\n\nimg <-image_read(\"1200px-Star_Trek_TNG_logo.svg.png\")\n\n\ntidy_final <- image_read(\"w34_star_trek.png\")\nattached_logo <- image_composite(tidy_final, tidy_logo,\n                                 operator=\"atop\",\n                                 gravity=\"southwest\") \nimage_write(attached_logo, path = \"w34_star_trek.png\", format = \"png\") \ntidy_final2 <- image_read(\"w34_star_trek.png\")\n\nattached_logo2 <- image_composite(tidy_final2, img,\n                                 operator=\"atop\",\n                                 gravity=\"northeast\") \nimage_write(attached_logo, path = \"w34_star_trek.png\", format = \"png\") \n```\n:::\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"ggmosaic\")\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfinal2 <- df %>% \n  select(type,char_type) %>%\n  ggplot() +\n  geom_mosaic(aes(x = product(type, char_type), fill = type)) +\n  labs(title=\"Type of request by count Person or Computer?\",\n       x=\"\",fill=\"Type of interaction\",\n       caption=\"Infographic: @fgazzelloni\\n DataSource: TidyTuesday Week34:Star Trek Voice Commands,SpeechInteraction.org\")+\n  theme(text=element_text(family=\"Roboto Condensed\"),\n  axis.text.y = element_blank(),\n  axis.ticks.y = element_blank(),\n  axis.title.y = element_blank(),\n  axis.text.x = element_text(color=\"white\",size=10),\n  axis.ticks.x = element_line(color=\"white\",size=1),\n  panel.background = element_blank(),\n  panel.border = element_blank(),\n  panel.grid.major = element_blank(),\n  panel.grid.minor = element_blank(),\n  plot.background = element_rect(color=\"darkgrey\",fill=\"black\"),\n  plot.title = element_text(color=\"white\",size=30),\n  legend.position = \"left\",\n  legend.text = element_text(color=\"white\"),\n  legend.background = element_rect(color=\"darkgrey\",fill=\"black\"),\n  plot.caption = element_text(color=\"white\")\n)\n```\n:::\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nragg::agg_png(\"w34_star_trek2.png\",\n              res = 320, width = 14, height = 8, units = \"in\")\nfinal2\n\ndev.off()\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read the image, attach the Tidytuesday logo and save it --------------------------\nlibrary(ggimage)\nlibrary(magick)\n\n\ntidy_logo<-image_read(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/static/plot_logo.png\") %>%\n  image_resize(\"300x300\")\n\ntidy_final <- image_read(\"w34_star_trek2.png\")\nattached_logo <- image_composite(tidy_final, tidy_logo,\n                                 operator=\"atop\",\n                                 gravity=\"southwest\") \nimage_write(attached_logo, path = \"w34_star_trek2.png\", format = \"png\") \n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nimg <-image_read(\"white_startrek.png\")\n\ntidy_final2 <- image_read(\"w34_star_trek2.png\")\n\nattached_logo2 <- image_composite(tidy_final2, img,\n                                 operator=\"atop\",\n                                 gravity=\"northeast\") \nimage_write(attached_logo2, path = \"w34_star_trek2.png\", format = \"png\") \n```\n:::\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidymodels)\ntidymodels_prefer()\n```\n:::\n\n\n\n[dummy](https://www.marsja.se/create-dummy-variables-in-r/)\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% select(char,type,nv_resp) %>%\n  #mutate(nv_resp=factor(nv_resp)) %>%\n  recipe(char~.) %>%\n  step_dummy(all_nominal_predictors(),one_hot = TRUE)%>%\n  prep() %>%\n  bake(df) %>%\n  group_by(char,nv_resp) %>%\n  summarise_all(.funs = sum) %>%\n  ungroup() %>%\n  pivot_longer(cols=type_Alert:type_Wake.Word,names_to=\"type\",values_to=\"values\") %>%\n  mutate(type=gsub(\"^type_\",\"\",type)) %>%\n  group_by(char,nv_resp,type) %>%\n  summarize(tot=sum(values)) %>%\n  ungroup() %>%\n  \n  ggplot() +\n  geom_mosaic(aes(x = product(type, char), fill = nv_resp)) +\n  #geom_text(aes(x=nv_resp,y=type,label=type))+\n  theme(\n  axis.text.y = element_blank(),\n  axis.ticks.y = element_blank(),\n  axis.title.y = element_blank(),\n  panel.background = element_blank(),\n  panel.border = element_blank(),\n  panel.grid.major = element_blank(),\n  panel.grid.minor = element_blank(),\n  plot.background = element_blank(),\n  legend.position = \"left\"\n)\n```\n:::\n\n\n\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}