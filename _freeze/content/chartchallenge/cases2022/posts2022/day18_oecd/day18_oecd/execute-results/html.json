{
  "hash": "b0291b44d185a379affbfcc2c67a3e65",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'OECD'\nsubtitle: 'Welcome to #30DayChartChallenge 2022 day 18'\ndate: '2022-04-18'\nimage: 'day18_oecd.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n### Source:\n  \n- https://www.oecd-ilibrary.org/environment/data/oecd-environment-statistics/air-transport-co2-emissions_13d4f295-en\n- https://stats.oecd.org/viewhtml.aspx?datasetcode=AIRTRANS_CO2&lang=en\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrm(list=ls())\n\nsetwd(dirname(rstudioapi::getActiveDocumentContext()$path))\n\n\nlibrary(tidyverse)\nairtransport <- read_csv(\"AIRTRANS_CO2_19042022233714776.csv\")\n\noptions(scipen = 999)\ndf <- airtransport%>%\n  janitor::clean_names()%>% #count(flight_type)\n  select(pollutant,country,time,value,frequency=frequency_2,flight_type)%>%\n  mutate(value=round(value))\n\n\ndf_yr <- df %>%\n  filter(time==as.integer(substr(time, 1, 4)))%>%\n  distinct()\n\n\n# count(country)\nmy_countries <- df_yr %>%\n  group_by(country)%>%\n  summarize(tot_value_per_country=round(mean(value)))%>%\n  arrange(-tot_value_per_country)%>%\n  ungroup()%>%\n  slice(1:10)%>%\n  select(country)%>%\n  unlist()\n\ndf2 <- df_yr %>%\n  filter(country%in%my_countries)\n\nlibrary(extrafont)\n# loadfonts()\nlibrary(hrbrthemes)\nlibrary(tvthemes)\nlibrary(ggthemes)\nlibrary(geomtextpath)\n\n\n\n\ndf3 <- df2 %>%\n  group_by(time,country)%>%\n  mutate(avg_value=mean(value)) %>%\n  ungroup()\n\n\n\ndf3 %>%\n  filter(!country%in%c(\"Canada\",\"Japan\")) %>% \n  ggplot(aes(x=factor(time),y=avg_value,label=country,group=country))+\n  geom_hline(aes(yintercept=12268195),linetype=\"dashed\",size=2,color=\"grey90\")+\n  geom_textline(aes(color=country),\n                size=4,\n                fontface=\"bold\",\n                linewidth = 2,\n                show.legend = F)+\n  scale_y_log10(labels=scales::label_number(scale = 1e-6))+\n  labs(title=\"CO2 emissions related to \\ncommercial passenger, freight, and general aviation flights\",\n       caption=\"#30DayChartChallenge 2022 #Day18 - OECD\nDataSource: OECD - International Civil Aviation Organisation (ICAO)\n       Top CO2 level Countries - tonnes of CO2-equivalent | DataViz: Federica Gazzelloni\")+\n  annotate(\"segment\", x = 0.8, xend = 0.8, y = 55000000, yend = 85000000, \n           colour = \"darkred\", size=6, alpha=0.6)+\n  coord_cartesian(ylim = c(2690700, 46048382), \n                  xlim = c(1.5,8.5),clip = \"off\")+\n  tvthemes::scale_color_attackOnTitan()+\n  ggthemes::theme_fivethirtyeight()+\n  theme(legend.position = \"none\",\n        axis.text = element_text(face=\"bold\",size=10),\n        plot.caption = element_text(vjust=0.5),\n        plot.background = element_rect(fill=\"grey85\",color=\"grey85\"),\n        panel.background = element_rect(fill=\"grey85\",color=\"grey85\"))\n\n\nggsave(\"day18_oecd.png\",\n       dpi=320,\n       width = 9,\n       height = 6)\n```\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}