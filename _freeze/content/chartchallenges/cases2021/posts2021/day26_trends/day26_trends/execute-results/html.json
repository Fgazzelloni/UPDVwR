{
  "hash": "823021aac1a1d976090dc7f42bb1d323",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Trends'\nsubtitle: 'Welcome to #30DayChartChallenge 2021 day 26'\ndate: '2021-04-26'\nimage: 'day26_trends.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggforce)\nlibrary(extrafont)\n\n\n\noptions(scipen = 999)\n\n# drug use-------------\n\ndruguse <- read.csv(\"multiplier_survey_data.csv\")\nhead(druguse)\n\nplyr::count(druguse$year_start)\n\nlibrary(lubridate)\n\n\n\ndf<-druguse%>%\n  arrange(year_start)%>%\n  mutate(sprop=sample_size/sum(druguse$sample_size),\n         new_val=val*sprop)%>%\n  \n  group_by(year_start)%>%\n  summarize(avg_val=median(new_val))%>%\n  ungroup()\n\nhead(df)\n\ndim(df)\n\nlibrary(zoo)\n\np <- ggplot(data = subset(df,year_start>=\"1992\"),aes(x=year_start,y=avg_val*10^6)) +\n  geom_point(aes(size=avg_val,color=\"red\"),alpha=0.5)+\n  geom_line(aes(y = rollmean(avg_val*10^6, 3, align = \"right\", fill = NA)),\n            color=\"red\")+\n  geom_jitter(alpha=0.3,aes(size=avg_val,fill=year_start))+\n  geom_smooth(method=\"loess\",size=0.8,color=\"grey4\")+\n  scale_x_continuous(breaks =c(1992,1994,1998,2000,2004,2006,2008,2010,2016)) +\n  facet_zoom(x = year_start >= \"2004\" & year_start <= \"2008\") + \n  labs(title=\"Drug use trend in 97 countries between 1992-2017\",\n       subtitle = \"proportion of surveys by year\",\n       caption=\"Viz. Federica Gazzelloni | DataSource: IHME | Trend Day26\",\n       x=\"Time(Year)\",\n       y=\"Precent\")+\n  theme_minimal()+\n  theme(legend.position = \"none\",\n        plot.margin = margin(5,5,5,5),\n        plot.background = element_rect(size=25,color=\"black\",fill=\"black\"),\n        panel.background = element_rect(size=3,color=\"white\",fill=\"white\"),\n        panel.grid.major = element_line(size=0.1,color=\"grey3\"),\n        panel.grid.minor = element_line(size=0.1,color=\"grey3\"),\n        panel.grid.minor.y = element_blank(),\n        panel.grid.major.y = element_blank(),\n        axis.text = element_text(vjust=1,family=\"Courier New\",size=10,face=\"bold\",color=\"white\"),\n        axis.ticks = element_line(color=\"red\",size=2),\n        axis.title = element_text(face=\"bold\",size=12,family=\"Courier New\",\n                                  hjust=0.5,vjust=0.2,color=\"white\"),\n        plot.title = element_text(family=\"Courier New\",size=25,color=\"white\"),\n        plot.subtitle = element_text(family=\"Courier New\",size=14,color=\"white\"),\n        plot.caption = element_text(face=\"bold\",family=\"Courier New\",size=8,color=\"white\")\n        ) \n         \n\n\n####### SAVING ######################################\nragg::agg_png(here::here(\"day26_trends\", \"trends_day26.png\"),\n              res = 320, width = 14, height = 8, units = \"in\")\np\n\ndev.off()\n```\n:::\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}