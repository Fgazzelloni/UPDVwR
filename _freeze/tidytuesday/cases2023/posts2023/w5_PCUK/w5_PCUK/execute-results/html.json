{
  "hash": "4074bb8f2c6d4751f0744207bd779e7b",
  "result": {
    "markdown": "---\ntitle: 'Pet Cats UK'\nsubtitle: 'Welcome to TidyTuesday 2023 week 5'\ndate: '2023-01-31'\nimage: 'w5_PCUK.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\ntuesdata <- tidytuesdayR::tt_load(2023, week = 05)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncats_uk <- tuesdata$cats_uk\ncats_uk_reference <- tuesdata$cats_uk_reference\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- cats_uk%>%\n  inner_join(cats_uk_reference,by=\"tag_id\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf%>%\n  slice()%>%\n  glimpse()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(survival)\nlibrary(\"survminer\")\n\nsurv_df <- df%>%\n  select(timestamp,hunt,animal_sex)%>%#DataExplorer::profile_missing()\n  filter(!is.na(hunt))%>%#count(hunt)\n  mutate(animal_sex=ifelse(animal_sex==\"m\",1,2),\n         hunt=ifelse(hunt==\"FALSE\",0,1),\n         timestamp=as.POSIXct(timestamp, format = \"%Y-%m-%d %H:%M:%S\"),\n         day=as.Date(timestamp,\"%Y-%m-%d %H:%M:%S\",tz=\"GMT\"))\n\nrange(surv_df$day)\nstart_date <- as.Date(\"2017-06-03\")\nend_date <- as.Date(\"2017-11-30\")\ndate_seq <- seq(start_date, end_date, by = \"day\")\n\ncat_hz <- surv_df %>%\n  group_by(day)%>%\n  mutate(time=as.numeric(day - start_date) + 1)%>%\n  arrange(time)\n\n\nfit <- survfit(Surv(time, hunt) ~ animal_sex, data = cat_hz)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsurv <- ggsurvplot(fit,\n                data = cat_hz,\n                censor.shape = \"|\",\n                censor.size = 4,\n                risk.table = TRUE,\n                submain = \"Hazards Distribution and Sex Differences in Hunting Risk\",\n                caption = \"Based on Kaplan-Meier estimates\\nDataSource: #TidyTuesday 2023 Week5 Pet Cats UK\\nDataViz: Federica Gazzelloni #30DayChartChallenge 2023 Day7 - hazards\\n\") \n\nggsurv$plot %+%\n  ggthemes::scale_colour_fivethirtyeight(labels=c(\"Male\",\"Female\")) %+%\n  labs(title=\"Survival of UK Cats\") %+%\n  theme_survminer(base_family = \"Roboto Condensed\",\n                  font.main = c(18, \"bold\"),\n                  font.submain = c(14, \"bold.italic\"),\n                  font.caption = c(11, \"plain\"),\n                  font.x = c(12, \"bold.italic\"),\n                  font.y = c(12, \"bold.italic\"),\n                  font.tickslab = c(12, \"plain\")) %+%\n  theme(plot.background = element_rect(fill=\"grey90\",color=\"grey90\"),\n        panel.background = element_rect(fill=\"grey90\",color=\"grey90\"),\n        legend.background = element_blank())\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nshowtext.auto(enable = FALSE)\nggsave(\"w5_PCUK.png\",\n       width = 7,height = 5)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}