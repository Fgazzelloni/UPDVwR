{
  "hash": "429a35baad588f2df6701fce2f86fbc0",
  "result": {
    "markdown": "---\ntitle: \"Mario Kart World\"\nsubtitle: \"Welcome to TidyTuesday 2021 week 22\"\ndate: \"2021-05-25\"\nimage: \"w22_mario_kart_world.png\"\nimage-alt: \"\"\ndescription: \"Networks\"\noutput: html_document\nexecute: \n  eval: false\n---\n\n\n\n# Mario Bross \n\n::: {.cell}\n\n```{.r .cell-code}\n# https://mkwrs.com/\n# https://www.thegamer.com/mario-kart-64-speedrunner-is-the-first-to-hit-a-190000-trick-breaks-two-world-records-at-once/\n\n\nlibrary(ggcorrplot)\n\n\nlibrary(tidytuesdayR)\nlibrary(rtweet)\nlibrary(DataExplorer)\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(viridis)\nlibrary(ggthemes)\nlibrary(extrafont)\nlibrary(hrbrthemes)\nlibrary(ggExtra)\nlibrary(ggtext)\nlibrary(ggrepel)\nlibrary(extrafont)\nlibrary(patchwork)\n# fonts()\n\n\ntuesdata <- tidytuesdayR::tt_load(2021, week = 22)\n\ndrivers <- tuesdata$drivers\nrecords <- tuesdata$records\n\ndriv_players<-plyr::count(drivers$player)\nplayers<-driv_players$x\n\nmy_df <- records%>%\n  arrange(player)%>%\n  filter(player%in%players)%>%\n  mutate(year=year(date))%>%\n  inner_join(drivers,by=c(\"player\",\"year\"))%>%\n  drop_na()\n\nsecond_plot\n\nlibrary(RColorBrewer)\ndisplay.brewer.all()\n\n\n\nplot<-ggplot(my_df,aes(x=date,y=records))+\n  geom_point(aes(group=track,color=system_played,size=record_duration),alpha=0.5)+\n  geom_smooth(color=\"purple\")+\n  scale_color_wsj()+\n  labs(title=\"How did the world records develop over time?\",\n       size=\"Record duration(days)\",\n       color=\"System played\")+\n  xlab(\"World record date(Year)\")+\n  ylab(\"Number of world records\")+\n  theme_wsj()+\n  theme(panel.background = element_blank(),\n        plot.background = element_blank(),\n        legend.title = element_text(size=12),\n        legend.background = element_blank(),\n        legend.key = element_rect(fill=NA),\n        legend.text = element_text(size=12,face=\"bold\"),\n        legend.box.margin = margin(6, 6, 6, 6),\n        plot.title.position = \"plot\",\n        plot.title = element_text(hjust=0,vjust=-1,size=28,color=\"darkblue\"),\n        axis.title = element_text(size=18,color=\"darkred\",face=\"bold\"),\n        panel.grid = element_line(color=\"white\"),\n        panel.grid.major.y = element_blank())\n\n\nplot<-ggMarginal(plot,\n           type=\"histogram\",color=\"blue\",xparams = list(bins=40),\n           fill = \"darkred\", yparams = list(bins=30))\n\n\n\nlabels <-\n  tibble(\n    labels = c(\n      \"<img src='super_mario_run_character_artwork.png'\n      +     width='120' /><br><b style='color:#d6182e'> </b><br><i style='color:#d6182e'> </i></b>\"),\n    x = 1:5,\n    y = rep(1, 5)\n    )\n\nlegend <-\n  ggplot(labels, aes(x, y)) +\n  geom_richtext(aes(label = labels),\n                fill = NA,\n                color = NA,\n                vjust = 0.5) +\n  annotate(\"text\", x = 3.5, y = 1.018,\n           label = \"Mario Kart World Records\",\n           size = 20,color=\"red\",\n           fontface = \"bold\",\n           family = \"Courier New\") +\n  scale_x_continuous(limits = c(0.6, 6.1)) +\n  scale_y_continuous(limits =  c(1, 1.02)) +\n  theme_void() +\n  theme(plot.background = element_rect(fill = \"#ebe046\"),\n        plot.margin = unit(c(1,1,0,1), \"cm\"))\n\ncaption <-\n  ggplot(data.frame(x = 1:2, y = 1:10)) +\n  labs(x = NULL, y = NULL,\n       caption = \"Viz @fgazzelloni| Source: Mario Kart World Records | TidyTuesday Week 22\")+\n  theme(line = element_blank(),\n        plot.caption = element_text(size=8, family=\"Courier New\",color=\"#460046\",face=\"bold\"),\n        panel.background = element_rect(fill = \"transparent\"),\n        plot.background = element_rect(fill = \"transparent\",color = \"transparent\"),\n        panel.border = element_rect(color = \"transparent\"),\n        axis.text = element_blank())\n\n\n \n\n###################### SAVING ############################\n\n\n\nfinal <- legend + plot  + caption + \n  plot_layout(ncol = 1,heights = c(0.3, 1, 0))\n\nragg::agg_png(here::here(\"w22\",\"w22_supermario.png\"),\n              res = 320, width = 14, height = 8, units = \"in\")\nfinal\n\ndev.off()\n\n\n\n#### ATTACHING LOGO ############################\nlibrary(ggimage)\nlibrary(magick)\n\n\ntidy_logo<-image_read(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/static/plot_logo.png\") %>%\n  image_resize(\"300x300\")\n\n\nfinal_plot <- image_read(\"super_mario_w22.png\")\n\nattached_logo <- image_composite(final_plot, tidy_logo,\n                                 operator=\"atop\",\n                                 gravity=\"northeast\") # tell R where to put the logo\n\n\nimage_write(attached_logo, path = \"super_mario_w22.png\",\n            format = \"png\") # save final plot\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}