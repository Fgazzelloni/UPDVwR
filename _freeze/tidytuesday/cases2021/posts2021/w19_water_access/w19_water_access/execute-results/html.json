{
  "hash": "7359758189c3291cb77a384aaa0792d6",
  "result": {
    "markdown": "---\ntitle: \"Water Access\"\nsubtitle: \"Welcome to TidyTuesday 2021 week 19\"\ndate: \"2021-05-04\"\nimage: \"w19_water_access.png\"\nimage-alt: \"\"\ndescription: \"Networks\"\noutput: html_document\nexecute: \n  eval: false\n---\n\n\nWeek 19 Water------------\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidytuesdayR)\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(raster)\nlibrary(spData) # spatial data\nlibrary(spDataLarge)\nlibrary(tmap)    # for static and interactive maps\nlibrary(leaflet) # for interactive maps\n\n\n# loading data --------------------------\ntuesdata <- tidytuesdayR::tt_load(2021, week = 19)\n\n# manipulation ---------------\nwater <- tuesdata$water\nwater$water_source[is.na(water$water_source)] <- \"unknown\"\nwater_df<-water%>%\n  arrange(row_id)%>%\n  clean_names()%>%\n  mutate(report_date=format(as.Date(report_date,\"%m/%d/%Y\")),\n         report_date=as.Date(report_date),\n         water_source=as.factor(water_source),\n         status_id=as.factor(status_id))%>%\n  select(1:6,9)\n\n# loading africa -------------------\nworld_africa = world[world$continent == \"Africa\", ]\nafrica = st_union(world_africa)\n\n# plotting --------------------\nlibrary(extrafont)\nlibrary(patchwork)\n\nwater_plot<-ggplot() +  \n  geom_sf(data = africa) +\n  geom_point(data = water_df,\n             aes(x=lon_deg,y=lat_deg,color=country_name),\n             alpha=0.5) +\n  labs(title=\"Africa source of water by country\",\n       subtitle=\"\",\n       caption=\"Viz. Federica Gazzelloni DataSource: Water Access Points, WPDX TidyTuesday week 19\")+\n  theme_ps()+\n  theme(legend.position = \"none\",\n        plot.margin = margin(5,5,5,5),\n        plot.title = element_text(size=24,family=\"xkcd\",vjust=-2),\n        plot.caption = element_text(size=8,family=\"xkcd\",hjust = 0.5,vjust=-2))\n\n\n# background ---------\nlibrary(ggimage)\n\n\nimage<-\"frame.png\"\n\nfinal_plot<-ggbackground(water_plot, image, alpha=.7,color=\"#94BCFF\")\n\n\n\n####### SAVING ######################################\nragg::agg_png(here::here(\"tidytuesday_Water.png\"),\n              res = 320, width = 14, height = 8, units = \"in\")\nfinal_plot\n\ndev.off()\n\n\n\n#### ATTACHING LOGO ############################ \nlibrary(ggimage)\nlibrary(magick)\n\n\ntidy_logo<-image_read(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/static/plot_logo.png\") %>%\n  image_resize(\"300x300\")\n\n\nfinal_plot <- image_read(\"W19/tidytuesday_Water.png\")\n\nattached_logo <- image_composite(final_plot, tidy_logo,\n                                 operator=\"atop\",\n                                 gravity=\"northeast\") # tell R where to put the logo\n\n\nimage_write(attached_logo, path = \"tidytuesday_Water.png\", format = \"png\") # save final plot\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}