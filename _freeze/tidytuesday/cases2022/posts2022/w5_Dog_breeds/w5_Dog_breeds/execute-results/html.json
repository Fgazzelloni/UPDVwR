{
  "hash": "9d1f312f84c64ff1ede0fae3ba058d8e",
  "result": {
    "markdown": "---\ntitle: 'Dog breeds'\nsubtitle: 'Welcome to #TidyTuesday 2022 day 5'\ndate: '2022-02-01'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/TidyTuesday/main/data/2022/w5_dogs/dog_prints_plot.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\n## TidyTuesday 2022 week 5 - Dog breeds\n\n\n::: {.cell paged.print='false'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\nDog breeds datasets, load the data\n\n::: {.cell paged.print='false'}\n\n```{.r .cell-code}\nbreed_traits <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-02-01/breed_traits.csv')\ntrait_description <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-02-01/trait_description.csv')\nbreed_rank_all <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-02-01/breed_rank.csv')\n```\n:::\n\n\nMake a rank dataset to see which breed is favourite in 2020\n\n::: {.cell}\n\n```{.r .cell-code}\nrank<-breed_rank_all%>%\n  count(Breed,`2020 Rank`,Image)%>%\n  arrange(`2020 Rank`)%>%\n  slice(1:10)%>%\n  relocate(`2020 Rank`)%>%\n  select(-n)\n\nrank\n```\n:::\n\n\n\nSelect favourite breeds, and set the images \n\n::: {.cell}\n\n```{.r .cell-code}\ndogs<-c(\"Bulldogs\",\"Poodles\",\"Beagles\",\"Rottweilers\",\"Dachshunds\")\n\nimages <-rank%>%filter(Breed%in%dogs)%>%select(Breed,Image)\n\nmy_df <-breed_traits%>%\n  select(-\"Coat Type\",-\"Coat Length\")%>%\n  filter(Breed%in%dogs)%>%\n  mutate(id=row_number())%>%\n  relocate(id)%>%\n  pivot_longer(cols=3:16,names_to=\"factor\",values_to=\"value\")%>%\n  inner_join(images,by=\"Breed\")\n```\n:::\n\n::: {.cell paged.print='false'}\n\n```{.r .cell-code}\nlibrary(extrafont)\nlibrary(showtext)\nshowtext::showtext_auto()\nshowtext::showtext_opts(dpi=320)\nlibrary(sysfonts)\n#font_families_google()\nfont_add_google(name=\"Barlow Condensed\",family=\"dogs\")\n\nfamily = \"dogs\"\n```\n:::\n\n\n\nTo make the plot, use:\n\n- ggforce::geom_ellipse to make the paws\n- ggimage::geom_image to add the images\n\n\n::: {.cell paged.print='false'}\n\n```{.r .cell-code}\ndog_prints_plot <-\n  \n  ggplot(my_df,aes(id,value,group=Breed))+\n  \n  # this is the largest part of the paw\n  ggforce::geom_ellipse(aes(x0=id,y0=value-0.2,a=0.2,b=0.25,\n                            angle=50,color=Breed),fill=\"#393d36\",size=0.5,alpha=0.7)+\n  # the following four ellipses are small extrems of the paw\n  ggforce::geom_ellipse(aes(x0=id+0.22,y0=value+0.2,a=0.1,b=0.12, \n                            angle=50,color=Breed),fill=\"#393d36\",size=0.5,alpha=0.7)+\n  ggforce::geom_ellipse(aes(x0=id-0.2,y0=value+0.15,a=0.1,b=0.12,\n                            angle=50,color=Breed),fill=\"#393d36\",size=0.5,alpha=0.7)+\n  ggforce::geom_ellipse(aes(x0=id+0.01,y0=value+0.25,a=0.1,b=0.1,\n                            angle=50,color=Breed),fill=\"#393d36\",size=0.5,alpha=0.7)+\n  ggforce::geom_ellipse(aes(x0=id-0.32,y0=value-0.15,a=0.1,b=0.1,\n                            angle=50,color=Breed),fill=\"#393d36\",size=0.5,alpha=0.7)+\n  # this is the grey part of the paw  \n  ggforce::geom_ellipse(aes(x0=id,y0=value-0.3,a=0.08,b=0.08,\n                            angle=50),color=\"grey65\",size=0.02,fill=\"grey65\",alpha=0.1) +\n  # The segment is to make the arrow up\n  geom_segment(x=0.43,xend=0.43,y=0,yend=6, size=3,color=\"grey65\",\n               arrow = arrow(length = unit(c(0, 0, 0.4, 0.4), 'cm')))+\n  \n  # description of the factors\n  geom_text(aes(label=factor),check_overlap = T, vjust=5.5, hjust=0.5, size=2.5, color=\"midnightblue\",family=family)+\n  \n  # The breed's names\n  geom_text(aes(x=id,y=6.5,label=Breed),color=\"black\",size=5.5,family=family,face=\"bold\")+\n  \n  # Images of the breeds\n  ggimage::geom_image(aes(x=id,y=-1.4,image=Image),size=0.2)+\n  \n  # expand the canvas to make the paws standing out\n  scale_y_continuous(expand = c(0,1))+\n  ylim(-1.5,7)+\n  coord_cartesian()+\n  labs(title=\"Top 5 selected Breeds: Was Goofy a dog?\", \n       caption=\"Datasource: American Kennel Club | #TidyTuesday 2022-w5 | Viz: Federica Gazzelloni\")+\n  ggthemes::theme_fivethirtyeight()+\n  theme(text = element_text(family = family,size=14),\n        plot.title = element_text(size=18,hjust=0.1),\n        plot.caption = element_text(face = \"bold\",vjust=0.5),\n        panel.grid.major.x = element_line(size=38),\n        panel.grid.major.y = element_blank(),\n        axis.text.y = element_blank(),\n        axis.text.x = element_blank(),\n        axis.ticks.x = element_line(size=4),\n        plot.background = element_rect(color=\"white\",fill=\"white\"),\n        panel.background = element_rect(color=\"white\",fill=\"white\"),\n        legend.position = \"none\")\n```\n:::\n\n\nAdd extra images and save it\n\n::: {.cell paged.print='false'}\n\n```{.r .cell-code}\nlibrary(cowplot)\n\nfinal <- ggdraw()+\n  draw_plot(dog_prints_plot)+\n  draw_image(\"print.png\",x=0.3,y=0.43,scale=0.16)+\n  draw_image(\"print.png\",x=0.4,y=0.43,scale=0.16)\n\nggsave(\"dog_prints_plot.png\",final)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}