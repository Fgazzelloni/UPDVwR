{
  "hash": "6fc4b2d2fa5ef55076bf89617c25bedf",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Pride Corporate Accountability Project'\nsubtitle: 'Welcome to #TidyTuesday 2022 day 23'\ndate: '2022-06-07'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/TidyTuesday/main/data/2022/w23_pride/w23_pride.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\n\n\n\n## Data for Progress’ Pride Corporate Accountability\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n\n\n### Fortune500 \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# pride_aggregates <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-06-07/pride_aggregates.csv')\nfortune_aggregates <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-06-07/fortune_aggregates.csv')\n#static_list <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-06-07/static_list.csv')\n#pride_sponsors <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-06-07/pride_sponsors.csv')\n#corp_by_politicians <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-06-07/corp_by_politicians.csv')\n#donors <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-06-07/donors.csv')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfortune_aggregates %>% names\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(fortune_aggregates)<-c(\"company\",\"tot_contr\",\"n_politicians\",\"n_states\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfortune_aggregates%>%head\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(extrafont)\n# loadfonts()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggtext)\nid=c(\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\")\nplot <- fortune_aggregates%>%\n  arrange(-tot_contr) %>%\n  filter(!company==\"Grand Total\" # tot_contr>=50000\n         ) %>%\n  slice_max(tot_contr,n=7)%>%\n  mutate(company=reorder(as.factor(company),tot_contr))  %>%\n  ggplot(aes(x=company, y=tot_contr)) +\n  geomtextpath::geom_textsegment(aes(xend=company,y=1,yend=tot_contr,\n                                     label=company),\n                                 family=\"Public Sans Medium\",\n                                 textcolour=rainbow(7),\n                                 size=7,linewidth=7,\n                                 lineend = \"butt\",linecolour=rainbow(7)) +\n  geom_point( color=rainbow(7), size=7) +\n  geom_point( color=rainbow(7), size=12,shape=21,stroke=2) +\n  geom_point(shape=id,color=\"black\", size=7) +\n  coord_flip()+\n  labs(title=\"Top 7 <span style='color:gold'>Anti-LGBTQ</span>\",\n       subtitle=\"contributors by Fortune500\",\n       caption=\"Viz:@fgazzelloni | DataSource: #TidyTuesday 2022 week23 -<span style='color:#4b2d8f'>Data for Progress’ Pride Corporate Accountability</span>\")+\n  xlab(\"\") +\n  ylab(\"\")+\n  theme_light() +\n  theme(text = element_text(color=\"grey80\",size=25,family=\"Public Sans Medium\"),\n        plot.title = element_markdown(size=45),\n        plot.caption = element_markdown(size=12,hjust=0),\n        plot.subtitle = element_text(hjust=0),\n    panel.grid.major.x = element_blank(),\n    panel.border = element_blank(),\n    axis.ticks.x = element_blank(),\n    axis.ticks.y = element_blank(),\n    axis.text.y = element_blank(),\n    axis.text.x = element_blank(),\n    axis.title = element_blank(),\n    panel.grid = element_blank(),\n    plot.background = element_rect(fill=\"black\",color=\"black\"),\n    panel.background = element_rect(fill=\"black\",color=\"black\")\n  ) \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(cowplot)\n\nggdraw()+\n  draw_plot(plot)+\n  draw_label(\"Data for Progress\",\n             x=0.7,\n             y=0.35,\n             size=60,\n             alpha = 0.2,\n             fontfamily = \"Public Sans Medium\",\n             color = \"white\")+\n  draw_label(\"F500\",\n             x=0.5,\n             y=0.45,\n             size=350,\n             alpha = 0.2,\n             fontfamily = \"Public Sans Medium\",\n             color = \"white\")+\n    draw_label(\"Data for Progress has compiled a set of resources for\\nactivists, employees, community leaders, and lawmakers\\nto push back on these policies and the prejudice powering them.\",\n             x=0.7,\n             y=0.25,\n             size=15,\n             fontfamily = \"Public Sans Medium\",\n             color = \"grey90\")\n  \n\nggsave(\"w23_pride.png\",\n       dpi=320,\n       width = 12,\n       height = 7)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}