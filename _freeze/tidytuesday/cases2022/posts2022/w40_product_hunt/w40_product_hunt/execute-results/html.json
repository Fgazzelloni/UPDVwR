{
  "hash": "ae674f522809a48bdd77aa71db3f5059",
  "result": {
    "markdown": "---\ntitle: 'Product Hunt products'\nsubtitle: 'Welcome to TidyTuesday 2022 week 40'\ndate: '2022-10-04'\nimage: \"w40_product_hunt.png\"\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nproduct_hunt <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-10-04/product_hunt.csv')\n\nproduct_hunt %>% head()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nproduct_hunt %>%\n  mutate(month=zoo::as.yearmon(as.Date(release_date)))%>%  # \"%Y-%m-%d\"\n  count(month) %>%\n  ggplot(aes(month,n)) +\n  geom_point() \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nproduct_hunt %>%\n  mutate(month=zoo::as.yearmon(as.Date(release_date))) %>%  # \"%Y-%m-%d\"\n  count(month) %>%\n  ggplot(aes(month,n)) +\n  geom_point() +\n  geom_smooth()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nproduct_hunt%>%\n   mutate(month=zoo::as.yearmon(as.Date(release_date)))%>%\n   count(name, month,product_ranking,upvotes) %>%\n   drop_na() %>%\n   arrange(-product_ranking,-upvotes)%>%\n   group_by(product_ranking) %>%\n  count(name)\n   filter(upvotes==max(upvotes))\n  \n\n#column_to_rownames(name)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- product_hunt%>%\n   mutate(month=zoo::as.yearmon(as.Date(release_date)))%>%\n   count(name, month,product_ranking,upvotes) %>%\n   drop_na() %>%\n   arrange(-product_ranking,-upvotes)%>%\n   group_by(product_ranking) %>%\n   filter(upvotes==max(upvotes))\n\ndf\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nproduct_hunt%>%\n   #mutate(month=zoo::as.yearmon(as.Date(release_date)))%>%\n  mutate(year=lubridate::year(as.Date(release_date)))%>%\n   count(year,product_ranking,upvotes) %>%\n   drop_na() %>%\n   arrange(-product_ranking,-upvotes) %>%\n  group_by(year,product_ranking)%>%\n  summarise(avg_votes=sum(upvotes)) %>%\n  ungroup() %>%\n  mutate(year=factor(year)) \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nproduct_hunt%>%\n   #mutate(month=zoo::as.yearmon(as.Date(release_date)))%>%\n  mutate(year=lubridate::year(as.Date(release_date)))%>%\n   count(year,product_ranking,upvotes) %>%\n   drop_na() %>%\n   arrange(-product_ranking,-upvotes) %>%\n  group_by(year,product_ranking)%>%\n  summarise(avg_votes=sum(upvotes)) %>%\n  ungroup() %>%\n  mutate(year=factor(year)) %>%\n  ggplot(aes(x = product_ranking, y = avg_votes,color=year,fill=year)) +\n  geom_col() \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- product_hunt %>% \n  arrange(release_date) %>%\n  select(release_date,upvotes,product_ranking) %>%\n  group_by(release_date,product_ranking) %>%\n  summarise(year = year(release_date),\n            month = month(release_date, label=TRUE),\n            day = day(release_date),\n            tot_votes=scale(upvotes)) %>%\n  ungroup() %>% \n  select(release_date,day,month,year,tot_votes,product_ranking)%>%\n        fill(tot_votes,product_ranking) %>%\n  distinct() %>%\n  drop_na() \n\ndf\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df,aes(month,product_ranking,fill=tot_votes))+\n # geom_hex() +\n  geom_tile(color=\"grey40\",size=0.5) +\n  scale_fill_viridis(name=\"Votes\",option =\"E\",begin = 0.1,end = 1,direction = -1)+\n  facet_grid(vars(year)) +\n  scale_y_continuous(trans = \"reverse\", breaks = unique(df$day)) +\n  scale_x_discrete(expand = c(0,0)) +\n  labs(x=\"Month\",y=\"Product ranking\",\n       title=\"Heatmap of the products upvotes by ranking in time\",\n       subtitle=\"darker areas show a higher number of votes (scaled values)\",\n       caption=\"DataSource: #TidyTuesday week40 Product Hunt | DataViz: Federica Gazzelloni\") +\n  theme_minimal(base_size = 9,base_family = \"Roboto Condensed\")+\n  theme(text=element_text(color=\"grey90\",face=\"bold\"),\n        axis.line = element_blank(),\n        strip.switch.pad.grid = unit(2,units = \"pt\"),\n        plot.background = element_rect(color=\"grey60\",fill=\"grey60\"),\n        plot.title = element_text(size=18))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"w40_product_hunt.png\",\n       dpi=600,\n       width = 10,\n       height = 7)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}