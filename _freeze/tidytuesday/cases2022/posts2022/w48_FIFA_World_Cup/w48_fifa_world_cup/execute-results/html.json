{
  "hash": "a71a30c2578cfb0a297f769385cd1969",
  "result": {
    "markdown": "---\ntitle: 'FIFA World Cup'\nsubtitle: 'Welcome to TidyTuesday 2022 week 48'\ndate: '2022-11-29'\nimage: \"w48_fifa_world_cup.png\"\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n# set the fonts\nlibrary(showtext)\nlibrary(sysfonts)\nlibrary(extrafont)\nshowtext::showtext_auto()\nshowtext::showtext_opts(dpi=320)\nfont_add_google(name=\"Roboto Condensed\",\n                family=\"Roboto Condensed\")  \nfont_add_google(name=\"Nerko One\",\n                family=\"Nerko One\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntuesdata <- tidytuesdayR::tt_load(2022, week = 48)\n# wcmatches <- tuesdata$wcmatches\nworldcups <- tuesdata$worldcups\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nworldcups%>%names\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nworldcups%>%DataExplorer::profile_missing()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nworldcups%>%head\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nworldcups%>%pull(year)%>%summary()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncountries <- worldcups%>%\n  pivot_longer(cols = 2:6,names_to = \"position\",values_to = \"countries\") %>%\n  count(countries)%>%\n  pull(countries)\n\ncountries\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nworld <- rnaturalearth::ne_countries(returnclass = \"sf\")\n\na <- world%>%\n  filter(name%in%countries) %>%\n  data.frame() %>%\n  pull(name)\n\nsetdiff(countries,a)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nworld%>%\n  data.frame() %>%\n  arrange(name) %>%\n  pull(name) \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nworldcups %>%\n    pivot_longer(cols = 2:6,names_to = \"position\",values_to = \"countries\")%>%\n  distinct() %>%\n  filter(countries==\"Yugoslavia\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nworldcups_long <- worldcups %>%\n  pivot_longer(cols = 2:6,names_to = \"position\",values_to = \"countries\")%>%\n  distinct() %>%\n  mutate(countries=case_when(countries==\"Czechoslovakia\"~\"Czech Rep.\",\n                             countries==\"England\"~\"United Kingdom\",\n                             countries==\"Japan, South Korea\"~\"Japan\",\n                             countries==\"South Korea\"~\"Korea\",\n                             countries==\"Soviet Union\"~\"Russia\",\n                             countries==\"USA\"~\"United States\",\n                             countries==\"West Germany\"~\"Germany\",\n                             TRUE~countries))\n\n\nworldcups_long\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nworldcups_long%>%count(year)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)\nfull_sf <- worldcups_long %>%\n  left_join(world,by=c(\"countries\"=\"name\")) %>%\n  st_as_sf() \n\nfull_sf\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(world) +\n  geom_sf() +\n  geom_sf(data = full_sf,aes(fill=position))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(world) +\n  geom_sf() +\n  geom_sf(data = full_sf,aes(fill=attendance))\n```\n:::\n\n\n\n\nContinuous:\n\n- scale_fill_gsea\n- scale_fill_material\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(world%>%filter(!name==\"Antarctica\")) +\n  geom_sf(color=\"grey80\",\n          alpha=0.8,\n          linewidth=0.05,\n          fill=\"grey40\") +\n  geom_sf(data = full_sf,\n          aes(fill=goals_scored),\n          color=\"grey70\",\n          linewidth=0.2) +\n  coord_sf() +\n  ggsci::scale_fill_material(palette = c(\"cyan\"), \n                             alpha = 0.8, reverse = FALSE) +\n  guides(color=\"none\") +\n  labs(title=\"FIFA World Cup\\ntotal Goals scored since 1930\",\n       subtitle=\"\",\n       caption=\"#TidyTuesday week48 FIFA WORLD CUP\\nDataSource: FIFA World Cup | DataViz: Federica Gazzelloni\",\n       fill=\"Goals Scored\\n\\n1930-2018\") +\n  ggthemes::theme_map() +\n  theme(text=element_text(color=\"cyan\",family = \"Roboto Condensed\"),\n        plot.caption = element_text(hjust = 0.5,lineheight = 1.5),\n        legend.position = c(0,0),\n        legend.background = element_blank(),\n        plot.title = element_text(family=\"Nerko One\",size=16,hjust = 0.5),\n        plot.background = element_rect(color=\"black\",fill=\"black\"),\n        panel.background = element_rect(color=\"black\",fill=\"black\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"w48_fifa_world_cup.png\",\n       dpi=220,\n       width = 9,\n       height = 6)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}