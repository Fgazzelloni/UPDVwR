{
  "hash": "af12dc09a4a7cb7e23cf02dae143b580",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Juneteenth'\nsubtitle: 'Welcome to #TidyTuesday 2022 day 25'\ndate: '2022-06-21'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/TidyTuesday/main/data/2022/w25_juneteenth/w25_juneteenth.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(showtext)\nfont_add(family = \"Public Sans Thin\",\n         regular = \"PublicSans-Thin.ttf\")\n  \nfont_add(family=\"PublicSans-Medium\",\n         regular=\"PublicSans-Medium.ttf\")\n  \nshowtext_auto()\n  #showtext::showtext_opts(dpi=320)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n colors<- c(\"#dbcab9\", #warm-gre,\n   \"#cf2e49\", #red\n   \"#E97E7E\", #pale-red\n   \"#efb441\", #orange\n   \"#5f6faa\", #blue\n   \"#5f705d\", #dark-green\n   \"#d4c0a1\", #light-brown\n   \"#6c452f\", #dark-brown\n   \"black\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncensus <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-06-16/census.csv')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_census<-census %>% #count(year)\n  filter(!region==\"USA Total\") %>%\n  mutate(division=ifelse(is.na(division),\"Other\",division)) %>%\n  pivot_longer(cols = c(-region,-division,-year),names_to=\"names\",values_to=\"values\") %>%\n  mutate(names = str_to_title(names),\n         names = gsub(\"_\",\" \",names)) %>%\n  filter(!values==0) %>%arrange(values) %>% \n  group_by(year)%>%\n  mutate(avg_values=mean(values)) %>%\n  ungroup() %>% \n  mutate(division=reorder(factor(division),values),\n         region=reorder(factor(region),values))  \n  \ndf_census\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nblack_free<- df_census %>% \n  filter(names==\"Black free\") %>%\n  group_by(year)%>%\n  summarize(tot=sum(values)) %>%\n  ungroup() %>%\nmutate(pct=round(tot/sum(tot)*100,2),\n       year=as.factor(year)) \n\nblack_slaves<- df_census %>% #count(names)\n  filter(names==\"Black slaves\") %>%\n  group_by(year)%>%\n  summarize(tot=sum(values)) %>%\n  ungroup() %>%\nmutate(pct=round(tot/sum(tot)*100,2),\n       year=as.factor(year)) \n\nblack<- df_census %>% #count(names)\n  filter(names==\"Black\") %>%\n  group_by(year)%>%\n  summarize(tot=sum(values)) %>%\n  ungroup() %>%\nmutate(pct=round(tot/sum(tot)*100,2),\n       year=as.factor(year))\n\n\nbar_plot <- ggplot()+\n  aes(x=desc(year), y=pct, fill=pct) +\n  geom_bar(data=black_free,width = 4, stat = \"identity\",color=\"black\",fill=\"#5f705d\",position=\"identity\") +\n  geom_bar(data=black_slaves,width = 0.5, stat = \"identity\",color=\"black\",fill=\"#E97E7E\",position=\"identity\") +\n  geom_bar(data=black,width = 0.2, stat = \"identity\",color=\"black\",fill=\"#efb441\",position=\"identity\") +\n  scale_y_continuous(expand = expansion(mult=c(0,1),add=c(0,0)))+\n  #scale_x_discrete(expand = expansion(mult=c(5,0),add=c(0,0)))\n  coord_polar(\"y\", start=-89.55, clip = 'off') +\n  theme_void()+\n  theme(plot.title = element_text(hjust=0.5),\n        plot.subtitle = element_text(hjust=0.5),\n        plot.background = element_rect(fill=\"#d4c0a1\",color=\"#d4c0a1\"),\n        panel.background = element_rect(fill=\"#d4c0a1\",color=\"#d4c0a1\"))\n\nbar_plot\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(cowplot)\n ggdraw()+\n   #draw_plot(bar_plot)+\n   draw_image(\"bar_plot.png\",scale=2,x=0.1,y=-0.2)+\n   draw_label(label = \"1790 1800 1810 1820 1830 1840 1850 1860 1870\",\n              x=0.35,y=0.25,size=12)+\n   draw_label(\"NEGROE status transition\",x=0.5,y=0.9,fontfamily = \"PublicSans-Medium\")+\n   draw_label(\"ABRAHAM LINCOLN: “ON THE 1ST DAY OF JANUARY, A.D. 1863, ALL PERSONS HELD AS SLAVES WITHIN ANY STATE...\n              IN REBELLION AGAINST THE U.S. SHALL BE THEN, THENCEFORWARD AND FOREVER FREE”\",\n              x=0.1,y=0.8,hjust=0,\n              size=8)+\n   draw_label(\"How to read it:\\nInspired by #DuboisChallenge style.\\nEach bar represent a year. Each color represent a class: black slaves (dark green), black free (light red), and black (orange)\\nThe last bar (1870) clearly shows the highest percentage of free slaves, from that day on.\", x=0.1,y=0.1,hjust=0,size=7.5,fontfamily = \"Public Sans Thin\")+\n   draw_label(\"DataSource: #TidyTuesday 2022 week25 Juneteenth | US Census's Archives | DataViz: Federica Gazzelloni (@fgazzelloni)\\n\",x=0.5,y=0.01,size=7)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}