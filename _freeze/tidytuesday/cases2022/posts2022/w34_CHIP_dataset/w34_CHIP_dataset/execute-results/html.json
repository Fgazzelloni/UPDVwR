{
  "hash": "5c9de3603e112756206a2fbe29e3d22d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'CHIP dataset'\nsubtitle: 'Welcome to #TidyTuesday 2022 day 34'\ndate: '2022-08-23'\nimage: 'https://raw.githubusercontent.com/Fgazzelloni/TidyTuesday/main/data/2022/w34_chips/w34_chips.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load packages\nlibrary(tidyverse)\nlibrary(cowplot)\nlibrary(showtext)\nshowtext_auto()\n\n# Add fonts from Google.\nfont_add_google(\"Roboto Mono\", \"Roboto Mono\")\nfont_add_google(\"Open Sans\", \"Open Sans\")\nfont_add_google(\"Special Elite\", \"Special Elite\")\n\n# Set ggplot theme\ntheme_set(theme_minimal(base_family = \"Roboto Mono\"))\ntheme_update(text=element_text(size=14),\n  plot.background = element_rect(fill = \"#fafaf5\", color = \"#fafaf5\"),\n  panel.background = element_rect(fill = NA, color = NA),\n  panel.border = element_rect(fill = NA, color = NA),\n  panel.grid.major.x = element_blank(),\n  panel.grid.minor = element_blank(),\n  axis.text.x = element_blank(),\n  axis.text.y = element_text(size = 10),\n  axis.ticks = element_blank(),\n  axis.title.y = element_text(size = 13, margin = margin(r = 10)),\n  legend.title = element_text(size = 9),\n  plot.caption = element_text(\n    family = \"Special Elite\",\n    size = 13,\n    color = \"grey60\",\n    face = \"bold\",\n    hjust = .5,\n    margin = margin(5, 0, 20, 0)\n  ),\n  plot.margin = margin(10, 25, 10, 25)\n)\n\n# Turn on showtext\nshowtext_auto()\n\nsetwd(\"~/Documents/R/R_general_resources/TidyTuesday/data/2022/w34_chips\")\ndata_raw <- read_csv(\"data_raw/chip_dataset.csv\")\n\nlibrary(slider)\n\ndata_raw_1 <- data_raw%>%\n  janitor::clean_names()%>%\n  mutate(release_date=as.Date(release_date,\"%Y-%m-%d\"),\n         year=lubridate::year(release_date),.after=release_date) %>%\n  filter(!is.na(year),\n         vendor%in%c(\"AMD\",\"Intel\")) %>%\n  select(release_date,year,type,vendor,product,transistors_million,freq_m_hz) %>%\n  group_by(year) %>%\n  mutate(transistors_million=ifelse(is.na(transistors_million),\n                                    mean(transistors_million,na.rm = T),\n                                    transistors_million)) %>%\n  ungroup() %>%\n  arrange(release_date)\n\n\nmean_transistors_million <- function(df) {\n  summarize(df, \n            date = min(release_date), \n            mean_transistors_million = mean(transistors_million), \n            n = n())\n}\n\n\ndata_cpu <- data_raw_1 %>%\n  filter(type==\"CPU\")\ndata_gpu <- data_raw_1 %>%\n  filter(type==\"GPU\")\n\n\nnew_cpu<- slide_period_dfr(data_cpu, \n                           data_cpu$release_date, \n                           .period=\"year\", \n                           .every = 3, \n                           mean_transistors_million) %>%\n  mutate(type=\"CPU\")\nnew_gpu<- slide_period_dfr(data_gpu, \n                           data_gpu$release_date, \n                           \"year\", \n                           .every = 2, \n                           mean_transistors_million) %>%\n  mutate(type=\"GPU\")\n\n\nnew_df <- rbind(new_cpu,new_gpu)\n\n\nlogo <- png::readPNG(\"logo.png\")\n\n\ntitle=\"Twenty years observation of CPU and GPU transistors\"\nsubtitle = \"Tendency to increase as stated by the Moore's law confirmed the number of transistors doubles about every two years.\nCPU is considered every 3 years while GPU every 2 years. Comparisons between vendors restrict to AMD and Intel.\"\n\n\n\np <- new_df %>%\n  mutate(year=lubridate::year(date),\n         type=ifelse(type==\"CPU\",\"CPU every 3 Years\",\"GPU every 2 Years\")) %>%\n  arrange(date) %>%\n  group_by(year) %>%\n  mutate(max= max(mean_transistors_million)) %>%\n  ggplot(aes(x = year, y = mean_transistors_million,\n             color=type)) +\n  geom_line(size = 1.5, alpha = 0.8)+\n  geom_point(aes(size=n)) +\n  scale_color_manual(\n  values = c(\"#486090\", \"#D7BFA6\"))+\n  labs(y=\"Average n.Transistors (in millions)\",\n       x=\"Year\",\n       color=\"Type\",\n       size=\"Frequency by product\",\n       title=title,\n       subtitle=subtitle,\n       caption=\"DataSource: #TidyTuesday 2022 week 34 Chips | DavaViz: Federica Gazzelloni (@fgazzelloni)\")+\n  theme(axis.text.x.bottom = element_text(),\n        plot.subtitle = element_text(),\n        plot.title = element_text(size = 25,face=\"bold\"))\n\n\nggdraw(p) +\ndraw_image(logo, x = -.35, y = -.25, scale = .12)\n\nggsave(\"w34_chips.png\",\nwidth = 15, height = 9, device = png)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}