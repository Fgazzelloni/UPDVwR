{
  "hash": "87c93b82649b2089038f766cd68099e9",
  "result": {
    "markdown": "---\ntitle: 'Deviations'\nsubtitle: 'Welcome to #30DayChartChallenge 2022 day 28'\ndate: '2022-04-28'\nimage: 'day28_deviations.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n::: {.cell paged.print='false'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhidden_gems <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-04-26/hidden_gems.csv')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- hidden_gems%>%\n  count(vol,date,title,review,author_kaggle,author_name)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 <- df %>%  #pull(date)%>%summary\n  mutate(ym=zoo::as.yearmon(date),\n         year=lubridate::year(date))%>%\n  unnest_tokens(word,review) %>%\n  anti_join(get_stopwords()) %>%\n  filter(!str_detect(word,\"kaggle|c|https|2020|2021|also|end|r\")) %>%\n  count(author_name,word,sort=T) %>%\n\n inner_join(bing) %>%\n  mutate(sentiment2=sentiment)%>%\n  spread(sentiment, n, fill = 0) %>%\n  mutate(sentiment = positive - negative) %>%\n  mutate(index=row_number())%>%\n  relocate(index) %>% #count(word,sort=T)\n  mutate(word=reorder(word,-index)) \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_words<-df1 %>%\n  count(word,sort=T)%>%\n  filter(n>1) %>%\n  select(-n) %>%\n  unlist()\n  \n  \ndf2 <- df1 %>%\n   filter(word %in% my_words) \n```\n:::\n\n\n\nNotches are used to compare groups; if the notches of two boxes do not overlap, this suggests that the medians are significantly different.\n\n::: {.cell}\n\n```{.r .cell-code}\ndf2 %>%\n  mutate(word=toupper(word))%>%\n  mutate(word=as.factor(word),\n         word=reorder(word,-index))%>% #count(index,sort=T)\n  ggplot(aes(x=index,y=fct_reorder(word,sentiment),fill=sentiment2))+ # \n  geom_boxplot(size=0.5,\n               outlier.size = 0.3,outlier.shape = 21,\n               notch = T) +\n  geom_jitter(size=0.3,shape=21,stroke=0.5)+\n  coord_cartesian(xlim = c(-1,260),ylim=c(0,35),clip=\"off\")+\n  labs(title=\"How vary are words in the Hidden Gems Reviews?\",\n       subtitle=\"Some words repeated themselves more frequently than others,\\nwith significantly different medians.\",\n       caption=\"#30DayChartChallenge 2022 #Day28 - Deviations\\nDataSource: #TidyTuesday Week17 - Hidden Gems\\nDataViz: Federica Gazzelloni (@fgazzelloni)\",\n       x=\"\",y=\"\",fill=\"Sentiment\")+\n  tvthemes::scale_fill_rickAndMorty()+\n  tvthemes::theme_rickAndMorty()+\n  theme(plot.background = element_rect(fill=\"grey80\"),\n        legend.background = element_rect(fill=NA),\n        legend.position = c(0.9,0.9),\n        plot.title = element_text(face=\"bold\",size=22),\n        plot.title.position = \"plot\",\n        plot.subtitle = element_text(size=12),\n        axis.text.x = element_blank())+\n  annotate(\"text\",x=-70,y=-2.5,label=\"How to read this graph:\\n- the notches represent the median of the frequency of words\\nfound in the Hidden Gems reviews by Author\\n- the sidebars represent their deviations\",\n           hjust=0,size=3)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"day28_deviations.png\",\n       dpi=320,\n       width = 8,\n       height = 10)\n```\n:::\n",
    "supporting": [
      "day28_deviations_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}