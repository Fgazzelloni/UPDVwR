{
  "hash": "c7da8eae4ff8b0b9d8bb54b6442d983e",
  "result": {
    "markdown": "---\ntitle: 'Trend'\nsubtitle: 'Welcome to #30DayChartChallenge 2022 day 25'\ndate: '2022-04-25'\nimage: 'day25_trend.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\n\n\n### Source:\n\n1. All PaleoTemps - Wikipedia: http://gergs.net/all_palaeotemps-2/\n2. Nasa temperature: https://climate.nasa.gov/vital-signs/global-temperature/\n\n\n\n\n::: {.cell paged.print='false'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- read.csv(\"https://data.giss.nasa.gov/gistemp/graphs/graph_data/Global_Mean_Estimates_based_on_Land_and_Ocean_Data/graph.txt\",\n         header = F,\n         sep = \"\", \n         dec = \".\",\n         skip=5,\n         col.names=c(\"year\",\"avg\",\"lowess\"))\n\ndf%>%summary\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf%>%\n  filter(year==2020)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df,aes(x=year,y=avg)) +\n  geom_line(color=\"grey70\",alpha=0.7,size=1) +\n  geom_point(shape=21,stroke=1,color=\"grey70\",fill=\"white\")+\n  geom_line(aes(y=lowess),inherit.aes = T,color=\"black\",size=0.8)+\n  geom_point(x=2020,y=0.94,size=3,color=\"red\")+\n  scale_x_continuous(breaks=seq(1880,2021,20),expand=c(0,0.05))+\n  scale_y_continuous(expand=c(0,0),\n                     limits=c(-0.5,1.5),\n                     sec.axis = dup_axis())+\n  labs(title=\"GLOBAL LAND-OCEAN TEMPERATURE INDEX\",\n       subtitle = \"Data source: NASA's Goddard Institute for Space Studies (GISS).\\nCredit: NASA/GISS\\n\\n\",\n       caption=\"\\n#30DayChartChallenge 2022 #Day25 - Trend\\nDataViz: Federica Gazzelloni | Twitter: @fgazzelloni\",\n       x=\"YEAR\",y=\"Temperature Anomaly (C)\\n\")+\n  theme_linedraw()+\n  theme(text = element_text(color=\"grey60\"),\n        plot.caption = element_text(hjust=0,color=\"grey40\"),\n        plot.caption.position = \"plot\",\n        plot.title = element_text(color=\"#c15a4f\",face=\"bold\",size=17),\n        plot.title.position = \"plot\",\n        plot.subtitle = element_text(color=\"grey40\",size=13,vjust=-2),\n        panel.border = element_rect(fill=NA,size=0.5,color=\"#e2e2e2\"),\n        panel.grid.major = element_line(color=\"grey60\",size=0.3),\n        panel.grid.minor.y = element_blank(),\n        panel.grid.minor.x = element_blank(),\n        axis.title.x = element_text(color=\"grey40\",hjust=0.45,vjust=-1.5),\n        axis.text.x = element_text(size=11.5,color=\"grey30\",vjust=-0.5),\n        axis.text.y.left = element_text(size=11.5,color=\"grey30\"),\n        axis.text.y.right = element_blank(),\n        axis.title.y.left = element_text(color=\"grey40\"),\n        axis.title.y.right = element_blank(),\n        axis.line.y.right  = element_line(color = 'white'),\n        axis.ticks = element_blank(),\n        plot.margin = margin(20,20,10,20,unit = \"pt\"))+\n  # double rects-----\n  annotate(\"rect\", xmin = 1881.5, xmax = 1884.5, \n           ymin = 1.3, ymax = 1.4,\n           alpha = .9,color=\"grey70\",size=0.9,fill=\"grey70\") +\n  # grey square\n  annotate(\"rect\", xmin = 1881.5, xmax = 1884.5, \n           ymin = 1.3, ymax = 1.4,size=0.3,\n           alpha = .9,color=\"white\",fill=\"grey70\") +\n  \n  annotate(\"rect\", xmin = 1881.5, xmax = 1884.5, \n           ymin = 1.13, ymax = 1.23,\n           alpha = .9,color=\"grey70\",size=0.9,fill=\"grey70\")+\n  # black square\n  annotate(\"rect\", xmin = 1881.5, xmax = 1884.5, \n           ymin = 1.13, ymax = 1.23,\n           alpha = .9,color=\"white\",size=0.3,fill=\"black\")+\n  \n\n  # legend labels\n  annotate(\"label\",x=1897.46,y=1.35,\n           label=\"Annual mean\", size=5,\n           label.padding = unit(0.05, \"lines\"), \n           label.size = NA) +\n  annotate(\"label\",x=1902,y=1.18,\n           label=\"Lowess smoothing\",size=5,\n           label.size = NA,\n           label.padding = unit(0.05, \"lines\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"test.png\",\n       dpi=320,\n       width = 8,\n       height = 5)\n```\n:::\n\n\n\n\n#### SPECIAL PALEOTEMPS---------- \n\n\n::: {.cell}\n\n```{.r .cell-code}\nAll_palaeotemps <- readxl::read_excel(\"/Users/federica/Documents/R/R_general_resources/EDA/30DayChartChallenge/data/Edition_2022/day25_trend/All_palaeotemps.xlsx\", \n    sheet = \"Data compilation\", skip = 2)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 <- All_palaeotemps%>%\n  janitor::clean_names()%>%\n  select(age1=age_my_1,\n         temp1=royer_veizer_x_2_0,\n         temp2=royer_veizer_co2_from_proxies_x_2_0,\n         low,high,\n         age2=age_my_8,\n         t_anomaly=t_anomaly_13)\n\ndf2 <- All_palaeotemps%>%\n  janitor::clean_names()%>%\n  select(age1=age_my_1,\n         temp1=royer_veizer_x_2_0,\n         temp2=royer_veizer_co2_from_proxies_x_2_0,\n         low,high,\n         age2=age_my_8,\n         t_anomaly=t_anomaly_13)%>%\n  pivot_longer(cols = c(age1,age2),names_to=\"ages\",values_to=\"age_val\")%>%\n  pivot_longer(cols=c(temp1,temp2,low,high,t_anomaly),names_to=\"temps\",values_to=\"temp_val\")\n  \n\ndf1\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df2,aes(x=(age_val),y=temp_val,group=factor(temps),color=factor(temps)))+\n  geom_line()+\n  scale_x_reverse()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# df1$royer_veizer_x_2_0[is.na(df1$royer_veizer_x_2_0)]<-0\n\nggplot(df1,aes(x=age1,y=low))+\n  #geom_point()+\n  #geom_smooth(size=0.01)+\n  geom_line(inherit.aes = T,\n            size=0.5,\n            #alpha=0.5,\n            color=\"gold\")+\n  #geom_line(aes(x=age_my_1-10,y=low+2),\n  #         inherit.aes = T,\n  #         size=0.5,\n  #         #alpha=0.5,\n  #         color=\"gold\")+\n  geom_ribbon(aes(xmin=age1,\n                  xmax=age1,\n                  ymin=low,\n                 ymax=low+3),\n              fill=\"gold\")+\n # geom_ribbon(aes(xmin=age_my_1,\n #                 xmax=age_my_1-10,\n #                 ymin=low,\n #                 ymax=low+2))+\n  # geom_line(aes(y=high),\n  #           inherit.aes = T,\n  #           size=1,\n  #           alpha=0.5,\n  #           color=\"orange\")+\n    geom_line(aes(y=temp1),\n            inherit.aes = T,\n            size=0.8,\n            color=\"red\")+\n  geom_line(aes(y=temp2),\n            inherit.aes = T,\n            color=\"black\",\n            size=0.8,\n            linetype=\"dashed\")+\n  geom_hline(aes(yintercept=0))+\n  scale_x_reverse(breaks=c(500,400,300,200,100))+\n  geom_line(aes(x=age2,y=t_anomaly),color=\"darkgreen\")+\n  theme_bw()\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}