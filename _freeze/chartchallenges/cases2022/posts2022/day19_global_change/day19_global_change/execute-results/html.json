{
  "hash": "4334ab845f06df5dcc84308e2ad60672",
  "result": {
    "markdown": "---\ntitle: 'Global Change'\nsubtitle: 'Welcome to #30DayChartChallenge 2022 day 19'\ndate: '2022-04-19'\nimage: 'day19_global_change.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nrm(list=ls())\n\n\npath=\"/Users/federica/Documents/R/R_general_resources/EDA/30DayChartChallenge/data/Edition_2022/day18_oecd\"\nsetwd(path)\n\n\nlibrary(tidyverse)\nairtransport <- read_csv(\"AIRTRANS_CO2_19042022233714776.csv\")\n\noptions(scipen = 999)\ndf <- airtransport%>%\n  janitor::clean_names()%>% #count(flight_type)\n  select(pollutant,country,time,value,frequency=frequency_2,flight_type)%>%\n  mutate(value=round(value))\n\ndf1 <-df %>% \n  count(country,time,value)%>%\n  filter(time==as.integer(substr(time, 1, 4)))%>%\n  distinct()\n\ndf2%>%DataExplorer::profile_missing()\n\n \n  \n  \n  my_countries <- df1 %>%\n  group_by(country)%>%\n  summarize(tot_value_per_country=round(mean(value)))%>%\n  arrange(-tot_value_per_country)%>%\n  ungroup()%>%\n  slice(1:10)%>%\n  select(country)%>%\n  unlist()\n\n  \n  \n\n  \n  df2 <- df1 %>%\n  #filter(country%in%my_countries) %>%\n  group_by(country,time)%>%\n  summarise(avg_value=mean(value),.groups=\"drop\")%>%\n  arrange(-avg_value) %>%\n  ungroup() \n  \n\n  \n  \ndf3 <- df2%>%filter(time==2020)\n\n\ndf3 <-df2%>%filter(!str_detect(country,\"Monaco\"))\n\n# it's Monaco\n  \nlibrary(hrbrthemes)\nlibrary(ggthemes)  \nlibrary(ggthemr)\nlibrary(tvthemes)\n\nmycolors <- colorRampPalette(RColorBrewer::brewer.pal(8, \"Set1\"))(186)\n\nggplot(df3,aes(x=factor(time),\n               y=avg_value,group=country,color=country,fill=country))+\n  geom_area(alpha=0.2)+\n  geom_point(size=0.2)+\n  geom_line()+\n  scale_color_manual(values=mycolors)+\n  scale_fill_manual(values=mycolors)+\n  labs(x=\"\",y=\"\",\n       title=\"Global CO2 emissions\",\n       caption=\"#30DayChartChallenge 2022 #Day19 - Global Change | OECD data | DataViz: Federica Gazzelloni\")+\ntheme_dark()+\n  theme(legend.position = \"none\",\n        plot.title = element_text(size=30,color=\"white\"),\n        plot.caption = element_text(size=12,color=\"white\"),\n        axis.text.y = element_blank(),\n        axis.text.x = element_text(color=\"white\",size=12),\n        axis.ticks.x = element_line(size=6,color=\"white\"),\n        panel.grid.major.y = element_blank(),\n        panel.grid.minor.y = element_blank(),\n        panel.grid.major.x = element_line(color=\"grey90\",size=2),\n        plot.background = element_rect(fill=\"grey20\"),\n        panel.background = element_rect(fill=\"grey20\"))\n\n\nggsave(\"day19_global_change.png\",\n       dpi=320,\n       width = 9,\n       height = 6)\n\n\n\n\n##------------\n\n\nlibrary(streamgraph)\n\n# Basic stream graph: just give the 3 arguments\nstreamgraph(df2, \n                  key=\"country\", \n                  value=\"avg_value\", \n                  date=\"time\", \n            offset=\"zero\",\n            height=\"300px\", width=\"1000px\")\npp \n```\n:::\n",
    "supporting": [
      "day19_global_change_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}