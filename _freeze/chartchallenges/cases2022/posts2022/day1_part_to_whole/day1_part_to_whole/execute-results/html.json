{
  "hash": "0fcd448ab274fa490acb46950749c980",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Part to whole'\nsubtitle: 'Welcome to #30DayChartChallenge 2022 day 1'\ndate: '2022-04-01'\nimage: 'day1_part-to-whole.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(igraph)\nlibrary(ggraph)\nlibrary(RColorBrewer)\ntheme_set(silgelib::theme_roboto())\n\nsports <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-03-29/sports.csv')\n\nsports <- sports %>%\n  filter(!sports==\"All Track Combined\")\n\nmen <- sports %>%\n  select(year,state_cd,men_sports=sports,partic_men) %>%\n  drop_na()\n\nwomen <- sports %>% \n  select(year,state_cd,women_sports=sports,partic_women) %>%\n  drop_na()\n\n\ndf <- men %>%\n  left_join(women,by=c(\"year\",\"state_cd\")) %>%\n  distinct()\n\n\ndf1 <- df %>%\n  mutate(students=partic_men+partic_women) %>%\n  count(men_sports,women_sports,\n        wt= students,\n        name=\"students\",\n        sort=T) %>%\n  mutate(students=students/1000) %>%\n  filter(students>1000) %>%\n  graph_from_data_frame(directed = FALSE)\n\n\nlibrary(showtext)\nlibrary(sysfonts)\nlibrary(extrafont)\n\nshowtext::showtext_auto()\nshowtext::showtext_opts(dpi=320)\nfont_add_google(name=\"Over the Rainbow\",family=\"overtherainbow\")\n\n\n\nset.seed(0104)\ndf1 %>%\n  ggraph(layout = \"linear\", circular = TRUE) +\n  geom_edge_arc(aes(edge_alpha = students, \n                    edge_width = students), \n                color = \"grey20\") +\n  geom_node_point(aes(fill=name,color=name),\n                  size=15,\n                  stroke=4,\n                  shape=21,\n                  alpha=0.5,\n                  show.legend = F) +\n  geom_node_point(aes(color=name),size=5,show.legend = F) +\n  geom_node_text(mapping = aes(label = name), \n                 position = position_nudge(y = 0.1),\n                 #position = position_dodge(width = 0),\n                 #position = position_jitter(seed = 111),\n                 repel = TRUE, \n                 color=\"grey15\",\n                 size=5,\n                 family = \"overtherainbow\",\n                 fontface=\"bold\")+\n  scale_colour_manual(values= rep( brewer.pal(8,\"Dark2\") , 30)) +\n  scale_fill_manual(values= rep(brewer.pal(9,\"Paired\") , 30)) +\n  labs(title=\"US college Sports 2015-2019\",\n       subtitle=\"Among all sports which ones are the most played by males vs females?\",\n       caption=\"#30daychartchallenge 2022 - day1 Part to whole\\nDataSource: Equity in Athletics Data Analysis | DataViz: Federica Gazzelloni\")+\n  theme(text=element_text(color=\"grey15\",size=12,family=\"overtherainbow\"),\n        plot.background = element_rect(color=\"grey30\",fill=\"grey80\"),\n        legend.position = c(0.93,0.9)) \n\n\nggsave(\"day1_part-to-whole.png\",width =  8.56, height =  8.44)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}