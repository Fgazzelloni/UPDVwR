{
  "hash": "aa0bafcc2b58d0a2117b4fa2d0d39f9f",
  "result": {
    "markdown": "---\ntitle: 'Connections'\nsubtitle: 'Welcome to #30DayChartChallenge 2022 day 17'\ndate: '2022-04-17'\nimage: 'day17_bird-network.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nbird_baths <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-08-31/bird_baths.csv')\nbird_baths <- bird_baths %>%\n  drop_na() %>%\n  filter(bird_count>0)\n\nbird_baths_type <- bird_baths %>% \n  group_by(bird_type) %>%\n  summarise(tot_bird_count = sum(bird_count),.groups=\"drop\") \n\nbird_baths_type <- column_to_rownames(bird_baths_type, var = \"bird_type\")\n\n\n# Compute distances and hierarchical clustering\ndd <- dist(scale(bird_baths_type), method = \"manhattan\")\nhc <- hclust(dd, method = \"ward.D2\")\nplot(hc)\n\nlibrary(\"ape\")\ncolors = RColorBrewer::brewer.pal(12,\"Set2\")\nclus4 = cutree(hc, 12)\n\n#library(extrafont)\n#loadfonts()\n\npng(filename = \"test.png\",  \n    width = 25, \n    height = 18, units = \"cm\", \n    res = 320)\nplot(as.phylo(hc), \n     type = \"radial\", #\"fan\", #type = \"phylogram\", \n     show.tip.label = TRUE,\n     edge.color = \"midnightblue\", \n     edge.width = 1, \n     edge.lty = 6,\n     use.edge.length = T,\n     node.depth = 1,\n     node.pos = 2,\n     cex = 0.6, \n     label.offset = 0.01,\n     no.margin = TRUE,\n     tip.color = colors[clus4])\ndev.off()\n\n\nlibrary(extrafont)\nlibrary(showtext)\nshowtext_auto(enable = F)\nlibrary(cowplot)\n\n\nif (requireNamespace(\"magick\", quietly = TRUE)){\n  img <- magick::image_transparent(\n    magick::image_read(\"bird-pict.png\"),\n    color = \"white\"\n  )\n  img2 <- magick::image_negate(\"bird-pict.png\")\n  p<-ggplot(data.frame(x = 1:3, y = 1:3), aes(x, y)) +\n    geom_point(size = 3) +\n    geom_abline(slope = 1, intercept = 0, \n                linetype = 2, color = \"beige\") +\n    draw_image(\"test-removebg.png\", x = 1.5, y = 1.5, scale = 2.5)+\n    draw_image(\"bird-pict.png\" , x = 0.9, y = 1.9, scale = .9) \n    \n}\n\n\np +\n  labs(title=\"Avian Assemblages at Bird Baths - Australia\",\n       caption=\"DataViz: @fgazzelloni\\n#TidyTuesday 2021 week36 Bird Baths\\n#30DayChartChallenge 2022 #day17 - Connections\")+\n  theme_void()+\n  theme(plot.background = element_rect(color=\"grey20\",fill=\"grey20\"),\n        panel.background = element_rect(color=\"grey20\",fill=\"grey20\"),\n        plot.title = element_text(family = \"Roboto Condensed\",\n                                  color=\"beige\",size=28,\n                                  vjust=-1,hjust = 0.1),\n        plot.caption = element_text(family = \"Roboto Condensed\",\n                                    color=\"beige\",size=15,\n                                    vjust = 3,hjust = 0.9))\nggsave(\"bird-network.png\",\n       dpi=320,\n       width = 8,\n       height = 8)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}