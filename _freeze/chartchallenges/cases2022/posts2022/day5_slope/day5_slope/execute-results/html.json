{
  "hash": "bb1d4ea4a25a111118247469d04083c1",
  "result": {
    "markdown": "---\ntitle: 'Slope'\nsubtitle: 'Welcome to #30DayChartChallenge 2022 day 5'\ndate: '2022-04-05'\nimage: 'day5_slope.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\n#load data\nnews_orgs <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-04-05/news_orgs.csv')\n\n#news_orgs %>% head(50)%>% View\n\n#news_orgs%>% count(year_founded)\n\nlibrary(extrafont)\nloadfonts()\nlibrary(showtext)\n#sysfonts::font_add_google(\"Public Sans\",\"publicsans\")\n\n  \ndf <- news_orgs %>%\n  select(publication_name,year_founded,budget_percent_editorial,budget_percent_revenue_generation) %>% \n  drop_na() %>%\n  arrange(budget_percent_editorial) %>% #count(year_founded) %>% View\n  filter(!budget_percent_editorial==budget_percent_revenue_generation,\n         year_founded==2010) \n\n\n\ndf2 <- df %>%\n  arrange(desc(budget_percent_editorial)) %>%\n  mutate(photo=gsub(\" \",\"\",publication_name),.after=publication_name,\n         photo=tolower(photo),\n         photo=paste0(\"data/2022/w14_digital_pub/\",photo,\".png\"))\n\nlibrary(hrbrthemes)\nlibrary(ggbump)\nlibrary(ggh4x)\nlibrary(ggimage)\n\n\ndf2 %>%\n  ggplot(aes(x=0,xend=1,\n             y=budget_percent_editorial,yend=budget_percent_revenue_generation,\n             group=factor(publication_name))) +\n ggrepel::geom_text_repel(aes(x=0,label=publication_name),\n                          color=\"grey80\",\n                          \n                           direction = \"y\", hjust = \"left\",\n                           min.segment.length = 0,\n                           nudge_x = 1.1,\n                           box.padding = 0.5,\n                           nudge_y = 0,\n                          segment.color=\"grey32\",\n                           segment.curvature = -0.1,\n                           segment.ncp = 3,\n                           segment.angle = 20,\n                           segment.size = 0.2)+\n  geom_image(aes(x=rev(seq(0,1.2,0.08571429)),\n                 y=seq(1,10,0.6785714),\n                 image=rev(photo)),\n             alpha=0.6,size=0.04,\n             nudge_y = 0.1,by=\"height\")+\n  geom_segment(size=1) +\n  geom_point(size=8,shape=21,stroke=3)+\n  geom_point(aes(x=1,y=budget_percent_revenue_generation),size=8,shape=21,stroke=3) +\n  labs(title=\"Publications funded in 2010: Editorial vs Revenue generation budget\",\n       subtitle=\"Report from PROJECT OASIS - Hussman School of Journalism and Media\",\n       caption=\"#TidyTuesday week14 & #30DayChartChallenge 2022 day5 - Slope\n       DataSource: Digital Publications|Project Oasis - DataViz: Federica Gazzelloni\",\n       x=\"Revenue generation budget (%)\",\n       y=\"Editorial budget (%)\") +\n  guides(y.sec = guide_axis_manual(labels = c(\"0-10\",\"11-20\",\"21-30\",\"31-40\",\"41-50\",\"51-60\",\"\",\"\",\"\",\"\")))+\n  scale_x_continuous(expand = c(0,0),limits=c(-0.1,1.3))+\n  hrbrthemes::theme_ft_rc()+\n  theme(text = element_text(),\n        axis.text.x = element_blank(),\n        plot.title = element_text(size=28),\n        plot.caption = element_text(size=11),\n        axis.title.x = element_text(size=10),\n        axis.title.y = element_text(size=10))\n\n\nggsave(\"w14_digital_publications.png\",\n       width = 12, height = 8,\n       dpi=320)\n\ndev.off()\n\n# Second version:\n\nlibrary(sigmoid)\n\nz <- rev(seq(0,1.2,0.08571429))\n\ndf2 %>%\n  ggplot(aes(x=0,xend=1,\n             y=budget_percent_editorial,yend=budget_percent_revenue_generation,\n             group=factor(publication_name))) +\n  ggrepel::geom_text_repel(aes(x=0,label=publication_name),\n                           color=\"grey80\",\n                           direction = \"y\", hjust = \"left\",\n                           min.segment.length = 0,\n                           nudge_x = 1.11,\n                           box.padding = 0.5,\n                           nudge_y = 0,\n                           segment.color=\"grey32\",\n                           segment.curvature = -0.1,\n                           segment.ncp = 3,\n                           segment.angle = 20,\n                           segment.size = 0.2)+\n  geom_image(aes(x=sigmoid(z, k=sd(z), x0=mean(z),\n                           method=\"tanh\",\n                           SoftMax = F\n                           ),\n                 y=seq(5.5,10.5,0.3571429),\n                 image=rev(photo)),\n             size=0.04,nudge_y = 0.1,by=\"height\")+\n  geom_segment(size=1,lineend = \"round\",color=\"grey32\") +\n  geom_segment(size=2,lineend = \"round\",linetype=\"dashed\") +\n  geom_point(size=8,shape=21,stroke=3,fill=\"grey80\",alpha=0.7)+\n  geom_point(aes(x=1,y=budget_percent_revenue_generation),\n             size=8,shape=21,stroke=3,fill=\"grey80\",alpha=0.7) +\n  labs(title=\"Publications funded in 2010: Editorial vs Revenue generation budget\",\n       subtitle=\"Report from PROJECT OASIS - Hussman School of Journalism and Media\",\n       caption=\"#TidyTuesday week14 & #30DayChartChallenge 2022 day5 - Slope\n       DataSource: Digital Publications|Project Oasis - DataViz: Federica Gazzelloni\",\n       x=\"Revenue generation budget (%)\",\n       y=\"Editorial budget (%)\") +\n  guides(y.sec = guide_axis_manual(labels = c(\"0-10\",\"11-20\",\"21-30\",\"31-40\",\"41-50\",\"51-60\",\"\",\"\",\"\",\"\")))+\n  scale_x_continuous(expand = c(0,0),limits=c(-0.1,1.3))+\n  hrbrthemes::theme_ft_rc()+\n  theme(text = element_text(color=\"grey40\",family=\"Impact\"),\n        axis.text.x = element_blank(),\n        axis.text.y = element_text(color=\"grey60\"),\n        plot.title = element_text(size=28),\n        plot.caption = element_text(size=11),\n        axis.title.x = element_text(size=10,color=\"grey60\"),\n        axis.title.y = element_text(size=10,color=\"grey60\"))\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}