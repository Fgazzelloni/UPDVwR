{
  "hash": "730e0ee5d80cccf51a808c854be9e229",
  "result": {
    "markdown": "---\ntitle: 'Anthropocene'\nsubtitle: 'Welcome to #30DayChartChallenge 2023 day 19'\ndate: '2023-04-19'\nimage: 'day19_anthropocene.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n> Gazzelloni F. (2023), Data Visualization: Yellow-Legged Frog Anthropocene\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nlibrary(spocc)\nrana_sierrae <- occ(query = \"Rana sierrae\",\n              from = \"gbif\",\n               limit = 1000,\n               date = c('1900-01-01','2020-01-01'),\n               has_coords = TRUE\n              )\nrana_muscosa <- occ(query = \"Rana muscosa\",\n               from = \"gbif\",\n               limit = 1000,\n               date = c('1900-01-01','2020-01-01'),\n               has_coords = TRUE\n               )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nrana_sierrae <- data.frame(rana_sierrae$gbif$data)\nrana_muscosa <- data.frame(rana_muscosa$gbif$data)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nrana_sierrae <- rana_sierrae %>%\n  select(\nyear=\"Rana_sierrae.year\",                            \nmonth=\"Rana_sierrae.month\",                           \nday=\"Rana_sierrae.day\",                             \ndate=\"Rana_sierrae.eventDate\",\nlong=\"Rana_sierrae.longitude\",                      \nlat=\"Rana_sierrae.latitude\"\n)\n\nrana_muscosa <- rana_muscosa %>%\n  select(\nyear=\"Rana_muscosa.year\",                            \nmonth=\"Rana_muscosa.month\",                           \nday=\"Rana_muscosa.day\",                             \ndate=\"Rana_muscosa.eventDate\",\nlong=\"Rana_muscosa.longitude\",                      \nlat=\"Rana_muscosa.latitude\"\n)\n\nfrog_data <- rbind(rana_sierrae%>%\n  mutate(type=rep(\"rana_sierrae\",736)),\nrana_muscosa%>%\n  mutate(type=rep(\"rana_muscosa\",1000))\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfrog_data_yr <- rana_muscosa %>%\n  group_by(year) %>%\n  reframe(population = n())\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot population over time\nggplot(frog_data_yr, aes(x = year, y = population,color=population))+\n                         #group=factor(type),\n                         #color=type)) +\n  geom_line(linewidth=1) +\n  labs(title = \"Decline in Sierra Nevada Yellow-Legged Frog Population\",\n       x = \"Year\",\n       y = \"Population\",\n       caption = \"DataSource: GBIF | #30DayChartChallenge Day19: Anthropocene\\nDataViz: Federica Gazzelloni\") +\n  geom_vline(xintercept = 2000,linetype=\"dashed\",linewidth=0.5)+\n  geom_vline(xintercept = 2014,linetype=\"dashed\",linewidth=0.3,color=\"#a60845\")+\n  #scale_color_viridis_d()+\n  scale_color_gradient(low = \"#a8bd3a\",high = \"#275477\")+\n  scale_x_continuous(n.breaks = 10)+\n  theme_minimal()+\n  theme(plot.title = element_text(size=16))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"timeline.png\",width = 9,height = 5,bg=\"white\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstates <- map_data(\"state\")\n\nstate_names <- states%>%\n  filter(long > -125 & long < -110 ,lat > 30 & lat < 50) %>%\n  group_by(region)%>%\n  reframe(long=mean(range(long)),lat=mean(range(lat)))%>%\n  mutate(region=str_to_title(region))\n\nfrog_data%>%\n  filter(year > 2000) %>%\n  mutate(year=as.factor(year))%>%\n  ggplot()+\n  geom_polygon(data=states,aes(long,lat,group=group),\n               fill=\"#bfd0dd\",color=\"grey20\")+\n  geom_text(data=state_names, mapping=aes(long,lat,label=region))+\n  geom_point(aes(long,lat,fill=year),shape=21,stroke=0.5)+\n  coord_quickmap(xlim=c(-125,-110),ylim=c(30,50))+\n  labs(fill=\"Year\")+\n  theme_minimal()+\n  theme(axis.text = element_blank(),\n        axis.title = element_blank())\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"map.png\")\n```\n:::\n\n::: {.cell hash='day19_anthropocene_cache/html/unnamed-chunk-9_49d2d753696f661bc145b2ead0c27519'}\n\n```{.r .cell-code}\nlibrary(cowplot)\n\nggdraw()+\n  draw_image(\"timeline.png\")+\n  draw_image(\"map.png\",scale=0.6,x=0.11,y=0.05)+\n  draw_label(\"April 29, 2014:\\nU.S. Fish and Wildlife Service declares\\nSierra Nevada Yellow-Legged Frog\\nspecies in danger of extinction\",hjust = 0,\n             x=0.7,y=0.8,size=6)+\n  draw_label(\"Sierra Nevada Yellow-Legged Frog\\nRana Muscosa once the most abundant frog in the Sierra Nevada\\nis now critically endangered, yellow-legged frogs\\nhave declined dramatically and they are now found\\nin fewer than 7 percent of their historic localities. \",\n             hjust = 0,\n             x=0.02,y=0.08,size=6)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"final.png\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}