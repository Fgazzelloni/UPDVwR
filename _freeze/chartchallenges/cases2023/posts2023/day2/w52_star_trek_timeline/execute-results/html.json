{
  "hash": "2faf10dda8ceb78c5486beb8845b3417",
  "result": {
    "markdown": "---\ntitle: \"Week 52 Star Trek Timelines\"\nauthor: \"fg\"\ndate: \"2023-04-02\"\noutput: html_document\n---\n\n\n\n## #30DayChartChallenge - Day2 - Waffle\n\n\n\n\nLoad the libraries\n\n::: {.cell hash='w52_star_trek_timeline_cache/html/unnamed-chunk-1_71c5ec710ff2e6fa99769ddfbe01bdca'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n::: {.cell hash='w52_star_trek_timeline_cache/html/unnamed-chunk-2_f7d30ba4a9e5902f8f18afdd3fb8f2be'}\n\n```{.r .cell-code}\ntuesdata <- tidytuesdayR::tt_load(2022, week = 52)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tDownloading file 1 of 2: `tlBooks.csv`\n\tDownloading file 2 of 2: `tlFootnotes.csv`\n```\n:::\n\n```{.r .cell-code}\ntlBooks <- tuesdata$tlBooks\ntlFootnotes<-tuesdata$tlFootnotes\n```\n:::\n\n::: {.cell hash='w52_star_trek_timeline_cache/html/unnamed-chunk-3_e3ddcd3714919a497191f2f0c810b900'}\n\n```{.r .cell-code}\ntlBooks%>%names\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"year\"               \"title\"              \"series\"            \n [4] \"anthology\"          \"format\"             \"number\"            \n [7] \"novelization\"       \"setting\"            \"stardate_start\"    \n[10] \"stardate_end\"       \"detailed_date\"      \"section\"           \n[13] \"primary_entry_year\" \"footnote\"          \n```\n:::\n:::\n\n::: {.cell hash='w52_star_trek_timeline_cache/html/unnamed-chunk-4_94a726bfa7a95ffe76db27a9ee046ed5'}\n\n```{.r .cell-code}\ntlFootnotes%>%names\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"footnote\" \"text\"    \n```\n:::\n:::\n\n\nJoin the two sets by `footnote`\n\nThe new dataset combines, year, title, ... with the footnote of the `Star Trek Timelines`.\nThe data comes from the {rtrek} package by Georgios Karamanis.\n\n\n::: {.cell hash='w52_star_trek_timeline_cache/html/unnamed-chunk-5_a3c1a3a21cc3ae6c7b2bdb7122e39d50'}\n\n```{.r .cell-code}\ndf <- tlBooks %>%\n  inner_join(tlFootnotes,by=\"footnote\")\n\ndf%>%DataExplorer::profile_missing()%>%arrange(pct_missing)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 15 Ã— 3\n   feature            num_missing pct_missing\n   <fct>                    <int>       <dbl>\n 1 year                         0      0     \n 2 title                        0      0     \n 3 format                       0      0     \n 4 novelization                 0      0     \n 5 setting                      0      0     \n 6 footnote                     0      0     \n 7 text                         0      0     \n 8 series                      28      0.0568\n 9 section                    265      0.538 \n10 number                     302      0.613 \n11 anthology                  325      0.659 \n12 primary_entry_year         367      0.744 \n13 stardate_start             406      0.824 \n14 detailed_date              425      0.862 \n15 stardate_end               464      0.941 \n```\n:::\n:::\n\n\n## How to make a `Waffle`\n\nThis is a little example from: [https://r-charts.com/part-whole/waffle-chart-ggplot2/](https://r-charts.com/part-whole/waffle-chart-ggplot2/)\n\n\n::: {.cell hash='w52_star_trek_timeline_cache/html/unnamed-chunk-6_a4228fe5259a36f62ffcb7b8d7bff0ab'}\n\n```{.r .cell-code}\n# install.packages(\"waffle\", repos = \"https://cinc.rud.is\")\nlibrary(waffle)\n\n# Vector\nx <- c(30, 25, 20, 5)\n\n# Waffle chart\nwaffle(x, rows = 8)\n```\n\n::: {.cell-output-display}\n![](w52_star_trek_timeline_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\nIn this dataset there are three formats: book, episode and story\n\n::: {.cell hash='w52_star_trek_timeline_cache/html/unnamed-chunk-7_343458d8174dc8cb0cc2d820271feba0'}\n\n```{.r .cell-code}\ndf%>%\n  count(format)%>%\n  waffle(rows=20)\n```\n:::\n\n\n### Using `ggplot2`\n\nThis `Waffle` is made of 12 different colors for identifying the `SSeries`. Here are used many colors from the `trekcolors` package for coloring the `series` of different colors. \n\n\n::: {.cell hash='w52_star_trek_timeline_cache/html/unnamed-chunk-8_e4823c82b2eaa41c89265873b948048c'}\n\n```{.r .cell-code}\n# install.packages(\"trekcolors\")\nlibrary(trekcolors)\n# trekcolors::lcars_colors()\n```\n:::\n\n\n\nThe fonts are from the `trekfont` package.\n\n\n::: {.cell hash='w52_star_trek_timeline_cache/html/unnamed-chunk-9_91909558b88cf56ac73dc721b2a6c3e9'}\n\n```{.r .cell-code}\n# install.packages(\"trekfont\")\nlibrary(trekfont)\n# trekfont::show_trekfonts()\nlibrary(showtext)\nfont <- c(\"Khan\", \"StarNext\", \"FederationDS9Title\", \"Federation\", \"Klingon\", \"ModernVulcan\", \"TNGcast\", \"FederationStarfleet\")\npath <- system.file(paste0(\"fonts/\", font, \".ttf\"), package = \"trekfont\")\nfor(i in seq_along(font)) font_add(font[i], path[i])\nfont_families()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"sans\"                \"serif\"               \"mono\"               \n [4] \"wqy-microhei\"        \"Khan\"                \"StarNext\"           \n [7] \"FederationDS9Title\"  \"Federation\"          \"Klingon\"            \n[10] \"ModernVulcan\"        \"TNGcast\"             \"FederationStarfleet\"\n```\n:::\n\n```{.r .cell-code}\nshowtext_auto(enable = TRUE)\n```\n:::\n\n::: {.cell hash='w52_star_trek_timeline_cache/html/unnamed-chunk-10_3e662908c4a87b2b182483dbce923e0e'}\n\n```{.r .cell-code}\nlibrary(waffle)\ndf%>%\n  count(series)%>%\n  drop_na()%>%\n  waffle(rows = 20, size = 0.5)+\n  scale_fill_manual(values =as.character(lcars_colors())) +\n  # Waffle plot\n  #ggplot(aes(fill = series, values = n)) +\n  #geom_waffle(n_rows = 20, size = 0.5, colour = \"white\") +\n  #scale_fill_manual(values =as.character(lcars_colors())) +\n  coord_equal() +\n  scale_x_continuous(expand = c(0, 0))+\n  labs(title=\"Star Trek Timelines Series\",\n       subtitle = \"\",\n       caption=\"DataSource: #TidyTuesday 2022 week52 - Star Trek Timelines\\nDataViz: Federica Gazzelloni #30DayChartChallenge 2023 Day2 - Waffle\\n\")+\n  theme_void()+\n  theme(text = element_text(family= \"StarNext\",size=14),\n        #legend.position = \"bottom\",\n        plot.title = element_text(size=50,hjust = 0.3,vjust = 0),\n        plot.caption = element_text(size=20,hjust = 0.4,family=\"FederationDS9Title\"),\n        panel.background = element_rect(fill=\"#9977AA\",color=\"#9977AA\"),\n        plot.background = element_rect(fill=\"#9977AA\",color=\"#9977AA\"))\n```\n\n::: {.cell-output-display}\n![](w52_star_trek_timeline_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='w52_star_trek_timeline_cache/html/unnamed-chunk-11_dec48dd444b4abf7562b40a1c470e627'}\n\n```{.r .cell-code}\nggsave(\"ss.png\",\n       width = 6,height = 5.5,\n       bg=\"#9977AA\",\n       dpi=200)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}