{
  "hash": "46a6a8d607e266126142cf1f5ade388b",
  "result": {
    "markdown": "---\ntitle: 'Downwards'\nsubtitle: 'Welcome to #30DayChartChallenge 2021 day 21'\ndate: '2021-04-21'\nimage: 'day21_downwards.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\nhttp://www.bdlc.umontreal.ca/CHMD/prov/que/que.htm\nhttps://github.com/ZainulArifin1/WeeklyPlot/tree/main/Week%202%2030%20DAY%20CHART\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(extrafont)\n\noptions(scipen = 999)\n\ndf <- read.delim(\"https://www.prdh.umontreal.ca/BDLC/data/que/Exposures_5x1.txt\",sep=\"\",skip=1)\n\n#df%>%ggplot(aes(x=Year,y=Total,group=Age,color=factor(Age)))+geom_line()\n\ndf$Age<-sub(\"1-4\",\"01-04\",df$Age)\ndf$Age<-sub(\"5-9\",\"05-09\",df$Age)\ndf$Age<-sub(\"905-099\",\"95+\",df$Age)\n\nmy_df <- df%>%\n  arrange(Year,desc(Age))%>%\n  filter(!Age==\"110+\" & !Age==\"100-104\" & !Age==\"105-109\" & !Age==\"0\")%>%\n  pivot_longer(cols=c(\"Female\",\"Male\"),names_to=\"Gender\",values_to=\"Exposure\")%>%\n  select(-Total)\n\nmy_df_plot <- my_df %>%\n  ggplot(aes(x = Age, y = Exposure, fill = Gender)) +\n  geom_bar(stat = 'identity') +\n  scale_fill_manual(values = c(\"#d07be0\",\"#29ffc6\")) +\n  scale_y_continuous(\n    breaks = c(0, 10000000, 20000000, 30000000, 40000000),\n    label = c(\"0M\", \"10M\", \"20M\",\"30M\", \"40M\")) +\n    coord_flip(clip = \"on\") +\n    theme(plot.background = element_rect(fill = \"#5e5556\") ,\n          panel.background = element_rect(fill = \"#5e5556\"),\n          panel.border = element_blank(),\n          strip.background = element_blank(),\n          strip.text.x = element_blank(),\n   \n          panel.grid.minor = element_blank(),\n          panel.grid.major = element_blank(),\n    \n    legend.position = \"top\",\n    legend.title = element_text(family=\"Luminari\",size = 15,face = 'bold',color = 'white'),\n    legend.key.size = unit(0.75, 'cm'),\n    legend.background = element_blank(),\n    legend.text = element_text(family=\"Luminari\",size = 15,face = 'bold',color = 'white'),\n    \n    plot.title = element_text(family=\"Luminari\",size = 22,hjust = 0.5,face = 'bold',color = 'white'),\n    plot.subtitle = element_text(family=\"Luminari\",size = 12,hjust = 0,face = 'bold',color = 'white'),\n    plot.caption = element_text(family=\"Luminari\",size = 10,hjust = 1,face = 'bold',color = \"white\"),\n    \n    axis.line.x = element_line(size=2,color=\"white\"),\n    axis.title.x = element_text(family=\"Luminari\",size = 16,face = 'bold',color = '#242422'),\n    axis.text.x = element_text(family=\"Luminari\",size = 12,face = 'bold', color = 'white'),\n    axis.text.y = element_text(family=\"Luminari\",size = 10,face = 'bold',color = 'white'),\n    axis.ticks = element_blank(),\n    axis.title.y = element_text(family=\"Luminari\",size = 16,face = 'bold',color = '#242422'),\n    plot.margin = margin(10,10,10,10)\n  )\n\n\nexposure_plot <- my_df_plot +\n  labs(title = \"Quebec Exposure-to-risk Change\\n\\n{1921-2016}\",\n       subtitle = \"Exposure is pivoted downwards by age increasing\",\n       y = \"Exposure-to-risk (Population in millions)\", x=\"Age\",\n       caption = \"Viz @fgazzelloni | Data Source: Canadian Human Mortality Database | Downwards Day21\") \n\n\n# saving ######################################\n\n\nragg::agg_png(here::here(\"day21_downwards\", \"downwards_day21.png\"),\n              res = 320, width = 14, height = 8, units = \"in\")\nexposure_plot\n\ndev.off()\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}