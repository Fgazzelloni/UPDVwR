{
  "hash": "bdc01e3b105bcfca7958c82ef33aed5b",
  "result": {
    "markdown": "---\ntitle: '3d'\nsubtitle: 'Welcome to #30DayChartChallenge 2021 day 30'\ndate: '2021-04-30'\nimage: 'day30_3D.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\n### 3-D\n### source: Tidytuesday week 9 \n### Employment and Earnings | BLS | BLS Article\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidytuesdayR)\nlibrary(tidyverse)\nlibrary(rayshader)\nlibrary(rayrender)\nlibrary(sp)\nlibrary(scales)\nlibrary(raster)\nlibrary(DataExplorer)\nlibrary(viridis)\nlibrary(ggthemes)\nlibrary(hrbrthemes)\nlibrary(extrafont)\nfonts()\n\n\ntuesdata <- tidytuesdayR::tt_load(2021, week = 9)\n\nemployed <- tuesdata$employed\nearn <- tuesdata$earn\n\nhead(employed)\nhead(earn)\n\nplyr::count(employed$race_gender)\nplyr::count(earn$race)\n\n\ndf <- employed %>%\n  filter(race_gender==c(\"Asian\",\"gray31 or African American\",\"White\")) %>%\n  rename(race=race_gender) %>%\n  inner_join(earn,by=c(\"race\",\"year\")) %>%\n  select(-employ_n,-ethnic_origin) \n\nplyr::count(df$industry)\nprofile_missing(df)\n\n\nmissing_industries <- df %>%\n  filter(is.na(industry)) %>%\n  select(-industry,-industry_total)\n\n\nprofile_missing(df)\nplyr::count(df$ethnic_origin)\nplyr::count(missing_industries$minor_occupation)\nplyr::count(df$minor_occupation)\nplyr::count(df$year)\nplyr::count(df$age)\n\n\nmy_df<-df%>%filter(age==c(\"16 to 24 years\",\"25 to 54 years\"))%>%\n  rename(earning=median_weekly_earn)%>%\n  mutate(earning_prop=earning/n_persons*10000)\n\nrange(my_df$earning_prop)\nlog2(0.1437547)\n\n\nemployment_3D<-ggplot(my_df,aes(x=earning,y=log2(earning_prop)))+\n  stat_density_2d(aes(fill=..density..), geom = \"raster\", contour = FALSE) +\n  scale_fill_viridis_c(option = \"A\") +\n  facet_wrap(~race)+\n  labs(title=\"Earning level by race\",\n       subtitle=\"Employed persons by industry, sex, race, and occupation\\nWeekly earnings data from the Current Population Survey\",\n       caption=\"Viz @fgazzelloni | 3D Day30 | Datasource: TidyTuesday w9 \\nEmployment and Earnings | BLS | BLS Article \",\n       fill=\"Density\",\n       x=\"Earnings(weekly)\",\n       y=\"Proportion of normalized Earnings (log2)\")+\n  theme_base()+\n  theme(strip.text = element_text(size=5,face=\"bold\",color=\"white\",family=\"Comic Sans MS\"),\n        strip.background = element_rect(color=\"gray31\",fill=\"darkseagreen4\"),\n        plot.background = element_rect(color=\"gray31\",fill=\"darkslateblue\"),\n        panel.background = element_rect(color=\"gray31\",fill=\"darkslateblue\"),\n        legend.background = element_rect(color=\"gray31\",fill=\"darkseagreen4\"),\n        legend.title = element_text(color=\"white\",face=\"bold\",family=\"Comic Sans MS\"),\n        legend.text = element_text(color=\"white\",family=\"Comic Sans MS\"),\n        plot.title = element_text(size=20,color=\"white\",family=\"Comic Sans MS\"),\n        plot.subtitle = element_text(size=10,color=\"orange\",family=\"Comic Sans MS\"),\n        plot.caption = element_text(size=8,color=\"white\",family=\"Comic Sans MS\"),\n        axis.title = element_text(color=\"white\",family=\"Comic Sans MS\"),\n        axis.text = element_text(color=\"white\",family=\"Comic Sans MS\"),\n        axis.text.x = element_text(size=8,family=\"Comic Sans MS\"),\n        axis.text.y = element_text(size=8,family=\"Comic Sans MS\"))\n\n# render plot as a 3D #######################\n\nplot_gg(employment_3D,multicore=TRUE,width=5,height=5,scale=250,windowsize=c(1400,866),\n        zoom = 0.55, phi = 30)\nrender_snapshot(\"3D_day30\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}