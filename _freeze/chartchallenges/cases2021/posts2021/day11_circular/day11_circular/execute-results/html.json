{
  "hash": "769de150a986c4d6b3f840907407fb53",
  "result": {
    "markdown": "---\ntitle: 'Circular'\nsubtitle: 'Welcome to #30DayChartChallenge 2021 day 11'\ndate: '2021-04-11'\nimage: 'day11_circular.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# Libraries\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(extrafont)\n\n  \n############################### REGIONS #####################  \n\nCovid19_it_reg<- read.csv(\"https://raw.githubusercontent.com/pcm-dpc/COVID-19/master/dati-regioni/dpc-covid19-ita-regioni.csv\")\nnames(Covid19_it_reg)\n\ndf_reg <- Covid19_it_reg %>%\n  rename(regions=\"denominazione_regione\",\n         deaths=\"deceduti\") %>%\n  mutate(date=format(as.Date(data),\"%Y-%m-%d\")) %>%\n  select(date,regions,deaths)%>%\n group_by(date) %>%\n  summarize(deaths.sum=sum(deaths)) %>% ungroup() %>%\n  mutate(deaths.new=c(0,diff(deaths.sum)),\n         month=month(date),\n         year=year(date),\n         month.year=paste(month,year,sep=\"_\"))\n\n########################################################\n\n# Make the plot\nfinal <- ggplot(df_reg, aes(x=as.factor(month.year), y=log(deaths.new),\n                   fill=month.year,labels=deaths.sum))+ \n  geom_bar(stat=\"identity\") +\n  labs(title=\"Covid19 - Italy \\nNew deaths per month\",\n       subtitle=\"Normalized with log(deaths)\",\n       caption=\"Viz @fgazzelloni | Datasource: Civil Protection | Circular Day 11\",\n       x=\"Time (month.year)\",y=\"Normalized deaths\")+\n  ylim(-10,10) +\n  theme_minimal() +\n  theme(plot.title = element_text(size=28,family=\"Arial Black\"),\n        plot.subtitle = element_text(size=12,family=\"Arial Black\"),\n    legend.position = \"none\",\n        axis.text.x.top = element_text(size=3),\n    axis.text = element_blank(),\n    axis.text.x = element_text(size=8,family=\"Arial Black\",angle=0,\n                               vjust = -2,hjust=-5),\n    #axis.text.y = element_text(vjust = 2,hjust=5),\n    axis.title = element_text(size=8,family=\"Arial Black\"),\n    panel.grid = element_blank(),\n    plot.background = element_rect(fill = \"#663fd9e2\" , color = NA),\n    plot.margin = unit(rep(1,4), \"cm\") \n  ) +\n  coord_polar(start=0) \n  \n\n##########################\n\n\nragg::agg_png(here::here(\"day11\", \"Circular_day11.png\"),\n              res = 320, width = 14, height = 8, units = \"in\")\nfinal\n\ndev.off()\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}