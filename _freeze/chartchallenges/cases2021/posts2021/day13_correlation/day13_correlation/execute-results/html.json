{
  "hash": "bbc7862711afae4e0105f94c2db2c0aa",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Correlation'\nsubtitle: 'Welcome to #30DayChartChallenge 2021 day 13'\ndate: '2021-04-13'\nimage: 'day13_correlation.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\n\n### correlation day 13\n\n### Inspired by: TidyTuesday 2019/35 - Simpsons Guest Stars by Wikipedia - author: \"Cedric Scherer\"\n### data for Stats for pub health program created  by imperial college\n\n\n\n\nLoad libraries\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggtext)\nlibrary(patchwork)\nlibrary(ggcorrplot)\nlibrary(extrafont)\n\n\ntheme_update(rect = element_rect(color = NA,\n                                 fill = \"#a9f51d\"),\n             line = element_blank(),\n             text = element_text(color = \"black\"))\n\n################# MANIPULATION ############################\n\ndata<- read.csv(file=\"cancer data for MOOC 1.csv\", header = TRUE, sep = ',')\nsum(is.na(data))\ndata[is.na(data)]<-0\n\ndata$fruitveg<- data$fruit + data$veg\nnames(data)<-c(\"patient_id\",\"Age\",\"Gender\",\"BMI\",\"Smoking\",\"Exercise\",\n               \"Fruit\",\"Veg\",\"Cancer\",\"Fruit & Veg\")\n\ncorr_df<-data%>%select(-1)\n\ncorr<-cor(corr_df)\ncorr2<-cor(corr_df[c(-6,-7)])\n\n####################### PLOTTING ######################\ncorrelation <- ggcorrplot(corr,method=\"circle\")+\n  ggtitle(label=\"Cancer and contributing factors\",\n  subtitle=\"Causation is multifactorial, and provide examples of modification of the risk factors through prevention, \\nunderstanding of population cancer aetiology interaction effects between risk factors and joint factors.\\n'Evaluating intrinsic and non-intrinsic cancer risk factors' 2018\\n(Wu, S., Zhu, W., Thompson, P. et al.)\")+\n\n  theme(plot.title = element_text(family=\"Courier New\",size=14,face=\"bold\",color=\"#460046\"),\n        plot.subtitle = element_text(family=\"Courier New\",size=11),\n        axis.text = element_text(size=11,family=\"Courier New\",face=\"bold\"),\n    legend.title = element_text(size=8,family=\"Courier New\"),\n    legend.text = element_text(size=8,family=\"Courier New\"))\n    #plot.margin = margin(5,5,5,5))\n\n\ncorrelation2<-ggcorrplot(corr2,hc.order = TRUE, type = \"lower\",\n                         outline.col = \"white\",lab = TRUE)+\n  theme(legend.position = \"none\",\n        axis.text = element_text(size=11,family=\"Courier New\",face=\"bold\"))\n\nmain_plot <-correlation + correlation2\n\n################### WIGGETTING ############################\nlabels <-\n  tibble(\n    labels = c(\n      \"<img src='exercise-png-Transparent-Images.png'\n    +     width='100' /><br><b style='color:#00947E'>Exercise</b><br><i style='color:#00947E'>13%</i></b>\",\n      \"<img src='fruitveg.png'\n    +     width='90' /><br><b style='color:#FF5180'>Fruit & Veg</b><br><i style='color:#FF5180'>-25%</i></b>\",\n      \"<img src='obesity.png'\n    +     width='90' /><br><b style='color:#FF5180'>BMI</b><br><i style='color:#FF5180'>-12%</i></b>\",\n      \"<img src='gender.png'\n    +     width='90' /><br><b style='color:#FF5180'>Gender</b><br><i style='color:#FF5180'>20%</i></b>\",\n      \"<img src='smoking.png'\n    +     width='90' /><br><b style='color:#FF5180'>Smoking</b><br><i style='color:#FF5180'>30%</i></b>\"\n    ),\n    x = 1:5,\n    y = rep(1, 5)\n  )\n\nlegend <-\n  ggplot(labels, aes(x, y)) +\n  geom_richtext(aes(label = labels),\n                fill = NA,\n                color = NA,\n                vjust = 0) +\n  annotate(\"text\", x = 3.5, y = 1.018,\n           label = \"Correlated Risk factors\",\n           size = 15,\n           fontface = \"bold\",\n           family = \"Courier New\") +\n\n  scale_x_continuous(limits = c(0.6, 6.1)) +\n  scale_y_continuous(limits =  c(1, 1.02)) +\n  theme_void() +\n  theme(plot.background = element_rect(fill = \"#87cf80\"))\n\n########################### CAPTIONING #####################################\n\ncaption <-\n  ggplot(data.frame(x = 1:2, y = 1:10)) +\n  labs(x = NULL, y = NULL,\n       caption = \"Viz @fgazzelloni| Source: Imperial College data Mooc | Correlation Day 13\")+\n  theme(line = element_blank(),\n        plot.caption = element_text(size=8, family=\"Courier New\",color=\"#460046\",face=\"bold\"),\n        panel.background = element_rect(fill = \"transparent\"),\n        plot.background = element_rect(fill = \"transparent\",color = \"transparent\"),\n        panel.border = element_rect(color = \"transparent\"),\n        axis.text = element_blank())\n\n\n###################### SAVING ############################\n\nfinal <- legend + main_plot + caption + plot_layout(ncol = 1,heights = c(0.6, 1, 0))\n\nragg::agg_png(here::here(\"day13_correlation\", \"Correlation_day13.png\"),\n              res = 320, width = 14, height = 8, units = \"in\")\nfinal\n\ndev.off()\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}