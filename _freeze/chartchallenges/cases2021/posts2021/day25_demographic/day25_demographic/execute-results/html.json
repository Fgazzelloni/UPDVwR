{
  "hash": "f592235dfd8a54ac0e45e77d912a81ce",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Demographic'\nsubtitle: 'Welcome to #30DayChartChallenge 2021 day 25'\ndate: '2021-04-25'\nimage: 'day25_demographic.gif'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\n## Demographic Day 25 - Second attempt \ninspired by: https://github.com/ZainulArifin1/WeeklyPlot/tree/main/Week%202%2030%20DAY%20CHART\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(hrbrthemes)\nlibrary(extrafont)\nlibrary(RColorBrewer)\nlibrary(ggpol)\nlibrary(gganimate)\nlibrary(gifski)\n\noptions(scipen = 999)\n\n\n# Data are from IHME healthdata.org for European Union countries, 5-year cat \n# Population change 2010-2019\n# link to population data: http://ghdx.healthdata.org/record/ihme-data/gbd-2019-population-estimates-1950-2019\n#################### population ##################\n# data wrangling\npopulation2010 <- read.csv(\"IHME_GBD_2019_POP_2010_Y2020M10D15.csv\")%>%\n  filter(age_group_id %in% 5:21)%>%\n  filter(location_name == \"European Union\")%>%\n  filter(!sex_name==\"both\")%>%\n  mutate(population2010=val)%>%\n  select(age_group_name,sex_name,population2010)\npopulation2011 <- read.csv(\"IHME_GBD_2019_POP_2011_Y2020M10D15.csv\")%>%\n  filter(age_group_id %in% 5:21)%>%\n  filter(location_name == \"European Union\")%>%\n  filter(!sex_name==\"both\")%>%\n  mutate(population2011=val)%>%\n  select(age_group_name,sex_name,population2011)\npopulation2012 <- read.csv(\"IHME_GBD_2019_POP_2012_Y2020M10D15.csv\")%>%\n  filter(age_group_id %in% 5:21)%>%\n  filter(location_name == \"European Union\")%>%\n  filter(!sex_name==\"both\")%>%\n  mutate(population2012=val)%>%\n  select(age_group_name,sex_name,population2012)\npopulation2013 <- read.csv(\"IHME_GBD_2019_POP_2013_Y2020M10D15.csv\")%>%\n  filter(age_group_id %in% 5:21)%>%\n  filter(location_name == \"European Union\")%>%\n  filter(!sex_name==\"both\")%>%\n  mutate(population2013=val)%>%\n  select(age_group_name,sex_name,population2013)\npopulation2014 <- read.csv(\"IHME_GBD_2019_POP_2014_Y2020M10D15.csv\")%>%\n  filter(age_group_id %in% 5:21)%>%\n  filter(location_name == \"European Union\")%>%\n  filter(!sex_name==\"both\")%>%\n  mutate(population2014=val)%>%\n  select(age_group_name,sex_name,population2014)\npopulation2015 <- read.csv(\"IHME_GBD_2019_POP_2015_Y2020M10D15.csv\")%>%\n  filter(age_group_id %in% 5:21)%>%\n  filter(location_name == \"European Union\")%>%\n  filter(!sex_name==\"both\")%>%\n  mutate(population2015=val)%>%\n  select(age_group_name,sex_name,population2015)\npopulation2016 <- read.csv(\"IHME_GBD_2019_POP_2016_Y2020M10D15.csv\")%>%\n  filter(age_group_id %in% 5:21)%>%\n  filter(location_name == \"European Union\")%>%\n  filter(!sex_name==\"both\")%>%\n  mutate(population2016=val)%>%\n  select(age_group_name,sex_name,population2016)\npopulation2017 <- read.csv(\"IHME_GBD_2019_POP_2017_Y2020M10D15.csv\")%>%\n  filter(age_group_id %in% 5:21)%>%\n  filter(location_name == \"European Union\")%>%\n  filter(!sex_name==\"both\")%>%\n  mutate(population2017=val)%>%\n  select(age_group_name,sex_name,population2017)\npopulation2018 <- read.csv(\"IHME_GBD_2019_POP_2018_Y2020M10D15.csv\")%>%\n  filter(age_group_id %in% 5:21)%>%\n  filter(location_name == \"European Union\")%>%\n  filter(!sex_name==\"both\")%>%\n  mutate(population2018=val)%>%\n  select(age_group_name,sex_name,population2018)\npopulation2019 <- read.csv(\"IHME_GBD_2019_POP_2019_Y2020M10D15.csv\")%>%\n  filter(age_group_id %in% 5:21)%>%\n  filter(location_name == \"European Union\")%>%\n  filter(!sex_name==\"both\")%>%\n  mutate(population2019=val)%>%\n  select(age_group_name,sex_name,population2019)\n\n\nEU_pop <- population2010%>%\n  inner_join(population2011,by=c(\"age_group_name\",\"sex_name\"))\nEU_pop <- EU_pop%>%\ninner_join(population2012,by=c(\"age_group_name\",\"sex_name\"))\nEU_pop <- EU_pop%>%\n  inner_join(population2013,by=c(\"age_group_name\",\"sex_name\"))\nEU_pop <- EU_pop%>%\n  inner_join(population2014,by=c(\"age_group_name\",\"sex_name\"))\nEU_pop <- EU_pop%>%\n  inner_join(population2015,by=c(\"age_group_name\",\"sex_name\"))\nEU_pop <- EU_pop%>%\n  inner_join(population2016,by=c(\"age_group_name\",\"sex_name\"))\nEU_pop <- EU_pop%>%\n  inner_join(population2017,by=c(\"age_group_name\",\"sex_name\"))\nEU_pop <- EU_pop%>%\n  inner_join(population2018,by=c(\"age_group_name\",\"sex_name\"))\nEU_pop <- EU_pop%>%\n  inner_join(population2019,by=c(\"age_group_name\",\"sex_name\"))\n\n\nEU_pop$age_group_name<-sub(\"to\",\"-\",EU_pop$age_group_name)\nEU_pop$age_group_name<-sub(\"80 plus\",\"80+\",EU_pop$age_group_name)\nEU_pop$age_group_name<-sub(\"1 - 4\",\"01 - 04\",EU_pop$age_group_name)\nEU_pop$age_group_name<-sub(\"5 - 9\",\"05 - 09\",EU_pop$age_group_name)\nnames(EU_pop)\n\nEU_pop <- EU_pop %>%\n  gather(year, pop, 3:12) \n\n\nEU_pop$year<-sub(\"population\",\"\",EU_pop$year)\nEU_pop<-EU_pop%>%rename(sex=sex_name)\nEU_pop<-EU_pop%>%rename(age=age_group_name)\nnames(EU_pop)\n\nEU_pop <- EU_pop%>%\n  mutate(pop = ifelse(sex == 'female', as.integer(pop * -1), as.integer(pop)))\n\ns<-EU_pop%>%filter(age==\"80+\")\n\n\nrange(EU_pop$pop)\n\n# plotting #####################################################\nEU_10_19_Pyramid <- EU_pop %>%\n  ggplot(aes(x = age, y = pop, fill = sex)) +\n  geom_bar(stat = 'identity') +\n  scale_fill_manual(values=c(\"#CC6666\", \"#9999CC\", \"#66CC99\")) +\n  scale_y_continuous(breaks = c(-20000000, -10000000, -5000000, 0, 5000000, 10000000, 20000000),\n                     label = c(\"20M\", \"10M\", \"5M\", \"0\", \"5M\", \"15M\", \"20M\")) +\n  coord_flip() + \n  labs(title = \"European Union Population \\nchange 2010-2019\\n\\n{closest_state}\",\n       subtitle =\"\",\n       y = \"Population\",\n       caption = \"@fgazzelloni | Data Source: IHME | Demographic Day25\") +\n  theme_ipsum() +\n  theme(legend.position = \"bottom\",\n        plot.background = element_rect(fill = \"palegreen\") ,\n        panel.grid.minor = element_blank(),\n        panel.grid.major = element_blank(),\n        axis.text = element_text(size = 12),\n        legend.title = element_blank(),\n        legend.key.size = unit(0.75, 'cm'),\n        legend.background = element_blank(),\n        legend.text = element_text(size = 15,face = 'bold'),\n        plot.title = element_text(size = 22,hjust = 0.0,face = 'bold'),\n        axis.title.x = element_text(size = 16,face = 'bold'),\n        axis.title.y = element_text(size = 16,face = 'bold'),\n        axis.text.x = element_text(size = 10,face = 'bold'),\n        axis.text.y = element_text(size = 10,face = 'bold'),\n        plot.caption = element_text(size = 8,hjust = 1,face = 'bold',color = \"#CC6666\"),\n        plot.margin = margin(10,10,10,10))\n\n\nEU_10_19_Pyramid <- EU_10_19_Pyramid + \n  transition_states(year,transition_length = 1,state_length = 2) + \n  enter_fade() +\n  exit_fade() + \n  ease_aes('cubic-in-out')\n\nanimate(EU_10_19_Pyramid,\n        fps = 40,duration = 5,width = 1200,height = 1400,res = 120,\n        renderer = gifski_renderer('demographic_day25.gif'))\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}