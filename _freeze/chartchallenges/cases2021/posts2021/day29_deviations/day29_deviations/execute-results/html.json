{
  "hash": "6f5a6b1b27006f6f7286ca94589b67c0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Deviations'\nsubtitle: 'Welcome to #30DayChartChallenge 2021 day 29'\ndate: '2021-04-29'\nimage: 'day29_deviations.png'\nimage-alt: ''\ndescription: 'Networks'\noutput: html_document\nexecute: \n   eval: false\n---\n\n\n\n\n\n###  Deviations day29\n\n\nLoad libraries\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(DataExplorer)\nlibrary(ggthemes)\n\n\n\n# load data ################################\ndata_all_countries<-read.csv(\"data_all_countries.csv\")\n\n# check and wrangling #######################\nhead(data_all_countries)\nprofile_missing(data_all_countries)\nplyr::count(data_all_countries$location_name)\n\n# select countries of interest \nmy_countries<-c(\"Madagascar\",\"Bahamas\",\"San Marino\")\n\n# and plotting #####################################\n\ndeviations_plot <- data_all_countries %>%\n  filter(location_name %in% my_countries) %>%\n  arrange(location_name) %>%\n  group_by(measure_name,location_name) %>%\n  summarize(avg_measure=median(val)) %>%\n  ungroup() %>%\n  mutate(se = sd(avg_measure) / sqrt(length(avg_measure))) %>%\n\n  ggplot(aes(x=measure_name,y=avg_measure,color=location_name)) +\n  geom_bar(stat=\"identity\", aes(fill=measure_name), alpha=0.8) +\n  geom_errorbar(aes(x=measure_name, ymin=avg_measure-se, \n                     ymax=avg_measure+se),\n                 stat = \"identity\",\n                 position = \"identity\",\n                 na.rm = FALSE,\n                 orientation = NA,\n                 show.legend = NA,\n                 inherit.aes = TRUE,\n                 width=0.4, \n                 colour=\"red\", \n                 alpha=0.8, size=0.8) +\n  labs(title=\"Global Metrics deviation for 3 selected Countries:\\n\",\n       caption=\"Viz. @fgazzelloni | Datasource: IHME - healthdata.org | Deviations Day29\",\n       x=\"Global Metrics\",\n       y=\"Median value per metric\",\n       color=\"Country\",\n       fill=\"Metric\") + \n  scale_x_discrete(labels=c(\"DALYs (Disability-Adjusted Life Years)\" = \"DALYs\",\n                            \"Deaths\" = \"Deaths\",\n                            \"YLDs (Years Lived with Disability)\" = \"YLDs\",\n                            \"YLLs (Years of Life Lost)\" = \"YLLs\")) +\n  facet_wrap(~location_name) +\n  annotate(\"text\",x=1,y=0.3, label=\"deviations\",color=\"red\",size=3) +\n  annotate(\"curve\", x = 1, xend = 1.2, y = 0.25, yend = 0.35,\n           colour = \"lightblue\") +\n  annotate(\"pointrange\", x = 1, y = 0.2, ymin =0.25, ymax = 0.35,\n           colour = \"red\", size = 0.3) +\n  theme_economist() +\n  theme(axis.text.x = element_text(angle=0),\n        axis.title.x = element_text(hjust=0.5,vjust=-1),\n        axis.title.y = element_text(hjust=0.5,vjust=1.2),\n        plot.title = element_text(size=35),\n        plot.margin = margin(7,7,7,7),\n        panel.background = element_rect(size=2),\n        legend.position = \"top\",\n        legend.title = element_text(face=\"bold\"),\n        #legend.key = element_text(),\n        legend.box = \"vertical\" )\n\n######### saving ###############################\n\nragg::agg_png(here::here(\"day29_deviations\", \"deviations_day29.png\"),\n              res = 320, width = 14, height = 8, units = \"in\")\ndeviations_plot\n\ndev.off()\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}